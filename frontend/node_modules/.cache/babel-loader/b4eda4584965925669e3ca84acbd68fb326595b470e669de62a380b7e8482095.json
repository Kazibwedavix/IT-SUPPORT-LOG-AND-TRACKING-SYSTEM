{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useParams,useNavigate,Link}from'react-router-dom';import authService from'../services/authService';import LoadingSpinner from'../components/LoadingSpinner';import'../styles/EmailVerification.css';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const EmailVerification=()=>{const{token}=useParams();const navigate=useNavigate();const[status,setStatus]=useState('verifying');// 'verifying', 'success', 'error'\nconst[message,setMessage]=useState('');const[isLoading,setIsLoading]=useState(true);useEffect(()=>{const verifyEmail=async()=>{if(!token){setStatus('error');setMessage('Invalid verification link. No token provided.');setIsLoading(false);return;}try{setIsLoading(true);const response=await authService.verifyEmail(token);if(response.success){setStatus('success');setMessage('Email verified successfully! You can now log in to your account.');}else{setStatus('error');setMessage(response.message||'Email verification failed. The link may be invalid or expired.');}}catch(error){var _error$response,_error$response$data;console.error('Email verification error:',error);setStatus('error');setMessage(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message)||'Email verification failed. Please try again or request a new verification email.');}finally{setIsLoading(false);}};verifyEmail();},[token]);const handleResendVerification=async()=>{// This would require the user's email, so we'll redirect to login\nnavigate('/login',{state:{message:'Please log in to request a new verification email.',type:'info'}});};if(isLoading){return/*#__PURE__*/_jsx(\"div\",{className:\"email-verification-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"verification-card\",children:[/*#__PURE__*/_jsx(LoadingSpinner,{}),/*#__PURE__*/_jsx(\"h2\",{children:\"Verifying Your Email\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Please wait while we verify your email address...\"})]})});}return/*#__PURE__*/_jsx(\"div\",{className:\"email-verification-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"verification-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"verification-icon \".concat(status),children:status==='success'?/*#__PURE__*/_jsxs(\"svg\",{width:\"64\",height:\"64\",viewBox:\"0 0 24 24\",fill:\"none\",stroke:\"currentColor\",strokeWidth:\"2\",children:[/*#__PURE__*/_jsx(\"path\",{d:\"M22 11.08V12a10 10 0 1 1-5.93-9.14\"}),/*#__PURE__*/_jsx(\"polyline\",{points:\"22,4 12,14.01 9,11.01\"})]}):/*#__PURE__*/_jsxs(\"svg\",{width:\"64\",height:\"64\",viewBox:\"0 0 24 24\",fill:\"none\",stroke:\"currentColor\",strokeWidth:\"2\",children:[/*#__PURE__*/_jsx(\"circle\",{cx:\"12\",cy:\"12\",r:\"10\"}),/*#__PURE__*/_jsx(\"line\",{x1:\"15\",y1:\"9\",x2:\"9\",y2:\"15\"}),/*#__PURE__*/_jsx(\"line\",{x1:\"9\",y1:\"9\",x2:\"15\",y2:\"15\"})]})}),/*#__PURE__*/_jsx(\"h2\",{className:\"verification-title \".concat(status),children:status==='success'?'Email Verified!':'Verification Failed'}),/*#__PURE__*/_jsx(\"p\",{className:\"verification-message\",children:message}),/*#__PURE__*/_jsx(\"div\",{className:\"verification-actions\",children:status==='success'?/*#__PURE__*/_jsx(Link,{to:\"/login\",className:\"btn btn-primary\",children:\"Continue to Login\"}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleResendVerification,className:\"btn btn-secondary\",children:\"Back to Login\"}),/*#__PURE__*/_jsx(Link,{to:\"/register\",className:\"btn btn-outline\",children:\"Create New Account\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"verification-footer\",children:/*#__PURE__*/_jsxs(\"p\",{children:[\"Need help? \",/*#__PURE__*/_jsx(Link,{to:\"/forgot-password\",children:\"Contact Support\"})]})})]})});};export default EmailVerification;","map":{"version":3,"names":["React","useState","useEffect","useParams","useNavigate","Link","authService","LoadingSpinner","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","EmailVerification","token","navigate","status","setStatus","message","setMessage","isLoading","setIsLoading","verifyEmail","response","success","error","_error$response","_error$response$data","console","data","handleResendVerification","state","type","className","children","concat","width","height","viewBox","fill","stroke","strokeWidth","d","points","cx","cy","r","x1","y1","x2","y2","to","onClick"],"sources":["C:/Users/KADZ-TECH/Documents/dev/it-support-system/frontend/src/pages/EmailVerification.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useParams, useNavigate, Link } from 'react-router-dom';\r\nimport authService from '../services/authService';\r\nimport LoadingSpinner from '../components/LoadingSpinner';\r\nimport '../styles/EmailVerification.css';\r\n\r\nconst EmailVerification = () => {\r\n  const { token } = useParams();\r\n  const navigate = useNavigate();\r\n  const [status, setStatus] = useState('verifying'); // 'verifying', 'success', 'error'\r\n  const [message, setMessage] = useState('');\r\n  const [isLoading, setIsLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    const verifyEmail = async () => {\r\n      if (!token) {\r\n        setStatus('error');\r\n        setMessage('Invalid verification link. No token provided.');\r\n        setIsLoading(false);\r\n        return;\r\n      }\r\n\r\n      try {\r\n        setIsLoading(true);\r\n        const response = await authService.verifyEmail(token);\r\n\r\n        if (response.success) {\r\n          setStatus('success');\r\n          setMessage('Email verified successfully! You can now log in to your account.');\r\n        } else {\r\n          setStatus('error');\r\n          setMessage(response.message || 'Email verification failed. The link may be invalid or expired.');\r\n        }\r\n      } catch (error) {\r\n        console.error('Email verification error:', error);\r\n        setStatus('error');\r\n        setMessage(\r\n          error.response?.data?.message ||\r\n          'Email verification failed. Please try again or request a new verification email.'\r\n        );\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    };\r\n\r\n    verifyEmail();\r\n  }, [token]);\r\n\r\n  const handleResendVerification = async () => {\r\n    // This would require the user's email, so we'll redirect to login\r\n    navigate('/login', {\r\n      state: {\r\n        message: 'Please log in to request a new verification email.',\r\n        type: 'info'\r\n      }\r\n    });\r\n  };\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"email-verification-container\">\r\n        <div className=\"verification-card\">\r\n          <LoadingSpinner />\r\n          <h2>Verifying Your Email</h2>\r\n          <p>Please wait while we verify your email address...</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"email-verification-container\">\r\n      <div className=\"verification-card\">\r\n        <div className={`verification-icon ${status}`}>\r\n          {status === 'success' ? (\r\n            <svg width=\"64\" height=\"64\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n              <path d=\"M22 11.08V12a10 10 0 1 1-5.93-9.14\"/>\r\n              <polyline points=\"22,4 12,14.01 9,11.01\"/>\r\n            </svg>\r\n          ) : (\r\n            <svg width=\"64\" height=\"64\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n              <circle cx=\"12\" cy=\"12\" r=\"10\"/>\r\n              <line x1=\"15\" y1=\"9\" x2=\"9\" y2=\"15\"/>\r\n              <line x1=\"9\" y1=\"9\" x2=\"15\" y2=\"15\"/>\r\n            </svg>\r\n          )}\r\n        </div>\r\n\r\n        <h2 className={`verification-title ${status}`}>\r\n          {status === 'success' ? 'Email Verified!' : 'Verification Failed'}\r\n        </h2>\r\n\r\n        <p className=\"verification-message\">{message}</p>\r\n\r\n        <div className=\"verification-actions\">\r\n          {status === 'success' ? (\r\n            <Link to=\"/login\" className=\"btn btn-primary\">\r\n              Continue to Login\r\n            </Link>\r\n          ) : (\r\n            <>\r\n              <button\r\n                onClick={handleResendVerification}\r\n                className=\"btn btn-secondary\"\r\n              >\r\n                Back to Login\r\n              </button>\r\n              <Link to=\"/register\" className=\"btn btn-outline\">\r\n                Create New Account\r\n              </Link>\r\n            </>\r\n          )}\r\n        </div>\r\n\r\n        <div className=\"verification-footer\">\r\n          <p>\r\n            Need help? <Link to=\"/forgot-password\">Contact Support</Link>\r\n          </p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default EmailVerification;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}