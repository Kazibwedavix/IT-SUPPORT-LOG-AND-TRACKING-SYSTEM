{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\KADZ-TECH\\\\Documents\\\\dev\\\\it-support-system\\\\frontend\\\\src\\\\pages\\\\TicketDetail.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { useAuth } from '../contexts/AuthContext';\nimport Navbar from '../components/Navbar';\nimport LoadingSpinner from '../components/LoadingSpinner';\nimport ErrorBoundary from '../components/ErrorBoundary';\nimport ticketService from '../services/ticketService';\nimport '../styles/TicketDetail.css';\n\n/**\r\n * TicketDetail Component\r\n * \r\n * Displays detailed information about a specific ticket including\r\n * comments, activities, and status updates.\r\n * \r\n * @version 3.0.0\r\n * @author IT Support Team\r\n */\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst TicketDetail = () => {\n  _s();\n  var _ticket$_id, _ticket$issueType, _ticket$issueType2, _ticket$createdBy, _ticket$createdBy2, _ticket$assignedTo, _ticket$assignedTo2;\n  const {\n    id\n  } = useParams();\n  const navigate = useNavigate();\n  const {\n    user,\n    isAuthenticated\n  } = useAuth();\n  const [ticket, setTicket] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [comments, setComments] = useState([]);\n  const [newComment, setNewComment] = useState('');\n  const [submittingComment, setSubmittingComment] = useState(false);\n  const [updatingStatus, setUpdatingStatus] = useState(false);\n\n  // Validate ticket ID before fetching\n  const isValidTicketId = ticketId => {\n    if (!ticketId || ticketId === 'create' || ticketId === 'undefined' || ticketId === 'null' || ticketId.length < 10) {\n      return false;\n    }\n\n    // Check if it looks like a valid MongoDB ObjectId or UUID\n    const objectIdPattern = /^[0-9a-fA-F]{24}$/;\n    const uuidPattern = /^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i;\n    return objectIdPattern.test(ticketId) || uuidPattern.test(ticketId);\n  };\n  useEffect(() => {\n    // Check authentication first\n    if (!isAuthenticated) {\n      navigate('/login');\n      return;\n    }\n\n    // Validate ticket ID\n    if (!isValidTicketId(id)) {\n      console.error('Invalid ticket ID:', id);\n      setError('Invalid ticket ID or ticket not found');\n      setLoading(false);\n      navigate('/tickets');\n      return;\n    }\n\n    // Fetch ticket data\n    fetchTicketData();\n  }, [id, isAuthenticated, navigate]);\n\n  /**\r\n   * Fetches ticket data with error handling\r\n   */\n  const fetchTicketData = async () => {\n    try {\n      setLoading(true);\n      setError(null);\n\n      // Fetch ticket details\n      const response = await ticketService.getTicket(id);\n      if (response && response.success) {\n        var _response$data;\n        // Extract ticket from response\n        const ticketData = ((_response$data = response.data) === null || _response$data === void 0 ? void 0 : _response$data.ticket) || response.data || response.ticket || response;\n        if (ticketData && (ticketData._id || ticketData.id)) {\n          setTicket(ticketData);\n\n          // Only fetch comments if the endpoint exists\n          if (ticketService.getComments && typeof ticketService.getComments === 'function') {\n            try {\n              const commentsResponse = await ticketService.getComments(id);\n              if (commentsResponse && commentsResponse.success) {\n                var _commentsResponse$dat;\n                setComments(((_commentsResponse$dat = commentsResponse.data) === null || _commentsResponse$dat === void 0 ? void 0 : _commentsResponse$dat.comments) || commentsResponse.comments || commentsResponse.data || []);\n              }\n            } catch (commentsError) {\n              console.warn('Comments endpoint not available:', commentsError.message);\n              // This is not critical, so we don't set an error\n            }\n          }\n        } else {\n          throw new Error('Invalid ticket data structure received');\n        }\n      } else {\n        throw new Error((response === null || response === void 0 ? void 0 : response.message) || 'Failed to load ticket details');\n      }\n    } catch (error) {\n      console.error('Error fetching ticket data:', error);\n\n      // Handle specific error cases\n      let errorMessage = 'Unable to load ticket. Please try again.';\n      if (error.response) {\n        switch (error.response.status) {\n          case 404:\n            errorMessage = 'Ticket not found. It may have been deleted.';\n            break;\n          case 401:\n            errorMessage = 'Session expired. Please log in again.';\n            navigate('/login');\n            break;\n          case 403:\n            errorMessage = 'You do not have permission to view this ticket.';\n            break;\n        }\n      } else if (error.request) {\n        errorMessage = 'Unable to connect to server. Please check your connection.';\n      }\n      setError({\n        message: errorMessage,\n        type: 'fetch',\n        retryable: true\n      });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  /**\r\n   * Handles adding a new comment\r\n   */\n  const handleAddComment = async () => {\n    if (!newComment.trim() || !ticket) return;\n    try {\n      setSubmittingComment(true);\n      const commentData = {\n        content: newComment.trim(),\n        author: (user === null || user === void 0 ? void 0 : user.id) || (user === null || user === void 0 ? void 0 : user._id),\n        isInternal: (user === null || user === void 0 ? void 0 : user.role) === 'technician' || (user === null || user === void 0 ? void 0 : user.role) === 'admin',\n        createdAt: new Date().toISOString()\n      };\n\n      // Check if addComment method exists\n      if (ticketService.addComment && typeof ticketService.addComment === 'function') {\n        await ticketService.addComment(ticket._id, commentData);\n\n        // Refresh comments\n        if (ticketService.getComments) {\n          try {\n            const commentsResponse = await ticketService.getComments(ticket._id);\n            if (commentsResponse && commentsResponse.success) {\n              var _commentsResponse$dat2;\n              setComments(((_commentsResponse$dat2 = commentsResponse.data) === null || _commentsResponse$dat2 === void 0 ? void 0 : _commentsResponse$dat2.comments) || commentsResponse.comments || commentsResponse.data || []);\n            }\n          } catch (refreshError) {\n            console.warn('Could not refresh comments:', refreshError);\n          }\n        }\n\n        // Add comment locally if refresh fails\n        setComments(prev => [commentData, ...prev]);\n        setNewComment('');\n      } else {\n        // Fallback: add comment locally\n        setComments(prev => [commentData, ...prev]);\n        setNewComment('');\n      }\n    } catch (error) {\n      console.error('Error adding comment:', error);\n      setError({\n        message: 'Failed to add comment. Please try again.',\n        type: 'comment',\n        retryable: false\n      });\n    } finally {\n      setSubmittingComment(false);\n    }\n  };\n\n  /**\r\n   * Handles status update\r\n   */\n  const handleStatusUpdate = async newStatus => {\n    if (!ticket || updatingStatus) return;\n    try {\n      setUpdatingStatus(true);\n      if (ticketService.updateTicket && typeof ticketService.updateTicket === 'function') {\n        await ticketService.updateTicket(ticket._id, {\n          status: newStatus\n        });\n\n        // Update local state\n        setTicket(prev => ({\n          ...prev,\n          status: newStatus,\n          updatedAt: new Date().toISOString()\n        }));\n      } else {\n        // Fallback: update local state only\n        setTicket(prev => ({\n          ...prev,\n          status: newStatus,\n          updatedAt: new Date().toISOString()\n        }));\n      }\n    } catch (error) {\n      console.error('Error updating ticket status:', error);\n      setError({\n        message: 'Failed to update ticket status.',\n        type: 'status',\n        retryable: false\n      });\n    } finally {\n      setUpdatingStatus(false);\n    }\n  };\n\n  /**\r\n   * Formats date for display\r\n   */\n  const formatDate = dateString => {\n    if (!dateString) return 'N/A';\n    try {\n      const date = new Date(dateString);\n      const now = new Date();\n      const diffMs = now - date;\n      const diffHours = diffMs / (1000 * 60 * 60);\n      if (diffHours < 1) {\n        return 'Just now';\n      } else if (diffHours < 24) {\n        return `${Math.floor(diffHours)}h ago`;\n      } else {\n        return date.toLocaleString('en-US', {\n          year: 'numeric',\n          month: 'short',\n          day: 'numeric',\n          hour: '2-digit',\n          minute: '2-digit'\n        });\n      }\n    } catch (error) {\n      return 'Invalid date';\n    }\n  };\n\n  /**\r\n   * Gets status display text\r\n   */\n  const getStatusText = status => {\n    const statusMap = {\n      'open': 'Open',\n      'in-progress': 'In Progress',\n      'awaiting-user': 'Awaiting User',\n      'resolved': 'Resolved',\n      'closed': 'Closed'\n    };\n    return statusMap[status] || status;\n  };\n\n  /**\r\n   * Gets urgency display text\r\n   */\n  const getUrgencyText = urgency => {\n    const urgencyMap = {\n      'low': 'Low',\n      'medium': 'Medium',\n      'high': 'High',\n      'critical': 'Critical'\n    };\n    return urgencyMap[urgency] || urgency;\n  };\n\n  /**\r\n   * Handles retry action\r\n   */\n  const handleRetry = () => {\n    setError(null);\n    fetchTicketData();\n  };\n\n  // Loading state\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(Navbar, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 303,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"loading-container\",\n        children: /*#__PURE__*/_jsxDEV(LoadingSpinner, {\n          message: \"Loading ticket details...\",\n          fullPage: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 305,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 304,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true);\n  }\n\n  // Error state\n  if (error && !ticket) {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(Navbar, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 318,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"error-container\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"error-content\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"Unable to Load Ticket\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 321,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"error-message\",\n            children: error.message\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 322,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"error-actions\",\n            children: [error.retryable && /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: handleRetry,\n              className: \"btn btn-primary\",\n              children: \"Try Again\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 325,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => navigate('/tickets'),\n              className: \"btn btn-secondary\",\n              children: \"Back to Tickets\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 329,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 323,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 320,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 319,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true);\n  }\n\n  // No ticket found\n  if (!ticket) {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(Navbar, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 343,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"not-found\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"not-found-content\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"Ticket Not Found\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 346,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"The ticket you're looking for doesn't exist or has been deleted.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 347,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => navigate('/tickets'),\n            className: \"btn btn-primary\",\n            children: \"View All Tickets\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 348,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 345,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 344,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true);\n  }\n  return /*#__PURE__*/_jsxDEV(ErrorBoundary, {\n    children: /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(Navbar, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 360,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"ticket-detail-page\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"ticket-header\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"ticket-meta\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"ticket-id\",\n              children: [\"Ticket #\", ticket.ticketNumber || ((_ticket$_id = ticket._id) === null || _ticket$_id === void 0 ? void 0 : _ticket$_id.substring(0, 8).toUpperCase())]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 365,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: `status-badge status-${ticket.status}`,\n              children: getStatusText(ticket.status)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 368,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: `urgency-badge urgency-${ticket.urgency}`,\n              children: getUrgencyText(ticket.urgency)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 371,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 364,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"ticket-actions\",\n            children: [((user === null || user === void 0 ? void 0 : user.role) === 'technician' || (user === null || user === void 0 ? void 0 : user.role) === 'admin') && /*#__PURE__*/_jsxDEV(\"select\", {\n              className: \"status-select\",\n              value: ticket.status,\n              onChange: e => handleStatusUpdate(e.target.value),\n              disabled: updatingStatus,\n              \"aria-label\": \"Update ticket status\",\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"open\",\n                children: \"Open\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 385,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"in-progress\",\n                children: \"In Progress\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 386,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"awaiting-user\",\n                children: \"Awaiting User\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 387,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"resolved\",\n                children: \"Resolved\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 388,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"closed\",\n                children: \"Closed\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 389,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 378,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => navigate('/tickets'),\n              className: \"btn btn-secondary\",\n              children: \"Back to List\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 393,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 376,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 363,\n          columnNumber: 11\n        }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `alert alert-${error.type}`,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"alert-content\",\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Error:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 403,\n              columnNumber: 17\n            }, this), \" \", error.message]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 402,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"alert-actions\",\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => setError(null),\n              className: \"btn btn-sm btn-text\",\n              children: \"Dismiss\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 406,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 405,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 401,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"ticket-content\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"ticket-main\",\n            children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n              className: \"ticket-title\",\n              children: ticket.title\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 416,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"ticket-description\",\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                children: \"Description\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 419,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"description-content\",\n                children: ticket.description\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 420,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 418,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"ticket-info-grid\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"info-item\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"info-label\",\n                  children: \"Issue Type:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 427,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"info-value\",\n                  children: ((_ticket$issueType = ticket.issueType) === null || _ticket$issueType === void 0 ? void 0 : _ticket$issueType.charAt(0).toUpperCase()) + ((_ticket$issueType2 = ticket.issueType) === null || _ticket$issueType2 === void 0 ? void 0 : _ticket$issueType2.slice(1)) || 'Not specified'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 428,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 426,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"info-item\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"info-label\",\n                  children: \"Created:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 434,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"info-value\",\n                  children: formatDate(ticket.createdAt)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 435,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 433,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"info-item\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"info-label\",\n                  children: \"Last Updated:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 439,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"info-value\",\n                  children: formatDate(ticket.updatedAt)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 440,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 438,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"info-item\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"info-label\",\n                  children: \"Created By:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 444,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"info-value\",\n                  children: ((_ticket$createdBy = ticket.createdBy) === null || _ticket$createdBy === void 0 ? void 0 : _ticket$createdBy.name) || ((_ticket$createdBy2 = ticket.createdBy) === null || _ticket$createdBy2 === void 0 ? void 0 : _ticket$createdBy2.email) || 'Unknown'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 445,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 443,\n                columnNumber: 17\n              }, this), ticket.assignedTo && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"info-item\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"info-label\",\n                  children: \"Assigned To:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 452,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"info-value\",\n                  children: ((_ticket$assignedTo = ticket.assignedTo) === null || _ticket$assignedTo === void 0 ? void 0 : _ticket$assignedTo.name) || ((_ticket$assignedTo2 = ticket.assignedTo) === null || _ticket$assignedTo2 === void 0 ? void 0 : _ticket$assignedTo2.email) || 'Unassigned'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 453,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 451,\n                columnNumber: 19\n              }, this), ticket.category && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"info-item\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"info-label\",\n                  children: \"Category:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 461,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"info-value\",\n                  children: ticket.category\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 462,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 460,\n                columnNumber: 19\n              }, this), ticket.department && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"info-item\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"info-label\",\n                  children: \"Department:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 468,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"info-value\",\n                  children: ticket.department\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 469,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 467,\n                columnNumber: 19\n              }, this), ticket.location && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"info-item\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"info-label\",\n                  children: \"Location:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 475,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"info-value\",\n                  children: ticket.location\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 476,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 474,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 425,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 415,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"comments-section\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              children: \"Activity & Comments\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 484,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"comments-list\",\n              children: comments.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"no-comments\",\n                children: /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: \"No comments yet. Be the first to add one.\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 489,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 488,\n                columnNumber: 19\n              }, this) : comments.map((comment, index) => {\n                var _comment$author, _comment$author2;\n                return /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"comment-item\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"comment-header\",\n                    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"comment-author\",\n                      children: ((_comment$author = comment.author) === null || _comment$author === void 0 ? void 0 : _comment$author.name) || ((_comment$author2 = comment.author) === null || _comment$author2 === void 0 ? void 0 : _comment$author2.email) || 'Unknown'\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 495,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"comment-date\",\n                      children: formatDate(comment.createdAt)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 498,\n                      columnNumber: 25\n                    }, this), comment.isInternal && /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"internal-badge\",\n                      children: \"Internal Note\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 502,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 494,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"comment-content\",\n                    children: comment.content\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 505,\n                    columnNumber: 23\n                  }, this)]\n                }, comment._id || index, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 493,\n                  columnNumber: 21\n                }, this);\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 486,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"add-comment\",\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                children: \"Add Comment\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 515,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n                value: newComment,\n                onChange: e => setNewComment(e.target.value),\n                placeholder: \"Type your comment here...\",\n                rows: \"4\",\n                maxLength: \"2000\",\n                \"aria-label\": \"Add comment\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 516,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"comment-actions\",\n                children: [(user === null || user === void 0 ? void 0 : user.role) === 'technician' || (user === null || user === void 0 ? void 0 : user.role) === 'admin' ? /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"internal-note-option\",\n                  children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"checkbox\",\n                    id: \"internal-note\",\n                    \"aria-label\": \"Mark as internal note\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 527,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                    htmlFor: \"internal-note\",\n                    children: \"Internal note (visible to staff only)\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 532,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 526,\n                  columnNumber: 21\n                }, this) : null, /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: handleAddComment,\n                  disabled: !newComment.trim() || submittingComment,\n                  className: \"btn btn-primary\",\n                  children: submittingComment ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"comment-spinner\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 542,\n                      columnNumber: 25\n                    }, this), \"Posting...\"]\n                  }, void 0, true) : 'Post Comment'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 535,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 524,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 514,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 483,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 414,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 361,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 358,\n    columnNumber: 5\n  }, this);\n};\n_s(TicketDetail, \"00ZqU9+R7p67S8SI5j7u5ImFO6g=\", false, function () {\n  return [useParams, useNavigate, useAuth];\n});\n_c = TicketDetail;\nexport default TicketDetail;\nvar _c;\n$RefreshReg$(_c, \"TicketDetail\");","map":{"version":3,"names":["React","useState","useEffect","useParams","useNavigate","useAuth","Navbar","LoadingSpinner","ErrorBoundary","ticketService","jsxDEV","_jsxDEV","Fragment","_Fragment","TicketDetail","_s","_ticket$_id","_ticket$issueType","_ticket$issueType2","_ticket$createdBy","_ticket$createdBy2","_ticket$assignedTo","_ticket$assignedTo2","id","navigate","user","isAuthenticated","ticket","setTicket","loading","setLoading","error","setError","comments","setComments","newComment","setNewComment","submittingComment","setSubmittingComment","updatingStatus","setUpdatingStatus","isValidTicketId","ticketId","length","objectIdPattern","uuidPattern","test","console","fetchTicketData","response","getTicket","success","_response$data","ticketData","data","_id","getComments","commentsResponse","_commentsResponse$dat","commentsError","warn","message","Error","errorMessage","status","request","type","retryable","handleAddComment","trim","commentData","content","author","isInternal","role","createdAt","Date","toISOString","addComment","_commentsResponse$dat2","refreshError","prev","handleStatusUpdate","newStatus","updateTicket","updatedAt","formatDate","dateString","date","now","diffMs","diffHours","Math","floor","toLocaleString","year","month","day","hour","minute","getStatusText","statusMap","getUrgencyText","urgency","urgencyMap","handleRetry","children","fileName","_jsxFileName","lineNumber","columnNumber","className","fullPage","onClick","ticketNumber","substring","toUpperCase","value","onChange","e","target","disabled","title","description","issueType","charAt","slice","createdBy","name","email","assignedTo","category","department","location","map","comment","index","_comment$author","_comment$author2","placeholder","rows","maxLength","htmlFor","_c","$RefreshReg$"],"sources":["C:/Users/KADZ-TECH/Documents/dev/it-support-system/frontend/src/pages/TicketDetail.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport Navbar from '../components/Navbar';\r\nimport LoadingSpinner from '../components/LoadingSpinner';\r\nimport ErrorBoundary from '../components/ErrorBoundary';\r\nimport ticketService from '../services/ticketService';\r\nimport '../styles/TicketDetail.css';\r\n\r\n/**\r\n * TicketDetail Component\r\n * \r\n * Displays detailed information about a specific ticket including\r\n * comments, activities, and status updates.\r\n * \r\n * @version 3.0.0\r\n * @author IT Support Team\r\n */\r\nconst TicketDetail = () => {\r\n  const { id } = useParams();\r\n  const navigate = useNavigate();\r\n  const { user, isAuthenticated } = useAuth();\r\n  \r\n  const [ticket, setTicket] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [comments, setComments] = useState([]);\r\n  const [newComment, setNewComment] = useState('');\r\n  const [submittingComment, setSubmittingComment] = useState(false);\r\n  const [updatingStatus, setUpdatingStatus] = useState(false);\r\n\r\n  // Validate ticket ID before fetching\r\n  const isValidTicketId = (ticketId) => {\r\n    if (!ticketId || \r\n        ticketId === 'create' || \r\n        ticketId === 'undefined' || \r\n        ticketId === 'null' ||\r\n        ticketId.length < 10) {\r\n      return false;\r\n    }\r\n    \r\n    // Check if it looks like a valid MongoDB ObjectId or UUID\r\n    const objectIdPattern = /^[0-9a-fA-F]{24}$/;\r\n    const uuidPattern = /^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i;\r\n    \r\n    return objectIdPattern.test(ticketId) || uuidPattern.test(ticketId);\r\n  };\r\n\r\n  useEffect(() => {\r\n    // Check authentication first\r\n    if (!isAuthenticated) {\r\n      navigate('/login');\r\n      return;\r\n    }\r\n\r\n    // Validate ticket ID\r\n    if (!isValidTicketId(id)) {\r\n      console.error('Invalid ticket ID:', id);\r\n      setError('Invalid ticket ID or ticket not found');\r\n      setLoading(false);\r\n      navigate('/tickets');\r\n      return;\r\n    }\r\n\r\n    // Fetch ticket data\r\n    fetchTicketData();\r\n  }, [id, isAuthenticated, navigate]);\r\n\r\n  /**\r\n   * Fetches ticket data with error handling\r\n   */\r\n  const fetchTicketData = async () => {\r\n    try {\r\n      setLoading(true);\r\n      setError(null);\r\n      \r\n      // Fetch ticket details\r\n      const response = await ticketService.getTicket(id);\r\n      \r\n      if (response && response.success) {\r\n        // Extract ticket from response\r\n        const ticketData = response.data?.ticket || response.data || response.ticket || response;\r\n        \r\n        if (ticketData && (ticketData._id || ticketData.id)) {\r\n          setTicket(ticketData);\r\n          \r\n          // Only fetch comments if the endpoint exists\r\n          if (ticketService.getComments && typeof ticketService.getComments === 'function') {\r\n            try {\r\n              const commentsResponse = await ticketService.getComments(id);\r\n              if (commentsResponse && commentsResponse.success) {\r\n                setComments(commentsResponse.data?.comments || \r\n                           commentsResponse.comments || \r\n                           commentsResponse.data || \r\n                           []);\r\n              }\r\n            } catch (commentsError) {\r\n              console.warn('Comments endpoint not available:', commentsError.message);\r\n              // This is not critical, so we don't set an error\r\n            }\r\n          }\r\n        } else {\r\n          throw new Error('Invalid ticket data structure received');\r\n        }\r\n      } else {\r\n        throw new Error(response?.message || 'Failed to load ticket details');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching ticket data:', error);\r\n      \r\n      // Handle specific error cases\r\n      let errorMessage = 'Unable to load ticket. Please try again.';\r\n      \r\n      if (error.response) {\r\n        switch (error.response.status) {\r\n          case 404:\r\n            errorMessage = 'Ticket not found. It may have been deleted.';\r\n            break;\r\n          case 401:\r\n            errorMessage = 'Session expired. Please log in again.';\r\n            navigate('/login');\r\n            break;\r\n          case 403:\r\n            errorMessage = 'You do not have permission to view this ticket.';\r\n            break;\r\n        }\r\n      } else if (error.request) {\r\n        errorMessage = 'Unable to connect to server. Please check your connection.';\r\n      }\r\n      \r\n      setError({\r\n        message: errorMessage,\r\n        type: 'fetch',\r\n        retryable: true\r\n      });\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Handles adding a new comment\r\n   */\r\n  const handleAddComment = async () => {\r\n    if (!newComment.trim() || !ticket) return;\r\n    \r\n    try {\r\n      setSubmittingComment(true);\r\n      \r\n      const commentData = {\r\n        content: newComment.trim(),\r\n        author: user?.id || user?._id,\r\n        isInternal: user?.role === 'technician' || user?.role === 'admin',\r\n        createdAt: new Date().toISOString()\r\n      };\r\n      \r\n      // Check if addComment method exists\r\n      if (ticketService.addComment && typeof ticketService.addComment === 'function') {\r\n        await ticketService.addComment(ticket._id, commentData);\r\n        \r\n        // Refresh comments\r\n        if (ticketService.getComments) {\r\n          try {\r\n            const commentsResponse = await ticketService.getComments(ticket._id);\r\n            if (commentsResponse && commentsResponse.success) {\r\n              setComments(commentsResponse.data?.comments || \r\n                         commentsResponse.comments || \r\n                         commentsResponse.data || \r\n                         []);\r\n            }\r\n          } catch (refreshError) {\r\n            console.warn('Could not refresh comments:', refreshError);\r\n          }\r\n        }\r\n        \r\n        // Add comment locally if refresh fails\r\n        setComments(prev => [commentData, ...prev]);\r\n        setNewComment('');\r\n      } else {\r\n        // Fallback: add comment locally\r\n        setComments(prev => [commentData, ...prev]);\r\n        setNewComment('');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error adding comment:', error);\r\n      setError({\r\n        message: 'Failed to add comment. Please try again.',\r\n        type: 'comment',\r\n        retryable: false\r\n      });\r\n    } finally {\r\n      setSubmittingComment(false);\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Handles status update\r\n   */\r\n  const handleStatusUpdate = async (newStatus) => {\r\n    if (!ticket || updatingStatus) return;\r\n    \r\n    try {\r\n      setUpdatingStatus(true);\r\n      \r\n      if (ticketService.updateTicket && typeof ticketService.updateTicket === 'function') {\r\n        await ticketService.updateTicket(ticket._id, { status: newStatus });\r\n        \r\n        // Update local state\r\n        setTicket(prev => ({\r\n          ...prev,\r\n          status: newStatus,\r\n          updatedAt: new Date().toISOString()\r\n        }));\r\n      } else {\r\n        // Fallback: update local state only\r\n        setTicket(prev => ({\r\n          ...prev,\r\n          status: newStatus,\r\n          updatedAt: new Date().toISOString()\r\n        }));\r\n      }\r\n    } catch (error) {\r\n      console.error('Error updating ticket status:', error);\r\n      setError({\r\n        message: 'Failed to update ticket status.',\r\n        type: 'status',\r\n        retryable: false\r\n      });\r\n    } finally {\r\n      setUpdatingStatus(false);\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Formats date for display\r\n   */\r\n  const formatDate = (dateString) => {\r\n    if (!dateString) return 'N/A';\r\n    \r\n    try {\r\n      const date = new Date(dateString);\r\n      const now = new Date();\r\n      const diffMs = now - date;\r\n      const diffHours = diffMs / (1000 * 60 * 60);\r\n      \r\n      if (diffHours < 1) {\r\n        return 'Just now';\r\n      } else if (diffHours < 24) {\r\n        return `${Math.floor(diffHours)}h ago`;\r\n      } else {\r\n        return date.toLocaleString('en-US', {\r\n          year: 'numeric',\r\n          month: 'short',\r\n          day: 'numeric',\r\n          hour: '2-digit',\r\n          minute: '2-digit'\r\n        });\r\n      }\r\n    } catch (error) {\r\n      return 'Invalid date';\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Gets status display text\r\n   */\r\n  const getStatusText = (status) => {\r\n    const statusMap = {\r\n      'open': 'Open',\r\n      'in-progress': 'In Progress',\r\n      'awaiting-user': 'Awaiting User',\r\n      'resolved': 'Resolved',\r\n      'closed': 'Closed'\r\n    };\r\n    return statusMap[status] || status;\r\n  };\r\n\r\n  /**\r\n   * Gets urgency display text\r\n   */\r\n  const getUrgencyText = (urgency) => {\r\n    const urgencyMap = {\r\n      'low': 'Low',\r\n      'medium': 'Medium',\r\n      'high': 'High',\r\n      'critical': 'Critical'\r\n    };\r\n    return urgencyMap[urgency] || urgency;\r\n  };\r\n\r\n  /**\r\n   * Handles retry action\r\n   */\r\n  const handleRetry = () => {\r\n    setError(null);\r\n    fetchTicketData();\r\n  };\r\n\r\n  // Loading state\r\n  if (loading) {\r\n    return (\r\n      <>\r\n        <Navbar />\r\n        <div className=\"loading-container\">\r\n          <LoadingSpinner \r\n            message=\"Loading ticket details...\" \r\n            fullPage={true}\r\n          />\r\n        </div>\r\n      </>\r\n    );\r\n  }\r\n\r\n  // Error state\r\n  if (error && !ticket) {\r\n    return (\r\n      <>\r\n        <Navbar />\r\n        <div className=\"error-container\">\r\n          <div className=\"error-content\">\r\n            <h2>Unable to Load Ticket</h2>\r\n            <p className=\"error-message\">{error.message}</p>\r\n            <div className=\"error-actions\">\r\n              {error.retryable && (\r\n                <button onClick={handleRetry} className=\"btn btn-primary\">\r\n                  Try Again\r\n                </button>\r\n              )}\r\n              <button onClick={() => navigate('/tickets')} className=\"btn btn-secondary\">\r\n                Back to Tickets\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </>\r\n    );\r\n  }\r\n\r\n  // No ticket found\r\n  if (!ticket) {\r\n    return (\r\n      <>\r\n        <Navbar />\r\n        <div className=\"not-found\">\r\n          <div className=\"not-found-content\">\r\n            <h2>Ticket Not Found</h2>\r\n            <p>The ticket you're looking for doesn't exist or has been deleted.</p>\r\n            <button onClick={() => navigate('/tickets')} className=\"btn btn-primary\">\r\n              View All Tickets\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <ErrorBoundary>\r\n      <>\r\n        <Navbar />\r\n        <div className=\"ticket-detail-page\">\r\n          {/* Header with ticket info */}\r\n          <div className=\"ticket-header\">\r\n            <div className=\"ticket-meta\">\r\n              <span className=\"ticket-id\">\r\n                Ticket #{ticket.ticketNumber || ticket._id?.substring(0, 8).toUpperCase()}\r\n              </span>\r\n              <span className={`status-badge status-${ticket.status}`}>\r\n                {getStatusText(ticket.status)}\r\n              </span>\r\n              <span className={`urgency-badge urgency-${ticket.urgency}`}>\r\n                {getUrgencyText(ticket.urgency)}\r\n              </span>\r\n            </div>\r\n            \r\n            <div className=\"ticket-actions\">\r\n              {(user?.role === 'technician' || user?.role === 'admin') && (\r\n                <select \r\n                  className=\"status-select\"\r\n                  value={ticket.status}\r\n                  onChange={(e) => handleStatusUpdate(e.target.value)}\r\n                  disabled={updatingStatus}\r\n                  aria-label=\"Update ticket status\"\r\n                >\r\n                  <option value=\"open\">Open</option>\r\n                  <option value=\"in-progress\">In Progress</option>\r\n                  <option value=\"awaiting-user\">Awaiting User</option>\r\n                  <option value=\"resolved\">Resolved</option>\r\n                  <option value=\"closed\">Closed</option>\r\n                </select>\r\n              )}\r\n              \r\n              <button onClick={() => navigate('/tickets')} className=\"btn btn-secondary\">\r\n                Back to List\r\n              </button>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Error Display */}\r\n          {error && (\r\n            <div className={`alert alert-${error.type}`}>\r\n              <div className=\"alert-content\">\r\n                <strong>Error:</strong> {error.message}\r\n              </div>\r\n              <div className=\"alert-actions\">\r\n                <button onClick={() => setError(null)} className=\"btn btn-sm btn-text\">\r\n                  Dismiss\r\n                </button>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Main content */}\r\n          <div className=\"ticket-content\">\r\n            <div className=\"ticket-main\">\r\n              <h1 className=\"ticket-title\">{ticket.title}</h1>\r\n              \r\n              <div className=\"ticket-description\">\r\n                <h3>Description</h3>\r\n                <div className=\"description-content\">\r\n                  {ticket.description}\r\n                </div>\r\n              </div>\r\n              \r\n              <div className=\"ticket-info-grid\">\r\n                <div className=\"info-item\">\r\n                  <span className=\"info-label\">Issue Type:</span>\r\n                  <span className=\"info-value\">\r\n                    {ticket.issueType?.charAt(0).toUpperCase() + ticket.issueType?.slice(1) || 'Not specified'}\r\n                  </span>\r\n                </div>\r\n                \r\n                <div className=\"info-item\">\r\n                  <span className=\"info-label\">Created:</span>\r\n                  <span className=\"info-value\">{formatDate(ticket.createdAt)}</span>\r\n                </div>\r\n                \r\n                <div className=\"info-item\">\r\n                  <span className=\"info-label\">Last Updated:</span>\r\n                  <span className=\"info-value\">{formatDate(ticket.updatedAt)}</span>\r\n                </div>\r\n                \r\n                <div className=\"info-item\">\r\n                  <span className=\"info-label\">Created By:</span>\r\n                  <span className=\"info-value\">\r\n                    {ticket.createdBy?.name || ticket.createdBy?.email || 'Unknown'}\r\n                  </span>\r\n                </div>\r\n                \r\n                {ticket.assignedTo && (\r\n                  <div className=\"info-item\">\r\n                    <span className=\"info-label\">Assigned To:</span>\r\n                    <span className=\"info-value\">\r\n                      {ticket.assignedTo?.name || ticket.assignedTo?.email || 'Unassigned'}\r\n                    </span>\r\n                  </div>\r\n                )}\r\n                \r\n                {ticket.category && (\r\n                  <div className=\"info-item\">\r\n                    <span className=\"info-label\">Category:</span>\r\n                    <span className=\"info-value\">{ticket.category}</span>\r\n                  </div>\r\n                )}\r\n                \r\n                {ticket.department && (\r\n                  <div className=\"info-item\">\r\n                    <span className=\"info-label\">Department:</span>\r\n                    <span className=\"info-value\">{ticket.department}</span>\r\n                  </div>\r\n                )}\r\n                \r\n                {ticket.location && (\r\n                  <div className=\"info-item\">\r\n                    <span className=\"info-label\">Location:</span>\r\n                    <span className=\"info-value\">{ticket.location}</span>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n            \r\n            {/* Comments section */}\r\n            <div className=\"comments-section\">\r\n              <h3>Activity & Comments</h3>\r\n              \r\n              <div className=\"comments-list\">\r\n                {comments.length === 0 ? (\r\n                  <div className=\"no-comments\">\r\n                    <p>No comments yet. Be the first to add one.</p>\r\n                  </div>\r\n                ) : (\r\n                  comments.map((comment, index) => (\r\n                    <div key={comment._id || index} className=\"comment-item\">\r\n                      <div className=\"comment-header\">\r\n                        <span className=\"comment-author\">\r\n                          {comment.author?.name || comment.author?.email || 'Unknown'}\r\n                        </span>\r\n                        <span className=\"comment-date\">\r\n                          {formatDate(comment.createdAt)}\r\n                        </span>\r\n                        {comment.isInternal && (\r\n                          <span className=\"internal-badge\">Internal Note</span>\r\n                        )}\r\n                      </div>\r\n                      <div className=\"comment-content\">\r\n                        {comment.content}\r\n                      </div>\r\n                    </div>\r\n                  ))\r\n                )}\r\n              </div>\r\n              \r\n              {/* Add comment form */}\r\n              <div className=\"add-comment\">\r\n                <h4>Add Comment</h4>\r\n                <textarea\r\n                  value={newComment}\r\n                  onChange={(e) => setNewComment(e.target.value)}\r\n                  placeholder=\"Type your comment here...\"\r\n                  rows=\"4\"\r\n                  maxLength=\"2000\"\r\n                  aria-label=\"Add comment\"\r\n                />\r\n                <div className=\"comment-actions\">\r\n                  {user?.role === 'technician' || user?.role === 'admin' ? (\r\n                    <div className=\"internal-note-option\">\r\n                      <input \r\n                        type=\"checkbox\" \r\n                        id=\"internal-note\"\r\n                        aria-label=\"Mark as internal note\"\r\n                      />\r\n                      <label htmlFor=\"internal-note\">Internal note (visible to staff only)</label>\r\n                    </div>\r\n                  ) : null}\r\n                  <button\r\n                    onClick={handleAddComment}\r\n                    disabled={!newComment.trim() || submittingComment}\r\n                    className=\"btn btn-primary\"\r\n                  >\r\n                    {submittingComment ? (\r\n                      <>\r\n                        <span className=\"comment-spinner\"></span>\r\n                        Posting...\r\n                      </>\r\n                    ) : (\r\n                      'Post Comment'\r\n                    )}\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </>\r\n    </ErrorBoundary>\r\n  );\r\n};\r\n\r\nexport default TicketDetail;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}