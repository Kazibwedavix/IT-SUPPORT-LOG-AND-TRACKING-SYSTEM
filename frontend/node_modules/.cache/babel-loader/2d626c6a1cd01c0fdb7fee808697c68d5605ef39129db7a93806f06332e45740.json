{"ast":null,"code":"// src/services/api.js\n// Production-ready API service with comprehensive error handling\n\nimport axios from 'axios';\n\n// Custom error classes\nexport class APIError extends Error {\n  constructor(message, status, data = null) {\n    super(message);\n    this.name = 'APIError';\n    this.status = status;\n    this.data = data;\n  }\n}\nexport class NetworkError extends Error {\n  constructor(message) {\n    super(message);\n    this.name = 'NetworkError';\n    this.code = 'NETWORK_ERROR';\n  }\n}\nexport class AuthError extends Error {\n  constructor(message) {\n    super(message);\n    this.name = 'AuthError';\n    this.status = 401;\n  }\n}\n\n// Request queue for handling concurrent requests\nconst requestQueue = new Map();\n\n// Main API Service class\nclass APIService {\n  constructor() {\n    const API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:5002/api';\n    this.axios = axios.create({\n      baseURL: API_BASE_URL,\n      timeout: 30000,\n      // 30 seconds\n      timeoutErrorMessage: 'Request timeout. Please try again.',\n      headers: {\n        'Content-Type': 'application/json',\n        'Accept': 'application/json'\n      },\n      withCredentials: true // Include cookies if needed\n    });\n    this.retryConfig = {\n      maxRetries: 3,\n      retryDelay: 1000,\n      // 1 second\n      retryStatusCodes: [408, 429, 500, 502, 503, 504]\n    };\n    this.setupInterceptors();\n    this.initializeAuth();\n  }\n  initializeAuth() {\n    const token = this.getAuthToken();\n    if (token) {\n      this.setAuthToken(token);\n    }\n  }\n  setupInterceptors() {\n    // Request interceptor\n    this.axios.interceptors.request.use(config => {\n      // Generate request ID for tracking\n      const requestId = `${config.method}-${config.url}-${Date.now()}`;\n      config.requestId = requestId;\n\n      // Cancel duplicate pending requests\n      if (requestQueue.has(requestId)) {\n        requestQueue.get(requestId).cancel('Duplicate request cancelled');\n      }\n\n      // Create cancel token for this request\n      const source = axios.CancelToken.source();\n      config.cancelToken = source.token;\n      requestQueue.set(requestId, source);\n\n      // Add timestamp for performance monitoring\n      config.metadata = {\n        startTime: Date.now(),\n        requestId\n      };\n\n      // Add auth token if available\n      const token = this.getAuthToken();\n      if (token) {\n        config.headers.Authorization = `Bearer ${token}`;\n      }\n\n      // Add cache-busting for GET requests in development\n      if (process.env.NODE_ENV === 'development' && config.method === 'get') {\n        config.params = {\n          ...config.params,\n          _t: Date.now()\n        };\n      }\n\n      // Log request in development\n      if (process.env.NODE_ENV === 'development') {\n        var _config$method;\n        console.groupCollapsed(`üì§ API Request: ${(_config$method = config.method) === null || _config$method === void 0 ? void 0 : _config$method.toUpperCase()} ${config.url}`);\n        console.log('Headers:', config.headers);\n        console.log('Data:', config.data || 'No data');\n        console.log('Params:', config.params || 'No params');\n        console.groupEnd();\n      }\n      return config;\n    }, error => {\n      console.error('‚ùå Request interceptor error:', error);\n      return Promise.reject(new NetworkError('Request configuration failed'));\n    });\n\n    // Response interceptor\n    this.axios.interceptors.response.use(response => {\n      const {\n        config\n      } = response;\n      const {\n        requestId,\n        metadata\n      } = config;\n\n      // Clean up request queue\n      if (requestId && requestQueue.has(requestId)) {\n        requestQueue.delete(requestId);\n      }\n\n      // Calculate request duration\n      const duration = metadata ? Date.now() - metadata.startTime : 0;\n\n      // Log response in development\n      if (process.env.NODE_ENV === 'development') {\n        var _config$method2;\n        console.groupCollapsed(`üì• API Response: ${(_config$method2 = config.method) === null || _config$method2 === void 0 ? void 0 : _config$method2.toUpperCase()} ${config.url} - ${duration}ms`);\n        console.log('Status:', response.status);\n        console.log('Data:', response.data);\n        console.log('Headers:', response.headers);\n        console.groupEnd();\n      }\n\n      // Return standardized response format\n      return {\n        success: true,\n        data: response.data,\n        status: response.status,\n        headers: response.headers,\n        duration,\n        requestId\n      };\n    }, async error => {\n      var _error$response;\n      const {\n        config\n      } = error;\n\n      // Clean up request queue\n      if (config !== null && config !== void 0 && config.requestId && requestQueue.has(config.requestId)) {\n        requestQueue.delete(config.requestId);\n      }\n\n      // Handle request cancellation\n      if (axios.isCancel(error)) {\n        console.log('‚ö†Ô∏è Request cancelled:', error.message);\n        return Promise.reject(new NetworkError('Request was cancelled'));\n      }\n\n      // Calculate request duration\n      const duration = config !== null && config !== void 0 && config.metadata ? Date.now() - config.metadata.startTime : 0;\n\n      // Log error\n      console.error('‚ùå API Error:', {\n        url: config === null || config === void 0 ? void 0 : config.url,\n        method: config === null || config === void 0 ? void 0 : config.method,\n        status: (_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.status,\n        message: error.message,\n        duration\n      });\n\n      // Handle network errors\n      if (!error.response) {\n        if (error.code === 'ECONNABORTED') {\n          return Promise.reject(new NetworkError('Request timeout. Please check your connection and try again.'));\n        }\n        return Promise.reject(new NetworkError('Network error. Please check your internet connection.'));\n      }\n      const {\n        status,\n        data\n      } = error.response;\n\n      // Handle automatic retry for certain status codes\n      const currentRetryCount = (config === null || config === void 0 ? void 0 : config.retryCount) || 0;\n      if (this.retryConfig.retryStatusCodes.includes(status) && currentRetryCount < this.retryConfig.maxRetries) {\n        // Create new config with updated retry count\n        const newConfig = {\n          ...config,\n          retryCount: currentRetryCount + 1\n        };\n\n        // Wait before retrying\n        await new Promise(resolve => setTimeout(resolve, this.retryConfig.retryDelay * newConfig.retryCount));\n        console.log(`üîÑ Retrying request (${newConfig.retryCount}/${this.retryConfig.maxRetries}): ${config.url}`);\n        return this.axios(newConfig);\n      }\n\n      // Standard error handling\n      let errorMessage = 'An unexpected error occurred';\n      let errorData = data;\n      switch (status) {\n        case 400:\n          errorMessage = (data === null || data === void 0 ? void 0 : data.message) || 'Bad request';\n          break;\n        case 401:\n          errorMessage = (data === null || data === void 0 ? void 0 : data.message) || 'Authentication required';\n          this.handleUnauthorized();\n          return Promise.reject(new AuthError(errorMessage));\n        case 403:\n          errorMessage = (data === null || data === void 0 ? void 0 : data.message) || 'Access forbidden';\n          break;\n        case 404:\n          errorMessage = (data === null || data === void 0 ? void 0 : data.message) || 'Resource not found';\n          break;\n        case 409:\n          errorMessage = (data === null || data === void 0 ? void 0 : data.message) || 'Conflict occurred';\n          break;\n        case 422:\n          errorMessage = (data === null || data === void 0 ? void 0 : data.message) || 'Validation failed';\n          // Format validation errors for easier consumption\n          if (data !== null && data !== void 0 && data.errors) {\n            errorData = {\n              ...data,\n              validationErrors: data.errors\n            };\n          }\n          break;\n        case 429:\n          errorMessage = (data === null || data === void 0 ? void 0 : data.message) || 'Too many requests. Please try again later.';\n          const retryAfter = error.response.headers['retry-after'];\n          if (retryAfter) {\n            errorData = {\n              ...data,\n              retryAfter: parseInt(retryAfter, 10)\n            };\n          }\n          break;\n        case 500:\n          errorMessage = 'Internal server error. Please try again later.';\n          break;\n        case 502:\n        case 503:\n        case 504:\n          errorMessage = 'Service temporarily unavailable. Please try again later.';\n          break;\n      }\n      return Promise.reject(new APIError(errorMessage, status, errorData));\n    });\n  }\n\n  /**\r\n   * Handle unauthorized access\r\n   */\n  handleUnauthorized() {\n    // Clear all auth data\n    this.clearAuthToken();\n\n    // Clear all storage\n    localStorage.clear();\n    sessionStorage.clear();\n\n    // Only redirect if not already on auth pages\n    const currentPath = window.location.pathname;\n    const authPages = ['/login', '/register', '/forgot-password', '/reset-password'];\n    if (!authPages.some(page => currentPath.includes(page))) {\n      // Store current location for redirect back after login\n      sessionStorage.setItem('redirectAfterLogin', window.location.pathname + window.location.search);\n\n      // Use setTimeout to avoid React state updates during render\n      setTimeout(() => {\n        window.location.href = `/login?session=expired&redirect=${encodeURIComponent(window.location.pathname)}`;\n      }, 100);\n    }\n  }\n\n  /**\r\n   * Generic request method with retry logic\r\n   */\n  async request(config) {\n    try {\n      return await this.axios(config);\n    } catch (error) {\n      // Re-throw errors for upstream handling\n      throw error;\n    }\n  }\n\n  /**\r\n   * GET request\r\n   */\n  async get(url, config = {}) {\n    return this.request({\n      method: 'get',\n      url,\n      ...config\n    });\n  }\n\n  /**\r\n   * POST request\r\n   */\n  async post(url, data = {}, config = {}) {\n    return this.request({\n      method: 'post',\n      url,\n      data,\n      ...config\n    });\n  }\n\n  /**\r\n   * PUT request\r\n   */\n  async put(url, data = {}, config = {}) {\n    return this.request({\n      method: 'put',\n      url,\n      data,\n      ...config\n    });\n  }\n\n  /**\r\n   * PATCH request\r\n   */\n  async patch(url, data = {}, config = {}) {\n    return this.request({\n      method: 'patch',\n      url,\n      data,\n      ...config\n    });\n  }\n\n  /**\r\n   * DELETE request\r\n   */\n  async delete(url, config = {}) {\n    return this.request({\n      method: 'delete',\n      url,\n      ...config\n    });\n  }\n\n  /**\r\n   * Upload file with progress tracking\r\n   */\n  async upload(url, file, onProgress = null, config = {}) {\n    const formData = new FormData();\n    formData.append('file', file);\n    return this.request({\n      method: 'post',\n      url,\n      data: formData,\n      headers: {\n        'Content-Type': 'multipart/form-data'\n      },\n      onUploadProgress: onProgress,\n      ...config\n    });\n  }\n\n  /**\r\n   * Cancel all pending requests\r\n   */\n  cancelAllRequests(message = 'All requests cancelled') {\n    requestQueue.forEach((source, requestId) => {\n      source.cancel(message);\n      requestQueue.delete(requestId);\n    });\n    console.log(`üõë Cancelled ${requestQueue.size} pending requests`);\n  }\n\n  /**\r\n   * Cancel specific request by ID\r\n   */\n  cancelRequest(requestId, message = 'Request cancelled') {\n    if (requestQueue.has(requestId)) {\n      requestQueue.get(requestId).cancel(message);\n      requestQueue.delete(requestId);\n      console.log(`üõë Cancelled request: ${requestId}`);\n    }\n  }\n\n  /**\r\n   * Set authentication token\r\n   */\n  setAuthToken(token) {\n    if (token) {\n      this.axios.defaults.headers.common['Authorization'] = `Bearer ${token}`;\n      localStorage.setItem('token', token);\n      // Also store in session storage for redundancy\n      sessionStorage.setItem('token', token);\n    } else {\n      this.clearAuthToken();\n    }\n  }\n\n  /**\r\n   * Clear authentication token\r\n   */\n  clearAuthToken() {\n    delete this.axios.defaults.headers.common['Authorization'];\n    localStorage.removeItem('token');\n    localStorage.removeItem('session');\n    sessionStorage.removeItem('token');\n    sessionStorage.removeItem('session');\n  }\n\n  /**\r\n   * Get authentication token\r\n   */\n  getAuthToken() {\n    return localStorage.getItem('token') || sessionStorage.getItem('token');\n  }\n\n  /**\r\n   * Check if user is authenticated\r\n   */\n  isAuthenticated() {\n    return !!this.getAuthToken();\n  }\n\n  /**\r\n   * Set base URL\r\n   */\n  setBaseURL(baseURL) {\n    this.axios.defaults.baseURL = baseURL;\n    console.log(`üåç API base URL set to: ${baseURL}`);\n  }\n\n  /**\r\n   * Get base URL\r\n   */\n  getBaseURL() {\n    return this.axios.defaults.baseURL;\n  }\n\n  /**\r\n   * Health check\r\n   */\n  async healthCheck() {\n    try {\n      const response = await this.get('/health', {\n        timeout: 5000\n      });\n      return {\n        healthy: true,\n        timestamp: new Date().toISOString(),\n        response: response.data\n      };\n    } catch (error) {\n      return {\n        healthy: false,\n        timestamp: new Date().toISOString(),\n        error: error.message\n      };\n    }\n  }\n\n  /**\r\n   * Test connection\r\n   */\n  async testConnection() {\n    try {\n      const startTime = Date.now();\n      await this.get('/', {\n        timeout: 10000\n      });\n      const duration = Date.now() - startTime;\n      return {\n        connected: true,\n        duration,\n        baseURL: this.getBaseURL()\n      };\n    } catch (error) {\n      return {\n        connected: false,\n        error: error.message,\n        baseURL: this.getBaseURL()\n      };\n    }\n  }\n}\n\n// Create singleton instance\nconst apiService = new APIService();\n\n// Export for use in components - Remove duplicate exports\nexport { apiService };\n\n// Default export\nexport default apiService;","map":{"version":3,"names":["axios","APIError","Error","constructor","message","status","data","name","NetworkError","code","AuthError","requestQueue","Map","APIService","API_BASE_URL","process","env","REACT_APP_API_URL","create","baseURL","timeout","timeoutErrorMessage","headers","withCredentials","retryConfig","maxRetries","retryDelay","retryStatusCodes","setupInterceptors","initializeAuth","token","getAuthToken","setAuthToken","interceptors","request","use","config","requestId","method","url","Date","now","has","get","cancel","source","CancelToken","cancelToken","set","metadata","startTime","Authorization","NODE_ENV","params","_t","_config$method","console","groupCollapsed","toUpperCase","log","groupEnd","error","Promise","reject","response","delete","duration","_config$method2","success","_error$response","isCancel","currentRetryCount","retryCount","includes","newConfig","resolve","setTimeout","errorMessage","errorData","handleUnauthorized","errors","validationErrors","retryAfter","parseInt","clearAuthToken","localStorage","clear","sessionStorage","currentPath","window","location","pathname","authPages","some","page","setItem","search","href","encodeURIComponent","post","put","patch","upload","file","onProgress","formData","FormData","append","onUploadProgress","cancelAllRequests","forEach","size","cancelRequest","defaults","common","removeItem","getItem","isAuthenticated","setBaseURL","getBaseURL","healthCheck","healthy","timestamp","toISOString","testConnection","connected","apiService"],"sources":["C:/Users/KADZ-TECH/Documents/dev/it-support-system/frontend/src/services/api.js"],"sourcesContent":["// src/services/api.js\r\n// Production-ready API service with comprehensive error handling\r\n\r\nimport axios from 'axios';\r\n\r\n// Custom error classes\r\nexport class APIError extends Error {\r\n  constructor(message, status, data = null) {\r\n    super(message);\r\n    this.name = 'APIError';\r\n    this.status = status;\r\n    this.data = data;\r\n  }\r\n}\r\n\r\nexport class NetworkError extends Error {\r\n  constructor(message) {\r\n    super(message);\r\n    this.name = 'NetworkError';\r\n    this.code = 'NETWORK_ERROR';\r\n  }\r\n}\r\n\r\nexport class AuthError extends Error {\r\n  constructor(message) {\r\n    super(message);\r\n    this.name = 'AuthError';\r\n    this.status = 401;\r\n  }\r\n}\r\n\r\n// Request queue for handling concurrent requests\r\nconst requestQueue = new Map();\r\n\r\n// Main API Service class\r\nclass APIService {\r\n  constructor() {\r\n    const API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:5002/api';\r\n    \r\n    this.axios = axios.create({\r\n      baseURL: API_BASE_URL,\r\n      timeout: 30000, // 30 seconds\r\n      timeoutErrorMessage: 'Request timeout. Please try again.',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Accept': 'application/json',\r\n      },\r\n      withCredentials: true, // Include cookies if needed\r\n    });\r\n\r\n    this.retryConfig = {\r\n      maxRetries: 3,\r\n      retryDelay: 1000, // 1 second\r\n      retryStatusCodes: [408, 429, 500, 502, 503, 504]\r\n    };\r\n\r\n    this.setupInterceptors();\r\n    this.initializeAuth();\r\n  }\r\n\r\n  initializeAuth() {\r\n    const token = this.getAuthToken();\r\n    if (token) {\r\n      this.setAuthToken(token);\r\n    }\r\n  }\r\n\r\n  setupInterceptors() {\r\n    // Request interceptor\r\n    this.axios.interceptors.request.use(\r\n      (config) => {\r\n        // Generate request ID for tracking\r\n        const requestId = `${config.method}-${config.url}-${Date.now()}`;\r\n        config.requestId = requestId;\r\n        \r\n        // Cancel duplicate pending requests\r\n        if (requestQueue.has(requestId)) {\r\n          requestQueue.get(requestId).cancel('Duplicate request cancelled');\r\n        }\r\n        \r\n        // Create cancel token for this request\r\n        const source = axios.CancelToken.source();\r\n        config.cancelToken = source.token;\r\n        requestQueue.set(requestId, source);\r\n\r\n        // Add timestamp for performance monitoring\r\n        config.metadata = { \r\n          startTime: Date.now(),\r\n          requestId \r\n        };\r\n\r\n        // Add auth token if available\r\n        const token = this.getAuthToken();\r\n        if (token) {\r\n          config.headers.Authorization = `Bearer ${token}`;\r\n        }\r\n\r\n        // Add cache-busting for GET requests in development\r\n        if (process.env.NODE_ENV === 'development' && config.method === 'get') {\r\n          config.params = {\r\n            ...config.params,\r\n            _t: Date.now()\r\n          };\r\n        }\r\n\r\n        // Log request in development\r\n        if (process.env.NODE_ENV === 'development') {\r\n          console.groupCollapsed(`üì§ API Request: ${config.method?.toUpperCase()} ${config.url}`);\r\n          console.log('Headers:', config.headers);\r\n          console.log('Data:', config.data || 'No data');\r\n          console.log('Params:', config.params || 'No params');\r\n          console.groupEnd();\r\n        }\r\n\r\n        return config;\r\n      },\r\n      (error) => {\r\n        console.error('‚ùå Request interceptor error:', error);\r\n        return Promise.reject(new NetworkError('Request configuration failed'));\r\n      }\r\n    );\r\n\r\n    // Response interceptor\r\n    this.axios.interceptors.response.use(\r\n      (response) => {\r\n        const { config } = response;\r\n        const { requestId, metadata } = config;\r\n        \r\n        // Clean up request queue\r\n        if (requestId && requestQueue.has(requestId)) {\r\n          requestQueue.delete(requestId);\r\n        }\r\n\r\n        // Calculate request duration\r\n        const duration = metadata ? Date.now() - metadata.startTime : 0;\r\n\r\n        // Log response in development\r\n        if (process.env.NODE_ENV === 'development') {\r\n          console.groupCollapsed(`üì• API Response: ${config.method?.toUpperCase()} ${config.url} - ${duration}ms`);\r\n          console.log('Status:', response.status);\r\n          console.log('Data:', response.data);\r\n          console.log('Headers:', response.headers);\r\n          console.groupEnd();\r\n        }\r\n\r\n        // Return standardized response format\r\n        return {\r\n          success: true,\r\n          data: response.data,\r\n          status: response.status,\r\n          headers: response.headers,\r\n          duration,\r\n          requestId\r\n        };\r\n      },\r\n      async (error) => {\r\n        const { config } = error;\r\n        \r\n        // Clean up request queue\r\n        if (config?.requestId && requestQueue.has(config.requestId)) {\r\n          requestQueue.delete(config.requestId);\r\n        }\r\n\r\n        // Handle request cancellation\r\n        if (axios.isCancel(error)) {\r\n          console.log('‚ö†Ô∏è Request cancelled:', error.message);\r\n          return Promise.reject(new NetworkError('Request was cancelled'));\r\n        }\r\n\r\n        // Calculate request duration\r\n        const duration = config?.metadata ? Date.now() - config.metadata.startTime : 0;\r\n\r\n        // Log error\r\n        console.error('‚ùå API Error:', {\r\n          url: config?.url,\r\n          method: config?.method,\r\n          status: error.response?.status,\r\n          message: error.message,\r\n          duration\r\n        });\r\n\r\n        // Handle network errors\r\n        if (!error.response) {\r\n          if (error.code === 'ECONNABORTED') {\r\n            return Promise.reject(new NetworkError('Request timeout. Please check your connection and try again.'));\r\n          }\r\n          return Promise.reject(new NetworkError('Network error. Please check your internet connection.'));\r\n        }\r\n\r\n        const { status, data } = error.response;\r\n\r\n        // Handle automatic retry for certain status codes\r\n        const currentRetryCount = config?.retryCount || 0;\r\n        if (this.retryConfig.retryStatusCodes.includes(status) && \r\n            currentRetryCount < this.retryConfig.maxRetries) {\r\n          \r\n          // Create new config with updated retry count\r\n          const newConfig = {\r\n            ...config,\r\n            retryCount: currentRetryCount + 1\r\n          };\r\n          \r\n          // Wait before retrying\r\n          await new Promise(resolve => \r\n            setTimeout(resolve, this.retryConfig.retryDelay * newConfig.retryCount)\r\n          );\r\n          \r\n          console.log(`üîÑ Retrying request (${newConfig.retryCount}/${this.retryConfig.maxRetries}): ${config.url}`);\r\n          return this.axios(newConfig);\r\n        }\r\n\r\n        // Standard error handling\r\n        let errorMessage = 'An unexpected error occurred';\r\n        let errorData = data;\r\n\r\n        switch (status) {\r\n          case 400:\r\n            errorMessage = data?.message || 'Bad request';\r\n            break;\r\n            \r\n          case 401:\r\n            errorMessage = data?.message || 'Authentication required';\r\n            this.handleUnauthorized();\r\n            return Promise.reject(new AuthError(errorMessage));\r\n            \r\n          case 403:\r\n            errorMessage = data?.message || 'Access forbidden';\r\n            break;\r\n            \r\n          case 404:\r\n            errorMessage = data?.message || 'Resource not found';\r\n            break;\r\n            \r\n          case 409:\r\n            errorMessage = data?.message || 'Conflict occurred';\r\n            break;\r\n            \r\n          case 422:\r\n            errorMessage = data?.message || 'Validation failed';\r\n            // Format validation errors for easier consumption\r\n            if (data?.errors) {\r\n              errorData = {\r\n                ...data,\r\n                validationErrors: data.errors\r\n              };\r\n            }\r\n            break;\r\n            \r\n          case 429:\r\n            errorMessage = data?.message || 'Too many requests. Please try again later.';\r\n            const retryAfter = error.response.headers['retry-after'];\r\n            if (retryAfter) {\r\n              errorData = { ...data, retryAfter: parseInt(retryAfter, 10) };\r\n            }\r\n            break;\r\n            \r\n          case 500:\r\n            errorMessage = 'Internal server error. Please try again later.';\r\n            break;\r\n            \r\n          case 502:\r\n          case 503:\r\n          case 504:\r\n            errorMessage = 'Service temporarily unavailable. Please try again later.';\r\n            break;\r\n        }\r\n\r\n        return Promise.reject(new APIError(errorMessage, status, errorData));\r\n      }\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Handle unauthorized access\r\n   */\r\n  handleUnauthorized() {\r\n    // Clear all auth data\r\n    this.clearAuthToken();\r\n    \r\n    // Clear all storage\r\n    localStorage.clear();\r\n    sessionStorage.clear();\r\n    \r\n    // Only redirect if not already on auth pages\r\n    const currentPath = window.location.pathname;\r\n    const authPages = ['/login', '/register', '/forgot-password', '/reset-password'];\r\n    \r\n    if (!authPages.some(page => currentPath.includes(page))) {\r\n      // Store current location for redirect back after login\r\n      sessionStorage.setItem('redirectAfterLogin', window.location.pathname + window.location.search);\r\n      \r\n      // Use setTimeout to avoid React state updates during render\r\n      setTimeout(() => {\r\n        window.location.href = `/login?session=expired&redirect=${encodeURIComponent(window.location.pathname)}`;\r\n      }, 100);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Generic request method with retry logic\r\n   */\r\n  async request(config) {\r\n    try {\r\n      return await this.axios(config);\r\n    } catch (error) {\r\n      // Re-throw errors for upstream handling\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * GET request\r\n   */\r\n  async get(url, config = {}) {\r\n    return this.request({\r\n      method: 'get',\r\n      url,\r\n      ...config\r\n    });\r\n  }\r\n\r\n  /**\r\n   * POST request\r\n   */\r\n  async post(url, data = {}, config = {}) {\r\n    return this.request({\r\n      method: 'post',\r\n      url,\r\n      data,\r\n      ...config\r\n    });\r\n  }\r\n\r\n  /**\r\n   * PUT request\r\n   */\r\n  async put(url, data = {}, config = {}) {\r\n    return this.request({\r\n      method: 'put',\r\n      url,\r\n      data,\r\n      ...config\r\n    });\r\n  }\r\n\r\n  /**\r\n   * PATCH request\r\n   */\r\n  async patch(url, data = {}, config = {}) {\r\n    return this.request({\r\n      method: 'patch',\r\n      url,\r\n      data,\r\n      ...config\r\n    });\r\n  }\r\n\r\n  /**\r\n   * DELETE request\r\n   */\r\n  async delete(url, config = {}) {\r\n    return this.request({\r\n      method: 'delete',\r\n      url,\r\n      ...config\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Upload file with progress tracking\r\n   */\r\n  async upload(url, file, onProgress = null, config = {}) {\r\n    const formData = new FormData();\r\n    formData.append('file', file);\r\n\r\n    return this.request({\r\n      method: 'post',\r\n      url,\r\n      data: formData,\r\n      headers: {\r\n        'Content-Type': 'multipart/form-data',\r\n      },\r\n      onUploadProgress: onProgress,\r\n      ...config\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Cancel all pending requests\r\n   */\r\n  cancelAllRequests(message = 'All requests cancelled') {\r\n    requestQueue.forEach((source, requestId) => {\r\n      source.cancel(message);\r\n      requestQueue.delete(requestId);\r\n    });\r\n    console.log(`üõë Cancelled ${requestQueue.size} pending requests`);\r\n  }\r\n\r\n  /**\r\n   * Cancel specific request by ID\r\n   */\r\n  cancelRequest(requestId, message = 'Request cancelled') {\r\n    if (requestQueue.has(requestId)) {\r\n      requestQueue.get(requestId).cancel(message);\r\n      requestQueue.delete(requestId);\r\n      console.log(`üõë Cancelled request: ${requestId}`);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Set authentication token\r\n   */\r\n  setAuthToken(token) {\r\n    if (token) {\r\n      this.axios.defaults.headers.common['Authorization'] = `Bearer ${token}`;\r\n      localStorage.setItem('token', token);\r\n      // Also store in session storage for redundancy\r\n      sessionStorage.setItem('token', token);\r\n    } else {\r\n      this.clearAuthToken();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Clear authentication token\r\n   */\r\n  clearAuthToken() {\r\n    delete this.axios.defaults.headers.common['Authorization'];\r\n    localStorage.removeItem('token');\r\n    localStorage.removeItem('session');\r\n    sessionStorage.removeItem('token');\r\n    sessionStorage.removeItem('session');\r\n  }\r\n\r\n  /**\r\n   * Get authentication token\r\n   */\r\n  getAuthToken() {\r\n    return localStorage.getItem('token') || sessionStorage.getItem('token');\r\n  }\r\n\r\n  /**\r\n   * Check if user is authenticated\r\n   */\r\n  isAuthenticated() {\r\n    return !!this.getAuthToken();\r\n  }\r\n\r\n  /**\r\n   * Set base URL\r\n   */\r\n  setBaseURL(baseURL) {\r\n    this.axios.defaults.baseURL = baseURL;\r\n    console.log(`üåç API base URL set to: ${baseURL}`);\r\n  }\r\n\r\n  /**\r\n   * Get base URL\r\n   */\r\n  getBaseURL() {\r\n    return this.axios.defaults.baseURL;\r\n  }\r\n\r\n  /**\r\n   * Health check\r\n   */\r\n  async healthCheck() {\r\n    try {\r\n      const response = await this.get('/health', { timeout: 5000 });\r\n      return {\r\n        healthy: true,\r\n        timestamp: new Date().toISOString(),\r\n        response: response.data\r\n      };\r\n    } catch (error) {\r\n      return {\r\n        healthy: false,\r\n        timestamp: new Date().toISOString(),\r\n        error: error.message\r\n      };\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Test connection\r\n   */\r\n  async testConnection() {\r\n    try {\r\n      const startTime = Date.now();\r\n      await this.get('/', { timeout: 10000 });\r\n      const duration = Date.now() - startTime;\r\n      \r\n      return {\r\n        connected: true,\r\n        duration,\r\n        baseURL: this.getBaseURL()\r\n      };\r\n    } catch (error) {\r\n      return {\r\n        connected: false,\r\n        error: error.message,\r\n        baseURL: this.getBaseURL()\r\n      };\r\n    }\r\n  }\r\n}\r\n\r\n// Create singleton instance\r\nconst apiService = new APIService();\r\n\r\n// Export for use in components - Remove duplicate exports\r\nexport { apiService };\r\n\r\n// Default export\r\nexport default apiService;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}