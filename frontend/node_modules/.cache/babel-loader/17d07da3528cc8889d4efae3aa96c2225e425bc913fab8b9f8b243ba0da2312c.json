{"ast":null,"code":"import api from './api';\nconst userService = {\n  // ==================== EXISTING METHODS (KEEP THESE) ====================\n\n  getTechnicians: async () => {\n    const response = await api.get('/users/technicians');\n    return response.data;\n  },\n  getDashboardStats: async () => {\n    const response = await api.get('/users/dashboard/stats');\n    return response.data;\n  },\n  getDepartmentStats: async () => {\n    const response = await api.get('/users/dashboard/department/stats');\n    return response.data;\n  },\n  // ==================== ADMIN USER MANAGEMENT (FIXED ENDPOINTS) ====================\n\n  // Get all users with advanced filtering (admin only) - FIXED ENDPOINT\n  getAllUsers: async (filters = {}) => {\n    const params = new URLSearchParams();\n    Object.keys(filters).forEach(key => {\n      if (filters[key] !== '' && filters[key] !== null && filters[key] !== undefined) {\n        params.append(key, filters[key]);\n      }\n    });\n    const response = await api.get(`/users/admin/users?${params}`);\n    return response.data;\n  },\n  // Admin-only user creation - FIXED ENDPOINT\n  createUser: async userData => {\n    const response = await api.post('/users/admin/users', userData);\n    return response.data;\n  },\n  // Admin-only user updates - FIXED ENDPOINT\n  updateUser: async (userId, updates) => {\n    const response = await api.put(`/users/admin/users/${userId}`, updates);\n    return response.data;\n  },\n  // Admin-only user deletion - FIXED ENDPOINT\n  deleteUser: async userId => {\n    const response = await api.delete(`/users/admin/users/${userId}`);\n    return response.data;\n  },\n  // Get user by ID (admin only) - FIXED ENDPOINT\n  getUserById: async userId => {\n    const response = await api.get(`/users/admin/users/${userId}`);\n    return response.data;\n  },\n  // Deactivate user (admin only) - NEW METHOD\n  deactivateUser: async userId => {\n    console.log('ðŸ”„ userService: Deactivating user', userId);\n    try {\n      const response = await api.put(`/users/admin/users/${userId}/deactivate`);\n      console.log('âœ… userService: User deactivated successfully');\n      return response.data;\n    } catch (error) {\n      var _error$response;\n      console.error('âŒ userService: Deactivation error:', ((_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.data) || error.message);\n      throw error;\n    }\n  },\n  // Reactivate user (admin only) \n  reactivateUser: async userId => {\n    console.log('ðŸ”„ userService: Reactivating user', userId);\n    try {\n      const response = await api.put(`/users/admin/users/${userId}/reactivate`);\n      console.log('âœ… userService: User reactivated successfully');\n      return response.data;\n    } catch (error) {\n      var _error$response2;\n      console.error('âŒ userService: Reactivation error:', ((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : _error$response2.data) || error.message);\n      throw error;\n    }\n  },\n  // ==================== STATISTICS \n\n  // User statistics for admin dashboard \n  getUserStats: async () => {\n    const response = await api.get('/users/admin/stats');\n    return response.data;\n  },\n  // Comprehensive system statistics (admin only) \n  getSystemStats: async () => {\n    const response = await api.get('/users/admin/system-stats');\n    return response.data;\n  },\n  // ==================== USER PROFILE MANAGEMENT \n\n  getCurrentUser: async () => {\n    const response = await api.get('/users/me');\n    return response.data;\n  },\n  updateProfile: async updates => {\n    const response = await api.put('/users/profile', updates);\n    return response.data;\n  },\n  changePassword: async (currentPassword, newPassword) => {\n    const response = await api.put('/users/change-password', {\n      currentPassword,\n      newPassword\n    });\n    return response.data;\n  },\n  // Validate user data\n  validateUserData: userData => {\n    const errors = [];\n    if (!userData.username || userData.username.trim().length < 3) {\n      errors.push('Username must be at least 3 characters long');\n    }\n    if (!userData.email || !/\\S+@\\S+\\.\\S+/.test(userData.email)) {\n      errors.push('Valid email address is required');\n    }\n    if (!userData.password || userData.password.length < 6) {\n      errors.push('Password must be at least 6 characters long');\n    }\n    if (!userData.role) {\n      errors.push('User role is required');\n    }\n    return errors;\n  },\n  // Format user for display\n  formatUser: user => {\n    var _user$role, _user$role2;\n    return {\n      ...user,\n      formattedCreatedAt: new Date(user.createdAt).toLocaleDateString(),\n      formattedLastLogin: user.lastLogin ? new Date(user.lastLogin).toLocaleDateString() : 'Never',\n      status: user.isActive ? user.isVerified ? 'Active' : 'Pending Verification' : 'Inactive',\n      roleDisplay: ((_user$role = user.role) === null || _user$role === void 0 ? void 0 : _user$role.charAt(0).toUpperCase()) + ((_user$role2 = user.role) === null || _user$role2 === void 0 ? void 0 : _user$role2.slice(1))\n    };\n  },\n  // Check if user has admin privileges\n  isAdmin: user => {\n    return (user === null || user === void 0 ? void 0 : user.role) === 'admin';\n  },\n  // Check if user can manage other users\n  canManageUsers: user => {\n    return ['admin', 'technician'].includes(user === null || user === void 0 ? void 0 : user.role);\n  }\n};\nexport default userService;","map":{"version":3,"names":["api","userService","getTechnicians","response","get","data","getDashboardStats","getDepartmentStats","getAllUsers","filters","params","URLSearchParams","Object","keys","forEach","key","undefined","append","createUser","userData","post","updateUser","userId","updates","put","deleteUser","delete","getUserById","deactivateUser","console","log","error","_error$response","message","reactivateUser","_error$response2","getUserStats","getSystemStats","getCurrentUser","updateProfile","changePassword","currentPassword","newPassword","validateUserData","errors","username","trim","length","push","email","test","password","role","formatUser","user","_user$role","_user$role2","formattedCreatedAt","Date","createdAt","toLocaleDateString","formattedLastLogin","lastLogin","status","isActive","isVerified","roleDisplay","charAt","toUpperCase","slice","isAdmin","canManageUsers","includes"],"sources":["C:/Users/KADZ-TECH/Documents/dev/it-support-system/frontend/src/services/userService.js"],"sourcesContent":["import api from './api';\r\n\r\nconst userService = {\r\n  // ==================== EXISTING METHODS (KEEP THESE) ====================\r\n  \r\n  getTechnicians: async () => {\r\n    const response = await api.get('/users/technicians');\r\n    return response.data;\r\n  },\r\n\r\n  getDashboardStats: async () => {\r\n    const response = await api.get('/users/dashboard/stats');\r\n    return response.data;\r\n  },\r\n\r\n  getDepartmentStats: async () => {\r\n    const response = await api.get('/users/dashboard/department/stats');\r\n    return response.data;\r\n  },\r\n\r\n  // ==================== ADMIN USER MANAGEMENT (FIXED ENDPOINTS) ====================\r\n\r\n  // Get all users with advanced filtering (admin only) - FIXED ENDPOINT\r\n  getAllUsers: async (filters = {}) => {\r\n    const params = new URLSearchParams();\r\n    Object.keys(filters).forEach(key => {\r\n      if (filters[key] !== '' && filters[key] !== null && filters[key] !== undefined) {\r\n        params.append(key, filters[key]);\r\n      }\r\n    });\r\n    \r\n    const response = await api.get(`/users/admin/users?${params}`);\r\n    return response.data;\r\n  },\r\n\r\n  // Admin-only user creation - FIXED ENDPOINT\r\n  createUser: async (userData) => {\r\n    const response = await api.post('/users/admin/users', userData);\r\n    return response.data;\r\n  },\r\n\r\n  // Admin-only user updates - FIXED ENDPOINT\r\n  updateUser: async (userId, updates) => {\r\n    const response = await api.put(`/users/admin/users/${userId}`, updates);\r\n    return response.data;\r\n  },\r\n\r\n  // Admin-only user deletion - FIXED ENDPOINT\r\n  deleteUser: async (userId) => {\r\n    const response = await api.delete(`/users/admin/users/${userId}`);\r\n    return response.data;\r\n  },\r\n\r\n  // Get user by ID (admin only) - FIXED ENDPOINT\r\n  getUserById: async (userId) => {\r\n    const response = await api.get(`/users/admin/users/${userId}`);\r\n    return response.data;\r\n  },\r\n\r\n  \r\n\r\n  // Deactivate user (admin only) - NEW METHOD\r\n  deactivateUser: async (userId) => {\r\n    console.log('ðŸ”„ userService: Deactivating user', userId);\r\n    try {\r\n      const response = await api.put(`/users/admin/users/${userId}/deactivate`);\r\n      console.log('âœ… userService: User deactivated successfully');\r\n      return response.data;\r\n    } catch (error) {\r\n      console.error('âŒ userService: Deactivation error:', error.response?.data || error.message);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  // Reactivate user (admin only) \r\n  reactivateUser: async (userId) => {\r\n    console.log('ðŸ”„ userService: Reactivating user', userId);\r\n    try {\r\n      const response = await api.put(`/users/admin/users/${userId}/reactivate`);\r\n      console.log('âœ… userService: User reactivated successfully');\r\n      return response.data;\r\n    } catch (error) {\r\n      console.error('âŒ userService: Reactivation error:', error.response?.data || error.message);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  // ==================== STATISTICS \r\n\r\n  // User statistics for admin dashboard \r\n  getUserStats: async () => {\r\n    const response = await api.get('/users/admin/stats');\r\n    return response.data;\r\n  },\r\n\r\n  // Comprehensive system statistics (admin only) \r\n  getSystemStats: async () => {\r\n    const response = await api.get('/users/admin/system-stats');\r\n    return response.data;\r\n  },\r\n\r\n  // ==================== USER PROFILE MANAGEMENT \r\n\r\n  getCurrentUser: async () => {\r\n    const response = await api.get('/users/me');\r\n    return response.data;\r\n  },\r\n\r\n  updateProfile: async (updates) => {\r\n    const response = await api.put('/users/profile', updates);\r\n    return response.data;\r\n  },\r\n\r\n  changePassword: async (currentPassword, newPassword) => {\r\n    const response = await api.put('/users/change-password', {\r\n      currentPassword,\r\n      newPassword\r\n    });\r\n    return response.data;\r\n  },\r\n\r\n\r\n\r\n  // Validate user data\r\n  validateUserData: (userData) => {\r\n    const errors = [];\r\n    \r\n    if (!userData.username || userData.username.trim().length < 3) {\r\n      errors.push('Username must be at least 3 characters long');\r\n    }\r\n    \r\n    if (!userData.email || !/\\S+@\\S+\\.\\S+/.test(userData.email)) {\r\n      errors.push('Valid email address is required');\r\n    }\r\n    \r\n    if (!userData.password || userData.password.length < 6) {\r\n      errors.push('Password must be at least 6 characters long');\r\n    }\r\n    \r\n    if (!userData.role) {\r\n      errors.push('User role is required');\r\n    }\r\n    \r\n    return errors;\r\n  },\r\n\r\n  // Format user for display\r\n  formatUser: (user) => {\r\n    return {\r\n      ...user,\r\n      formattedCreatedAt: new Date(user.createdAt).toLocaleDateString(),\r\n      formattedLastLogin: user.lastLogin ? new Date(user.lastLogin).toLocaleDateString() : 'Never',\r\n      status: user.isActive ? (user.isVerified ? 'Active' : 'Pending Verification') : 'Inactive',\r\n      roleDisplay: user.role?.charAt(0).toUpperCase() + user.role?.slice(1)\r\n    };\r\n  },\r\n\r\n  // Check if user has admin privileges\r\n  isAdmin: (user) => {\r\n    return user?.role === 'admin';\r\n  },\r\n\r\n  // Check if user can manage other users\r\n  canManageUsers: (user) => {\r\n    return ['admin', 'technician'].includes(user?.role);\r\n  }\r\n};\r\n\r\nexport default userService;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}