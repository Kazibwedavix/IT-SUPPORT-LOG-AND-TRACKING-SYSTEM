{"ast":null,"code":"import api from './api';\nclass HealthCheckService {\n  constructor() {\n    this.backendStatus = 'unknown';\n    this.isOnline = navigator.onLine;\n    this.checkInterval = null;\n    this.healthCheckUrl = '/api/health';\n    this.lastCheckTime = null;\n  }\n  init() {\n    console.log('ü©∫ Health check service initialized');\n\n    // Listen for online/offline events\n    window.addEventListener('online', this.handleOnline.bind(this));\n    window.addEventListener('offline', this.handleOffline.bind(this));\n\n    // Start periodic health checks\n    this.startPeriodicChecks();\n\n    // Initial check\n    this.checkBackend();\n  }\n  destroy() {\n    console.log('ü©∫ Health check service destroyed');\n    window.removeEventListener('online', this.handleOnline.bind(this));\n    window.removeEventListener('offline', this.handleOffline.bind(this));\n    if (this.checkInterval) {\n      clearInterval(this.checkInterval);\n      this.checkInterval = null;\n    }\n  }\n  handleOnline() {\n    console.log('üåê Browser is online');\n    this.isOnline = true;\n    this.checkBackend();\n    this.emitStatusChange();\n  }\n  handleOffline() {\n    console.log('üåê Browser is offline');\n    this.isOnline = false;\n    this.backendStatus = 'offline';\n    this.emitStatusChange();\n  }\n  startPeriodicChecks() {\n    // Check every 30 seconds\n    this.checkInterval = setInterval(() => {\n      this.checkBackend();\n    }, 30000);\n  }\n  async checkBackend() {\n    if (!this.isOnline) {\n      this.backendStatus = 'offline';\n      this.emitStatusChange();\n      return false;\n    }\n    try {\n      this.lastCheckTime = new Date();\n      const response = await api.get(this.healthCheckUrl, {\n        timeout: 5000,\n        headers: {\n          'Cache-Control': 'no-cache',\n          'Pragma': 'no-cache'\n        }\n      });\n      const isHealthy = response.data.status === 'OK' || response.data.status === 'healthy';\n      this.backendStatus = isHealthy ? 'healthy' : 'unhealthy';\n      this.emitStatusChange();\n      return isHealthy;\n    } catch (error) {\n      console.error('‚ùå Health check error:', error.message);\n      this.backendStatus = 'unreachable';\n      this.emitStatusChange();\n      return false;\n    }\n  }\n  emitStatusChange() {\n    const event = new CustomEvent('health-status-change', {\n      detail: {\n        backendStatus: this.backendStatus,\n        isOnline: this.isOnline,\n        lastCheck: this.lastCheckTime,\n        timestamp: new Date().toISOString()\n      }\n    });\n    window.dispatchEvent(event);\n  }\n  getStatus() {\n    return {\n      backendStatus: this.backendStatus,\n      isOnline: this.isOnline,\n      lastCheck: this.lastCheckTime\n    };\n  }\n}\n\n// Export singleton instance\nexport const healthCheckService = new HealthCheckService();","map":{"version":3,"names":["api","HealthCheckService","constructor","backendStatus","isOnline","navigator","onLine","checkInterval","healthCheckUrl","lastCheckTime","init","console","log","window","addEventListener","handleOnline","bind","handleOffline","startPeriodicChecks","checkBackend","destroy","removeEventListener","clearInterval","emitStatusChange","setInterval","Date","response","get","timeout","headers","isHealthy","data","status","error","message","event","CustomEvent","detail","lastCheck","timestamp","toISOString","dispatchEvent","getStatus","healthCheckService"],"sources":["C:/Users/KADZ-TECH/Documents/dev/it-support-system/frontend/src/services/healthCheck.js"],"sourcesContent":["import api from './api';\r\n\r\nclass HealthCheckService {\r\n  constructor() {\r\n    this.backendStatus = 'unknown';\r\n    this.isOnline = navigator.onLine;\r\n    this.checkInterval = null;\r\n    this.healthCheckUrl = '/api/health';\r\n    this.lastCheckTime = null;\r\n  }\r\n\r\n  init() {\r\n    console.log('ü©∫ Health check service initialized');\r\n    \r\n    // Listen for online/offline events\r\n    window.addEventListener('online', this.handleOnline.bind(this));\r\n    window.addEventListener('offline', this.handleOffline.bind(this));\r\n    \r\n    // Start periodic health checks\r\n    this.startPeriodicChecks();\r\n    \r\n    // Initial check\r\n    this.checkBackend();\r\n  }\r\n\r\n  destroy() {\r\n    console.log('ü©∫ Health check service destroyed');\r\n    window.removeEventListener('online', this.handleOnline.bind(this));\r\n    window.removeEventListener('offline', this.handleOffline.bind(this));\r\n    \r\n    if (this.checkInterval) {\r\n      clearInterval(this.checkInterval);\r\n      this.checkInterval = null;\r\n    }\r\n  }\r\n\r\n  handleOnline() {\r\n    console.log('üåê Browser is online');\r\n    this.isOnline = true;\r\n    this.checkBackend();\r\n    this.emitStatusChange();\r\n  }\r\n\r\n  handleOffline() {\r\n    console.log('üåê Browser is offline');\r\n    this.isOnline = false;\r\n    this.backendStatus = 'offline';\r\n    this.emitStatusChange();\r\n  }\r\n\r\n  startPeriodicChecks() {\r\n    // Check every 30 seconds\r\n    this.checkInterval = setInterval(() => {\r\n      this.checkBackend();\r\n    }, 30000);\r\n  }\r\n\r\n  async checkBackend() {\r\n    if (!this.isOnline) {\r\n      this.backendStatus = 'offline';\r\n      this.emitStatusChange();\r\n      return false;\r\n    }\r\n\r\n    try {\r\n      this.lastCheckTime = new Date();\r\n      const response = await api.get(this.healthCheckUrl, {\r\n        timeout: 5000,\r\n        headers: {\r\n          'Cache-Control': 'no-cache',\r\n          'Pragma': 'no-cache'\r\n        }\r\n      });\r\n\r\n      const isHealthy = response.data.status === 'OK' || response.data.status === 'healthy';\r\n      this.backendStatus = isHealthy ? 'healthy' : 'unhealthy';\r\n      this.emitStatusChange();\r\n      \r\n      return isHealthy;\r\n    } catch (error) {\r\n      console.error('‚ùå Health check error:', error.message);\r\n      this.backendStatus = 'unreachable';\r\n      this.emitStatusChange();\r\n      return false;\r\n    }\r\n  }\r\n\r\n  emitStatusChange() {\r\n    const event = new CustomEvent('health-status-change', {\r\n      detail: {\r\n        backendStatus: this.backendStatus,\r\n        isOnline: this.isOnline,\r\n        lastCheck: this.lastCheckTime,\r\n        timestamp: new Date().toISOString()\r\n      }\r\n    });\r\n    window.dispatchEvent(event);\r\n  }\r\n\r\n  getStatus() {\r\n    return {\r\n      backendStatus: this.backendStatus,\r\n      isOnline: this.isOnline,\r\n      lastCheck: this.lastCheckTime\r\n    };\r\n  }\r\n}\r\n\r\n// Export singleton instance\r\nexport const healthCheckService = new HealthCheckService();"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}