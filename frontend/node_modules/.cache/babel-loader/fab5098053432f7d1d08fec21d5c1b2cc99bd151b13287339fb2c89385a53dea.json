{"ast":null,"code":"import api from './api';\nclass AuthService {\n  constructor() {\n    this.baseUrl = '/api/auth';\n  }\n\n  // Mock login for development\n  async login(email, password, rememberMe = false) {\n    try {\n      // Try real API first\n      const response = await api.post(`${this.baseUrl}/login`, {\n        email,\n        password,\n        rememberMe\n      }).catch(() => {\n        // If real API fails, use mock response\n        return {\n          data: {\n            success: true,\n            token: 'mock-jwt-token-for-development',\n            user: {\n              id: '1',\n              email: email || 'admin@bugema.ac.ug',\n              name: (email === null || email === void 0 ? void 0 : email.split('@')[0]) || 'Admin User',\n              role: 'admin',\n              department: 'IT',\n              permissions: ['all']\n            }\n          }\n        };\n      });\n      const {\n        success,\n        token,\n        user\n      } = response.data;\n      if (success && token) {\n        localStorage.setItem('token', token);\n        localStorage.setItem('user', JSON.stringify(user));\n        localStorage.setItem('session', JSON.stringify({\n          id: `session_${Date.now()}`,\n          accessToken: token,\n          refreshToken: `refresh_${Date.now()}`,\n          expiresAt: Date.now() + 24 * 60 * 60 * 1000,\n          // 24 hours\n          createdAt: new Date().toISOString()\n        }));\n      }\n      return response.data;\n    } catch (error) {\n      var _error$response, _error$response$data;\n      console.error('Login error:', error);\n      return {\n        success: false,\n        message: ((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.message) || 'Login failed'\n      };\n    }\n  }\n  async register(userData) {\n    try {\n      const response = await api.post(`${this.baseUrl}/register`, userData).catch(() => {\n        // Mock registration for development\n        return {\n          data: {\n            success: true,\n            message: 'Registration successful! Please login.',\n            user: {\n              id: 'new_user_' + Date.now(),\n              email: userData.email,\n              name: `${userData.firstName} ${userData.lastName}`,\n              role: userData.role || 'student',\n              department: userData.department\n            }\n          }\n        };\n      });\n      return response.data;\n    } catch (error) {\n      var _error$response2, _error$response2$data;\n      console.error('Registration error:', error);\n      return {\n        success: false,\n        message: ((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : (_error$response2$data = _error$response2.data) === null || _error$response2$data === void 0 ? void 0 : _error$response2$data.message) || 'Registration failed'\n      };\n    }\n  }\n  async logout() {\n    try {\n      await api.post(`${this.baseUrl}/logout`).catch(() => {\n        // Silently handle mock logout\n      });\n    } finally {\n      localStorage.clear();\n      sessionStorage.clear();\n    }\n  }\n  getCurrentUser() {\n    try {\n      const userStr = localStorage.getItem('user');\n      if (userStr) {\n        const user = JSON.parse(userStr);\n        return {\n          success: true,\n          data: user\n        };\n      }\n      return {\n        success: false,\n        message: 'No user found'\n      };\n    } catch (error) {\n      return {\n        success: false,\n        message: 'Error parsing user data'\n      };\n    }\n  }\n  getCurrentSession() {\n    try {\n      const sessionStr = localStorage.getItem('session');\n      if (sessionStr) {\n        return JSON.parse(sessionStr);\n      }\n      return null;\n    } catch (error) {\n      return null;\n    }\n  }\n\n  // Mock methods for development\n  async checkUsername(username) {\n    return {\n      success: true,\n      available: true,\n      suggestions: []\n    };\n  }\n  async checkEmail(email) {\n    return {\n      success: true,\n      available: true\n    };\n  }\n  async refreshAccessToken() {\n    // Mock token refresh\n    return {\n      success: true,\n      token: 'refreshed_mock_token'\n    };\n  }\n}\n\n// Export singleton instance\nexport const authService = new AuthService();\nexport default authService;","map":{"version":3,"names":["api","AuthService","constructor","baseUrl","login","email","password","rememberMe","response","post","catch","data","success","token","user","id","name","split","role","department","permissions","localStorage","setItem","JSON","stringify","Date","now","accessToken","refreshToken","expiresAt","createdAt","toISOString","error","_error$response","_error$response$data","console","message","register","userData","firstName","lastName","_error$response2","_error$response2$data","logout","clear","sessionStorage","getCurrentUser","userStr","getItem","parse","getCurrentSession","sessionStr","checkUsername","username","available","suggestions","checkEmail","refreshAccessToken","authService"],"sources":["C:/Users/KADZ-TECH/Documents/dev/it-support-system/frontend/src/services/authService.js"],"sourcesContent":["import api from './api';\r\n\r\nclass AuthService {\r\n  constructor() {\r\n    this.baseUrl = '/api/auth';\r\n  }\r\n\r\n  // Mock login for development\r\n  async login(email, password, rememberMe = false) {\r\n    try {\r\n      // Try real API first\r\n      const response = await api.post(`${this.baseUrl}/login`, {\r\n        email,\r\n        password,\r\n        rememberMe\r\n      }).catch(() => {\r\n        // If real API fails, use mock response\r\n        return {\r\n          data: {\r\n            success: true,\r\n            token: 'mock-jwt-token-for-development',\r\n            user: {\r\n              id: '1',\r\n              email: email || 'admin@bugema.ac.ug',\r\n              name: email?.split('@')[0] || 'Admin User',\r\n              role: 'admin',\r\n              department: 'IT',\r\n              permissions: ['all']\r\n            }\r\n          }\r\n        };\r\n      });\r\n\r\n      const { success, token, user } = response.data;\r\n      \r\n      if (success && token) {\r\n        localStorage.setItem('token', token);\r\n        localStorage.setItem('user', JSON.stringify(user));\r\n        localStorage.setItem('session', JSON.stringify({\r\n          id: `session_${Date.now()}`,\r\n          accessToken: token,\r\n          refreshToken: `refresh_${Date.now()}`,\r\n          expiresAt: Date.now() + (24 * 60 * 60 * 1000), // 24 hours\r\n          createdAt: new Date().toISOString()\r\n        }));\r\n      }\r\n\r\n      return response.data;\r\n    } catch (error) {\r\n      console.error('Login error:', error);\r\n      return {\r\n        success: false,\r\n        message: error.response?.data?.message || 'Login failed'\r\n      };\r\n    }\r\n  }\r\n\r\n  async register(userData) {\r\n    try {\r\n      const response = await api.post(`${this.baseUrl}/register`, userData)\r\n        .catch(() => {\r\n          // Mock registration for development\r\n          return {\r\n            data: {\r\n              success: true,\r\n              message: 'Registration successful! Please login.',\r\n              user: {\r\n                id: 'new_user_' + Date.now(),\r\n                email: userData.email,\r\n                name: `${userData.firstName} ${userData.lastName}`,\r\n                role: userData.role || 'student',\r\n                department: userData.department\r\n              }\r\n            }\r\n          };\r\n        });\r\n\r\n      return response.data;\r\n    } catch (error) {\r\n      console.error('Registration error:', error);\r\n      return {\r\n        success: false,\r\n        message: error.response?.data?.message || 'Registration failed'\r\n      };\r\n    }\r\n  }\r\n\r\n  async logout() {\r\n    try {\r\n      await api.post(`${this.baseUrl}/logout`).catch(() => {\r\n        // Silently handle mock logout\r\n      });\r\n    } finally {\r\n      localStorage.clear();\r\n      sessionStorage.clear();\r\n    }\r\n  }\r\n\r\n  getCurrentUser() {\r\n    try {\r\n      const userStr = localStorage.getItem('user');\r\n      if (userStr) {\r\n        const user = JSON.parse(userStr);\r\n        return {\r\n          success: true,\r\n          data: user\r\n        };\r\n      }\r\n      return { success: false, message: 'No user found' };\r\n    } catch (error) {\r\n      return { success: false, message: 'Error parsing user data' };\r\n    }\r\n  }\r\n\r\n  getCurrentSession() {\r\n    try {\r\n      const sessionStr = localStorage.getItem('session');\r\n      if (sessionStr) {\r\n        return JSON.parse(sessionStr);\r\n      }\r\n      return null;\r\n    } catch (error) {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  // Mock methods for development\r\n  async checkUsername(username) {\r\n    return { \r\n      success: true, \r\n      available: true,\r\n      suggestions: []\r\n    };\r\n  }\r\n\r\n  async checkEmail(email) {\r\n    return { \r\n      success: true, \r\n      available: true \r\n    };\r\n  }\r\n\r\n  async refreshAccessToken() {\r\n    // Mock token refresh\r\n    return { success: true, token: 'refreshed_mock_token' };\r\n  }\r\n}\r\n\r\n// Export singleton instance\r\nexport const authService = new AuthService();\r\nexport default authService;"],"mappings":"AAAA,OAAOA,GAAG,MAAM,OAAO;AAEvB,MAAMC,WAAW,CAAC;EAChBC,WAAWA,CAAA,EAAG;IACZ,IAAI,CAACC,OAAO,GAAG,WAAW;EAC5B;;EAEA;EACA,MAAMC,KAAKA,CAACC,KAAK,EAAEC,QAAQ,EAAEC,UAAU,GAAG,KAAK,EAAE;IAC/C,IAAI;MACF;MACA,MAAMC,QAAQ,GAAG,MAAMR,GAAG,CAACS,IAAI,CAAC,GAAG,IAAI,CAACN,OAAO,QAAQ,EAAE;QACvDE,KAAK;QACLC,QAAQ;QACRC;MACF,CAAC,CAAC,CAACG,KAAK,CAAC,MAAM;QACb;QACA,OAAO;UACLC,IAAI,EAAE;YACJC,OAAO,EAAE,IAAI;YACbC,KAAK,EAAE,gCAAgC;YACvCC,IAAI,EAAE;cACJC,EAAE,EAAE,GAAG;cACPV,KAAK,EAAEA,KAAK,IAAI,oBAAoB;cACpCW,IAAI,EAAE,CAAAX,KAAK,aAALA,KAAK,uBAALA,KAAK,CAAEY,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,KAAI,YAAY;cAC1CC,IAAI,EAAE,OAAO;cACbC,UAAU,EAAE,IAAI;cAChBC,WAAW,EAAE,CAAC,KAAK;YACrB;UACF;QACF,CAAC;MACH,CAAC,CAAC;MAEF,MAAM;QAAER,OAAO;QAAEC,KAAK;QAAEC;MAAK,CAAC,GAAGN,QAAQ,CAACG,IAAI;MAE9C,IAAIC,OAAO,IAAIC,KAAK,EAAE;QACpBQ,YAAY,CAACC,OAAO,CAAC,OAAO,EAAET,KAAK,CAAC;QACpCQ,YAAY,CAACC,OAAO,CAAC,MAAM,EAAEC,IAAI,CAACC,SAAS,CAACV,IAAI,CAAC,CAAC;QAClDO,YAAY,CAACC,OAAO,CAAC,SAAS,EAAEC,IAAI,CAACC,SAAS,CAAC;UAC7CT,EAAE,EAAE,WAAWU,IAAI,CAACC,GAAG,CAAC,CAAC,EAAE;UAC3BC,WAAW,EAAEd,KAAK;UAClBe,YAAY,EAAE,WAAWH,IAAI,CAACC,GAAG,CAAC,CAAC,EAAE;UACrCG,SAAS,EAAEJ,IAAI,CAACC,GAAG,CAAC,CAAC,GAAI,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,IAAK;UAAE;UAC/CI,SAAS,EAAE,IAAIL,IAAI,CAAC,CAAC,CAACM,WAAW,CAAC;QACpC,CAAC,CAAC,CAAC;MACL;MAEA,OAAOvB,QAAQ,CAACG,IAAI;IACtB,CAAC,CAAC,OAAOqB,KAAK,EAAE;MAAA,IAAAC,eAAA,EAAAC,oBAAA;MACdC,OAAO,CAACH,KAAK,CAAC,cAAc,EAAEA,KAAK,CAAC;MACpC,OAAO;QACLpB,OAAO,EAAE,KAAK;QACdwB,OAAO,EAAE,EAAAH,eAAA,GAAAD,KAAK,CAACxB,QAAQ,cAAAyB,eAAA,wBAAAC,oBAAA,GAAdD,eAAA,CAAgBtB,IAAI,cAAAuB,oBAAA,uBAApBA,oBAAA,CAAsBE,OAAO,KAAI;MAC5C,CAAC;IACH;EACF;EAEA,MAAMC,QAAQA,CAACC,QAAQ,EAAE;IACvB,IAAI;MACF,MAAM9B,QAAQ,GAAG,MAAMR,GAAG,CAACS,IAAI,CAAC,GAAG,IAAI,CAACN,OAAO,WAAW,EAAEmC,QAAQ,CAAC,CAClE5B,KAAK,CAAC,MAAM;QACX;QACA,OAAO;UACLC,IAAI,EAAE;YACJC,OAAO,EAAE,IAAI;YACbwB,OAAO,EAAE,wCAAwC;YACjDtB,IAAI,EAAE;cACJC,EAAE,EAAE,WAAW,GAAGU,IAAI,CAACC,GAAG,CAAC,CAAC;cAC5BrB,KAAK,EAAEiC,QAAQ,CAACjC,KAAK;cACrBW,IAAI,EAAE,GAAGsB,QAAQ,CAACC,SAAS,IAAID,QAAQ,CAACE,QAAQ,EAAE;cAClDtB,IAAI,EAAEoB,QAAQ,CAACpB,IAAI,IAAI,SAAS;cAChCC,UAAU,EAAEmB,QAAQ,CAACnB;YACvB;UACF;QACF,CAAC;MACH,CAAC,CAAC;MAEJ,OAAOX,QAAQ,CAACG,IAAI;IACtB,CAAC,CAAC,OAAOqB,KAAK,EAAE;MAAA,IAAAS,gBAAA,EAAAC,qBAAA;MACdP,OAAO,CAACH,KAAK,CAAC,qBAAqB,EAAEA,KAAK,CAAC;MAC3C,OAAO;QACLpB,OAAO,EAAE,KAAK;QACdwB,OAAO,EAAE,EAAAK,gBAAA,GAAAT,KAAK,CAACxB,QAAQ,cAAAiC,gBAAA,wBAAAC,qBAAA,GAAdD,gBAAA,CAAgB9B,IAAI,cAAA+B,qBAAA,uBAApBA,qBAAA,CAAsBN,OAAO,KAAI;MAC5C,CAAC;IACH;EACF;EAEA,MAAMO,MAAMA,CAAA,EAAG;IACb,IAAI;MACF,MAAM3C,GAAG,CAACS,IAAI,CAAC,GAAG,IAAI,CAACN,OAAO,SAAS,CAAC,CAACO,KAAK,CAAC,MAAM;QACnD;MAAA,CACD,CAAC;IACJ,CAAC,SAAS;MACRW,YAAY,CAACuB,KAAK,CAAC,CAAC;MACpBC,cAAc,CAACD,KAAK,CAAC,CAAC;IACxB;EACF;EAEAE,cAAcA,CAAA,EAAG;IACf,IAAI;MACF,MAAMC,OAAO,GAAG1B,YAAY,CAAC2B,OAAO,CAAC,MAAM,CAAC;MAC5C,IAAID,OAAO,EAAE;QACX,MAAMjC,IAAI,GAAGS,IAAI,CAAC0B,KAAK,CAACF,OAAO,CAAC;QAChC,OAAO;UACLnC,OAAO,EAAE,IAAI;UACbD,IAAI,EAAEG;QACR,CAAC;MACH;MACA,OAAO;QAAEF,OAAO,EAAE,KAAK;QAAEwB,OAAO,EAAE;MAAgB,CAAC;IACrD,CAAC,CAAC,OAAOJ,KAAK,EAAE;MACd,OAAO;QAAEpB,OAAO,EAAE,KAAK;QAAEwB,OAAO,EAAE;MAA0B,CAAC;IAC/D;EACF;EAEAc,iBAAiBA,CAAA,EAAG;IAClB,IAAI;MACF,MAAMC,UAAU,GAAG9B,YAAY,CAAC2B,OAAO,CAAC,SAAS,CAAC;MAClD,IAAIG,UAAU,EAAE;QACd,OAAO5B,IAAI,CAAC0B,KAAK,CAACE,UAAU,CAAC;MAC/B;MACA,OAAO,IAAI;IACb,CAAC,CAAC,OAAOnB,KAAK,EAAE;MACd,OAAO,IAAI;IACb;EACF;;EAEA;EACA,MAAMoB,aAAaA,CAACC,QAAQ,EAAE;IAC5B,OAAO;MACLzC,OAAO,EAAE,IAAI;MACb0C,SAAS,EAAE,IAAI;MACfC,WAAW,EAAE;IACf,CAAC;EACH;EAEA,MAAMC,UAAUA,CAACnD,KAAK,EAAE;IACtB,OAAO;MACLO,OAAO,EAAE,IAAI;MACb0C,SAAS,EAAE;IACb,CAAC;EACH;EAEA,MAAMG,kBAAkBA,CAAA,EAAG;IACzB;IACA,OAAO;MAAE7C,OAAO,EAAE,IAAI;MAAEC,KAAK,EAAE;IAAuB,CAAC;EACzD;AACF;;AAEA;AACA,OAAO,MAAM6C,WAAW,GAAG,IAAIzD,WAAW,CAAC,CAAC;AAC5C,eAAeyD,WAAW","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}