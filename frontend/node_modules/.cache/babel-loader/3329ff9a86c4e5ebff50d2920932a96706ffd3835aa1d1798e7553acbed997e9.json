{"ast":null,"code":"// frontend/src/services/api.js\nimport axios from 'axios';\n\n// Create axios instance with production-grade configuration\nconst api = axios.create({\n  baseURL: process.env.REACT_APP_API_URL || 'http://localhost:5002',\n  timeout: 30000,\n  // 30 seconds timeout for production\n  headers: {\n    'Content-Type': 'application/json',\n    'X-Client-Version': process.env.REACT_APP_VERSION || '1.0.0'\n  },\n  withCredentials: true // Enable cookies for CSRF protection if needed\n});\n\n// Request counter for tracking\nlet requestCounter = 0;\n\n// Request interceptor with enhanced security features\napi.interceptors.request.use(config => {\n  const requestId = ++requestCounter;\n  const traceId = generateTraceId();\n\n  // Add auth token from multiple storage locations\n  const token = localStorage.getItem('token') || sessionStorage.getItem('token') || getCookie('auth_token');\n  if (token && !config.headers.Authorization) {\n    config.headers.Authorization = `Bearer ${token}`;\n  }\n\n  // Add security headers\n  config.headers['X-Request-ID'] = generateRequestId();\n  config.headers['X-Trace-ID'] = traceId;\n  config.headers['X-Client-Request-ID'] = `client_${requestId}_${Date.now()}`;\n\n  // Add CSRF token if available\n  const csrfToken = getCookie('csrf_token') || localStorage.getItem('csrf_token');\n  if (csrfToken) {\n    config.headers['X-CSRF-Token'] = csrfToken;\n  }\n\n  // Log request for monitoring (only in development or with explicit debug flag)\n  if (process.env.NODE_ENV === 'development' || localStorage.getItem('debug_requests')) {\n    var _config$method;\n    console.log(`[API Request ${requestId}]`, {\n      method: (_config$method = config.method) === null || _config$method === void 0 ? void 0 : _config$method.toUpperCase(),\n      url: config.url,\n      traceId,\n      timestamp: new Date().toISOString()\n    });\n  }\n  return config;\n}, error => {\n  // Log request configuration errors\n  console.error('[API Request Config Error]', error);\n  return Promise.reject(createErrorObject(error, 'REQUEST_CONFIG_ERROR'));\n});\n\n// Response interceptor with comprehensive error handling\napi.interceptors.response.use(response => {\n  // Log successful responses in debug mode\n  if (process.env.NODE_ENV === 'development' || localStorage.getItem('debug_responses')) {\n    console.log(`[API Response ${response.config.headers['X-Client-Request-ID']}]`, {\n      status: response.status,\n      url: response.config.url,\n      timestamp: new Date().toISOString()\n    });\n  }\n\n  // Extract and store new tokens if present in response\n  if (response.headers['x-new-token']) {\n    const newToken = response.headers['x-new-token'];\n    localStorage.setItem('token', newToken);\n  }\n  return response;\n}, error => {\n  var _error$config, _error$config$headers, _error$config2, _error$config2$header;\n  const requestId = ((_error$config = error.config) === null || _error$config === void 0 ? void 0 : (_error$config$headers = _error$config.headers) === null || _error$config$headers === void 0 ? void 0 : _error$config$headers['X-Client-Request-ID']) || 'unknown';\n  const traceId = ((_error$config2 = error.config) === null || _error$config2 === void 0 ? void 0 : (_error$config2$header = _error$config2.headers) === null || _error$config2$header === void 0 ? void 0 : _error$config2$header['X-Trace-ID']) || 'unknown';\n\n  // Enhanced error logging\n  logError(error, requestId, traceId);\n\n  // Handle network errors\n  if (!error.response) {\n    const networkError = createErrorObject(error, 'NETWORK_ERROR', 'Unable to connect to server. Please check your internet connection.');\n    return Promise.reject(networkError);\n  }\n  const {\n    status,\n    data,\n    headers\n  } = error.response;\n\n  // Handle specific HTTP status codes\n  switch (status) {\n    case 400:\n      return Promise.reject(handleBadRequestError(error, data));\n    case 401:\n      return handleUnauthorizedError(error);\n    case 403:\n      return Promise.reject(createErrorObject(error, 'FORBIDDEN', 'You do not have permission to access this resource.'));\n    case 404:\n      return Promise.reject(createErrorObject(error, 'NOT_FOUND', 'The requested resource was not found.'));\n    case 408:\n      return Promise.reject(createErrorObject(error, 'TIMEOUT_ERROR', 'Request timeout. Please try again.'));\n    case 429:\n      return handleRateLimitError(error, headers);\n    case 500:\n    case 502:\n    case 503:\n    case 504:\n      return Promise.reject(handleServerError(error, status));\n    default:\n      return Promise.reject(createErrorObject(error, 'UNKNOWN_ERROR', 'An unexpected error occurred. Please try again later.'));\n  }\n});\n\n// Helper functions for enhanced error handling\n\nconst generateRequestId = () => {\n  return 'req_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);\n};\nconst generateTraceId = () => {\n  return 'trace_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);\n};\nconst getCookie = name => {\n  const value = `; ${document.cookie}`;\n  const parts = value.split(`; ${name}=`);\n  if (parts.length === 2) return parts.pop().split(';').shift();\n  return null;\n};\nconst createErrorObject = (originalError, code, userMessage = null) => {\n  return {\n    code,\n    message: userMessage || originalError.message,\n    originalError,\n    timestamp: new Date().toISOString(),\n    userFriendly: !!userMessage\n  };\n};\nconst logError = (error, requestId, traceId) => {\n  var _error$response, _error$response2, _error$config3, _error$config4;\n  const errorLog = {\n    requestId,\n    traceId,\n    timestamp: new Date().toISOString(),\n    error: {\n      message: error.message,\n      stack: error.stack,\n      response: (_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.data,\n      status: (_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : _error$response2.status,\n      url: (_error$config3 = error.config) === null || _error$config3 === void 0 ? void 0 : _error$config3.url,\n      method: (_error$config4 = error.config) === null || _error$config4 === void 0 ? void 0 : _error$config4.method\n    }\n  };\n\n  // Log to console in development\n  if (process.env.NODE_ENV === 'development') {\n    console.error('[API Error]', errorLog);\n  }\n\n  // Send to error tracking service in production\n  if (process.env.NODE_ENV === 'production') {\n    // Integration with error monitoring services (Sentry, LogRocket, etc.)\n    // window.Sentry?.captureException(error);\n    // window.LogRocket?.captureException(error);\n\n    // Optionally send to your backend for centralized logging\n    // if (!error.config?.url?.includes('/error-log')) {\n    //   api.post('/error-log', errorLog).catch(() => {});\n    // }\n  }\n};\nconst handleBadRequestError = (error, data) => {\n  // Extract validation errors from server response\n  const validationErrors = (data === null || data === void 0 ? void 0 : data.errors) || (data === null || data === void 0 ? void 0 : data.validation) || {};\n  const errorMessage = (data === null || data === void 0 ? void 0 : data.message) || 'Invalid request data';\n  return {\n    ...createErrorObject(error, 'VALIDATION_ERROR', errorMessage),\n    validationErrors,\n    fieldErrors: (data === null || data === void 0 ? void 0 : data.fieldErrors) || {}\n  };\n};\nconst handleUnauthorizedError = async error => {\n  const originalRequest = error.config;\n  const token = localStorage.getItem('token') || sessionStorage.getItem('token');\n\n  // Check if this is already a retry attempt\n  if (originalRequest._retry || !token) {\n    // Clear auth data and redirect\n    localStorage.removeItem('token');\n    sessionStorage.removeItem('token');\n    localStorage.removeItem('user');\n\n    // Only redirect if not already on login page\n    if (!window.location.pathname.includes('/login')) {\n      // Store the attempted URL for post-login redirect\n      sessionStorage.setItem('redirectAfterLogin', window.location.pathname);\n      window.location.href = '/login?session=expired';\n    }\n    return Promise.reject(createErrorObject(error, 'AUTH_REQUIRED', 'Your session has expired. Please log in again.'));\n  }\n\n  // Try to refresh the token\n  try {\n    originalRequest._retry = true;\n    const refreshToken = localStorage.getItem('refreshToken');\n    if (!refreshToken) {\n      throw new Error('No refresh token available');\n    }\n    const response = await api.post('/auth/refresh', {\n      refreshToken\n    });\n    const {\n      token: newToken,\n      refreshToken: newRefreshToken\n    } = response.data;\n\n    // Store new tokens\n    localStorage.setItem('token', newToken);\n    localStorage.setItem('refreshToken', newRefreshToken);\n\n    // Update the original request with new token\n    originalRequest.headers.Authorization = `Bearer ${newToken}`;\n\n    // Retry the original request\n    return api(originalRequest);\n  } catch (refreshError) {\n    // Refresh failed, logout user\n    localStorage.removeItem('token');\n    localStorage.removeItem('refreshToken');\n    localStorage.removeItem('user');\n    if (!window.location.pathname.includes('/login')) {\n      window.location.href = '/login?session=invalid';\n    }\n    return Promise.reject(createErrorObject(refreshError, 'REFRESH_FAILED', 'Unable to refresh session. Please log in again.'));\n  }\n};\nconst handleRateLimitError = (error, headers) => {\n  const retryAfter = headers['retry-after'] || headers['x-ratelimit-reset'];\n  const remaining = headers['x-ratelimit-remaining'];\n  const limit = headers['x-ratelimit-limit'];\n  const rateLimitInfo = {\n    retryAfter: retryAfter ? parseInt(retryAfter) : null,\n    remaining: remaining ? parseInt(remaining) : null,\n    limit: limit ? parseInt(limit) : null,\n    resetTime: retryAfter ? new Date(Date.now() + retryAfter * 1000) : null\n  };\n  return Promise.reject({\n    ...createErrorObject(error, 'RATE_LIMITED', 'Too many requests. Please slow down.'),\n    rateLimitInfo\n  });\n};\nconst handleServerError = (error, status) => {\n  const statusMessages = {\n    500: 'Internal server error. Our team has been notified.',\n    502: 'Bad gateway. Please try again in a few moments.',\n    503: 'Service temporarily unavailable. We are performing maintenance.',\n    504: 'Gateway timeout. The server is taking too long to respond.'\n  };\n  return createErrorObject(error, `SERVER_ERROR_${status}`, statusMessages[status] || 'Server error. Please try again later.');\n};\n\n// Utility methods for API service\nexport const apiService = {\n  // Health check\n  async healthCheck() {\n    try {\n      const response = await api.get('/health');\n      return response.data;\n    } catch (error) {\n      throw createErrorObject(error, 'HEALTH_CHECK_FAILED', 'Service health check failed');\n    }\n  },\n  // Get API status\n  async getStatus() {\n    try {\n      const response = await api.get('/status');\n      return response.data;\n    } catch (error) {\n      throw createErrorObject(error, 'STATUS_CHECK_FAILED', 'Unable to get service status');\n    }\n  },\n  // Clear all authentication data\n  clearAuth() {\n    localStorage.removeItem('token');\n    localStorage.removeItem('refreshToken');\n    localStorage.removeItem('user');\n    sessionStorage.removeItem('token');\n    sessionStorage.removeItem('user');\n\n    // Clear auth header for future requests\n    delete api.defaults.headers.common.Authorization;\n  },\n  // Set auth token manually\n  setAuthToken(token) {\n    if (token) {\n      api.defaults.headers.common.Authorization = `Bearer ${token}`;\n    } else {\n      delete api.defaults.headers.common.Authorization;\n    }\n  },\n  // Test API connection\n  async testConnection() {\n    try {\n      const startTime = Date.now();\n      const response = await api.get('/health', {\n        timeout: 10000\n      });\n      const latency = Date.now() - startTime;\n      return {\n        connected: true,\n        latency,\n        status: response.status,\n        timestamp: new Date().toISOString()\n      };\n    } catch (error) {\n      return {\n        connected: false,\n        error: error.code || 'CONNECTION_FAILED',\n        message: error.message,\n        timestamp: new Date().toISOString()\n      };\n    }\n  }\n};\n\n// Add global error handler for unhandled promise rejections\nif (typeof window !== 'undefined') {\n  window.addEventListener('unhandledrejection', event => {\n    var _event$reason;\n    if ((_event$reason = event.reason) !== null && _event$reason !== void 0 && _event$reason.isAxiosError) {\n      console.error('[Unhandled API Error]', event.reason);\n      // Optionally send to error tracking service\n    }\n  });\n}\nexport default api;","map":{"version":3,"names":["axios","api","create","baseURL","process","env","REACT_APP_API_URL","timeout","headers","REACT_APP_VERSION","withCredentials","requestCounter","interceptors","request","use","config","requestId","traceId","generateTraceId","token","localStorage","getItem","sessionStorage","getCookie","Authorization","generateRequestId","Date","now","csrfToken","NODE_ENV","_config$method","console","log","method","toUpperCase","url","timestamp","toISOString","error","Promise","reject","createErrorObject","response","status","newToken","setItem","_error$config","_error$config$headers","_error$config2","_error$config2$header","logError","networkError","data","handleBadRequestError","handleUnauthorizedError","handleRateLimitError","handleServerError","Math","random","toString","substr","name","value","document","cookie","parts","split","length","pop","shift","originalError","code","userMessage","message","userFriendly","_error$response","_error$response2","_error$config3","_error$config4","errorLog","stack","validationErrors","errors","validation","errorMessage","fieldErrors","originalRequest","_retry","removeItem","window","location","pathname","includes","href","refreshToken","Error","post","newRefreshToken","refreshError","retryAfter","remaining","limit","rateLimitInfo","parseInt","resetTime","statusMessages","apiService","healthCheck","get","getStatus","clearAuth","defaults","common","setAuthToken","testConnection","startTime","latency","connected","addEventListener","event","_event$reason","reason","isAxiosError"],"sources":["C:/Users/KADZ-TECH/Documents/dev/it-support-system/frontend/src/services/api.js"],"sourcesContent":["// frontend/src/services/api.js\r\nimport axios from 'axios';\r\n\r\n// Create axios instance with production-grade configuration\r\nconst api = axios.create({\r\n  baseURL: process.env.REACT_APP_API_URL || 'http://localhost:5002',\r\n  timeout: 30000, // 30 seconds timeout for production\r\n  headers: {\r\n    'Content-Type': 'application/json',\r\n    'X-Client-Version': process.env.REACT_APP_VERSION || '1.0.0',\r\n  },\r\n  withCredentials: true, // Enable cookies for CSRF protection if needed\r\n});\r\n\r\n// Request counter for tracking\r\nlet requestCounter = 0;\r\n\r\n// Request interceptor with enhanced security features\r\napi.interceptors.request.use(\r\n  (config) => {\r\n    const requestId = ++requestCounter;\r\n    const traceId = generateTraceId();\r\n    \r\n    // Add auth token from multiple storage locations\r\n    const token = localStorage.getItem('token') || \r\n                  sessionStorage.getItem('token') ||\r\n                  getCookie('auth_token');\r\n    \r\n    if (token && !config.headers.Authorization) {\r\n      config.headers.Authorization = `Bearer ${token}`;\r\n    }\r\n    \r\n    // Add security headers\r\n    config.headers['X-Request-ID'] = generateRequestId();\r\n    config.headers['X-Trace-ID'] = traceId;\r\n    config.headers['X-Client-Request-ID'] = `client_${requestId}_${Date.now()}`;\r\n    \r\n    // Add CSRF token if available\r\n    const csrfToken = getCookie('csrf_token') || localStorage.getItem('csrf_token');\r\n    if (csrfToken) {\r\n      config.headers['X-CSRF-Token'] = csrfToken;\r\n    }\r\n    \r\n    // Log request for monitoring (only in development or with explicit debug flag)\r\n    if (process.env.NODE_ENV === 'development' || localStorage.getItem('debug_requests')) {\r\n      console.log(`[API Request ${requestId}]`, {\r\n        method: config.method?.toUpperCase(),\r\n        url: config.url,\r\n        traceId,\r\n        timestamp: new Date().toISOString(),\r\n      });\r\n    }\r\n    \r\n    return config;\r\n  },\r\n  (error) => {\r\n    // Log request configuration errors\r\n    console.error('[API Request Config Error]', error);\r\n    return Promise.reject(createErrorObject(error, 'REQUEST_CONFIG_ERROR'));\r\n  }\r\n);\r\n\r\n// Response interceptor with comprehensive error handling\r\napi.interceptors.response.use(\r\n  (response) => {\r\n    // Log successful responses in debug mode\r\n    if (process.env.NODE_ENV === 'development' || localStorage.getItem('debug_responses')) {\r\n      console.log(`[API Response ${response.config.headers['X-Client-Request-ID']}]`, {\r\n        status: response.status,\r\n        url: response.config.url,\r\n        timestamp: new Date().toISOString(),\r\n      });\r\n    }\r\n    \r\n    // Extract and store new tokens if present in response\r\n    if (response.headers['x-new-token']) {\r\n      const newToken = response.headers['x-new-token'];\r\n      localStorage.setItem('token', newToken);\r\n    }\r\n    \r\n    return response;\r\n  },\r\n  (error) => {\r\n    const requestId = error.config?.headers?.['X-Client-Request-ID'] || 'unknown';\r\n    const traceId = error.config?.headers?.['X-Trace-ID'] || 'unknown';\r\n    \r\n    // Enhanced error logging\r\n    logError(error, requestId, traceId);\r\n    \r\n    // Handle network errors\r\n    if (!error.response) {\r\n      const networkError = createErrorObject(\r\n        error,\r\n        'NETWORK_ERROR',\r\n        'Unable to connect to server. Please check your internet connection.'\r\n      );\r\n      return Promise.reject(networkError);\r\n    }\r\n    \r\n    const { status, data, headers } = error.response;\r\n    \r\n    // Handle specific HTTP status codes\r\n    switch (status) {\r\n      case 400:\r\n        return Promise.reject(handleBadRequestError(error, data));\r\n      \r\n      case 401:\r\n        return handleUnauthorizedError(error);\r\n      \r\n      case 403:\r\n        return Promise.reject(createErrorObject(\r\n          error,\r\n          'FORBIDDEN',\r\n          'You do not have permission to access this resource.'\r\n        ));\r\n      \r\n      case 404:\r\n        return Promise.reject(createErrorObject(\r\n          error,\r\n          'NOT_FOUND',\r\n          'The requested resource was not found.'\r\n        ));\r\n      \r\n      case 408:\r\n        return Promise.reject(createErrorObject(\r\n          error,\r\n          'TIMEOUT_ERROR',\r\n          'Request timeout. Please try again.'\r\n        ));\r\n      \r\n      case 429:\r\n        return handleRateLimitError(error, headers);\r\n      \r\n      case 500:\r\n      case 502:\r\n      case 503:\r\n      case 504:\r\n        return Promise.reject(handleServerError(error, status));\r\n      \r\n      default:\r\n        return Promise.reject(createErrorObject(\r\n          error,\r\n          'UNKNOWN_ERROR',\r\n          'An unexpected error occurred. Please try again later.'\r\n        ));\r\n    }\r\n  }\r\n);\r\n\r\n// Helper functions for enhanced error handling\r\n\r\nconst generateRequestId = () => {\r\n  return 'req_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);\r\n};\r\n\r\nconst generateTraceId = () => {\r\n  return 'trace_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);\r\n};\r\n\r\nconst getCookie = (name) => {\r\n  const value = `; ${document.cookie}`;\r\n  const parts = value.split(`; ${name}=`);\r\n  if (parts.length === 2) return parts.pop().split(';').shift();\r\n  return null;\r\n};\r\n\r\nconst createErrorObject = (originalError, code, userMessage = null) => {\r\n  return {\r\n    code,\r\n    message: userMessage || originalError.message,\r\n    originalError,\r\n    timestamp: new Date().toISOString(),\r\n    userFriendly: !!userMessage,\r\n  };\r\n};\r\n\r\nconst logError = (error, requestId, traceId) => {\r\n  const errorLog = {\r\n    requestId,\r\n    traceId,\r\n    timestamp: new Date().toISOString(),\r\n    error: {\r\n      message: error.message,\r\n      stack: error.stack,\r\n      response: error.response?.data,\r\n      status: error.response?.status,\r\n      url: error.config?.url,\r\n      method: error.config?.method,\r\n    },\r\n  };\r\n  \r\n  // Log to console in development\r\n  if (process.env.NODE_ENV === 'development') {\r\n    console.error('[API Error]', errorLog);\r\n  }\r\n  \r\n  // Send to error tracking service in production\r\n  if (process.env.NODE_ENV === 'production') {\r\n    // Integration with error monitoring services (Sentry, LogRocket, etc.)\r\n    // window.Sentry?.captureException(error);\r\n    // window.LogRocket?.captureException(error);\r\n    \r\n    // Optionally send to your backend for centralized logging\r\n    // if (!error.config?.url?.includes('/error-log')) {\r\n    //   api.post('/error-log', errorLog).catch(() => {});\r\n    // }\r\n  }\r\n};\r\n\r\nconst handleBadRequestError = (error, data) => {\r\n  // Extract validation errors from server response\r\n  const validationErrors = data?.errors || data?.validation || {};\r\n  const errorMessage = data?.message || 'Invalid request data';\r\n  \r\n  return {\r\n    ...createErrorObject(error, 'VALIDATION_ERROR', errorMessage),\r\n    validationErrors,\r\n    fieldErrors: data?.fieldErrors || {},\r\n  };\r\n};\r\n\r\nconst handleUnauthorizedError = async (error) => {\r\n  const originalRequest = error.config;\r\n  const token = localStorage.getItem('token') || sessionStorage.getItem('token');\r\n  \r\n  // Check if this is already a retry attempt\r\n  if (originalRequest._retry || !token) {\r\n    // Clear auth data and redirect\r\n    localStorage.removeItem('token');\r\n    sessionStorage.removeItem('token');\r\n    localStorage.removeItem('user');\r\n    \r\n    // Only redirect if not already on login page\r\n    if (!window.location.pathname.includes('/login')) {\r\n      // Store the attempted URL for post-login redirect\r\n      sessionStorage.setItem('redirectAfterLogin', window.location.pathname);\r\n      window.location.href = '/login?session=expired';\r\n    }\r\n    \r\n    return Promise.reject(createErrorObject(\r\n      error,\r\n      'AUTH_REQUIRED',\r\n      'Your session has expired. Please log in again.'\r\n    ));\r\n  }\r\n  \r\n  // Try to refresh the token\r\n  try {\r\n    originalRequest._retry = true;\r\n    \r\n    const refreshToken = localStorage.getItem('refreshToken');\r\n    if (!refreshToken) {\r\n      throw new Error('No refresh token available');\r\n    }\r\n    \r\n    const response = await api.post('/auth/refresh', { refreshToken });\r\n    const { token: newToken, refreshToken: newRefreshToken } = response.data;\r\n    \r\n    // Store new tokens\r\n    localStorage.setItem('token', newToken);\r\n    localStorage.setItem('refreshToken', newRefreshToken);\r\n    \r\n    // Update the original request with new token\r\n    originalRequest.headers.Authorization = `Bearer ${newToken}`;\r\n    \r\n    // Retry the original request\r\n    return api(originalRequest);\r\n  } catch (refreshError) {\r\n    // Refresh failed, logout user\r\n    localStorage.removeItem('token');\r\n    localStorage.removeItem('refreshToken');\r\n    localStorage.removeItem('user');\r\n    \r\n    if (!window.location.pathname.includes('/login')) {\r\n      window.location.href = '/login?session=invalid';\r\n    }\r\n    \r\n    return Promise.reject(createErrorObject(\r\n      refreshError,\r\n      'REFRESH_FAILED',\r\n      'Unable to refresh session. Please log in again.'\r\n    ));\r\n  }\r\n};\r\n\r\nconst handleRateLimitError = (error, headers) => {\r\n  const retryAfter = headers['retry-after'] || headers['x-ratelimit-reset'];\r\n  const remaining = headers['x-ratelimit-remaining'];\r\n  const limit = headers['x-ratelimit-limit'];\r\n  \r\n  const rateLimitInfo = {\r\n    retryAfter: retryAfter ? parseInt(retryAfter) : null,\r\n    remaining: remaining ? parseInt(remaining) : null,\r\n    limit: limit ? parseInt(limit) : null,\r\n    resetTime: retryAfter ? new Date(Date.now() + retryAfter * 1000) : null,\r\n  };\r\n  \r\n  return Promise.reject({\r\n    ...createErrorObject(\r\n      error,\r\n      'RATE_LIMITED',\r\n      'Too many requests. Please slow down.'\r\n    ),\r\n    rateLimitInfo,\r\n  });\r\n};\r\n\r\nconst handleServerError = (error, status) => {\r\n  const statusMessages = {\r\n    500: 'Internal server error. Our team has been notified.',\r\n    502: 'Bad gateway. Please try again in a few moments.',\r\n    503: 'Service temporarily unavailable. We are performing maintenance.',\r\n    504: 'Gateway timeout. The server is taking too long to respond.',\r\n  };\r\n  \r\n  return createErrorObject(\r\n    error,\r\n    `SERVER_ERROR_${status}`,\r\n    statusMessages[status] || 'Server error. Please try again later.'\r\n  );\r\n};\r\n\r\n// Utility methods for API service\r\nexport const apiService = {\r\n  // Health check\r\n  async healthCheck() {\r\n    try {\r\n      const response = await api.get('/health');\r\n      return response.data;\r\n    } catch (error) {\r\n      throw createErrorObject(error, 'HEALTH_CHECK_FAILED', 'Service health check failed');\r\n    }\r\n  },\r\n  \r\n  // Get API status\r\n  async getStatus() {\r\n    try {\r\n      const response = await api.get('/status');\r\n      return response.data;\r\n    } catch (error) {\r\n      throw createErrorObject(error, 'STATUS_CHECK_FAILED', 'Unable to get service status');\r\n    }\r\n  },\r\n  \r\n  // Clear all authentication data\r\n  clearAuth() {\r\n    localStorage.removeItem('token');\r\n    localStorage.removeItem('refreshToken');\r\n    localStorage.removeItem('user');\r\n    sessionStorage.removeItem('token');\r\n    sessionStorage.removeItem('user');\r\n    \r\n    // Clear auth header for future requests\r\n    delete api.defaults.headers.common.Authorization;\r\n  },\r\n  \r\n  // Set auth token manually\r\n  setAuthToken(token) {\r\n    if (token) {\r\n      api.defaults.headers.common.Authorization = `Bearer ${token}`;\r\n    } else {\r\n      delete api.defaults.headers.common.Authorization;\r\n    }\r\n  },\r\n  \r\n  // Test API connection\r\n  async testConnection() {\r\n    try {\r\n      const startTime = Date.now();\r\n      const response = await api.get('/health', { timeout: 10000 });\r\n      const latency = Date.now() - startTime;\r\n      \r\n      return {\r\n        connected: true,\r\n        latency,\r\n        status: response.status,\r\n        timestamp: new Date().toISOString(),\r\n      };\r\n    } catch (error) {\r\n      return {\r\n        connected: false,\r\n        error: error.code || 'CONNECTION_FAILED',\r\n        message: error.message,\r\n        timestamp: new Date().toISOString(),\r\n      };\r\n    }\r\n  },\r\n};\r\n\r\n// Add global error handler for unhandled promise rejections\r\nif (typeof window !== 'undefined') {\r\n  window.addEventListener('unhandledrejection', (event) => {\r\n    if (event.reason?.isAxiosError) {\r\n      console.error('[Unhandled API Error]', event.reason);\r\n      // Optionally send to error tracking service\r\n    }\r\n  });\r\n}\r\n\r\nexport default api;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}