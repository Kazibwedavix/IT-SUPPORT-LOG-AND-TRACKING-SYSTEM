{"ast":null,"code":"/**\r\n * Bugema University IT Support System\r\n * Ticket Service - Complete API Integration\r\n * \r\n * @version 3.0.0\r\n * @description Handles all ticket-related API calls with proper error handling\r\n */\n\nimport api from './api';\n\n// ============================================\n// CONSTANTS & CONFIGURATION\n// ============================================\n\nconst ENDPOINTS = {\n  TICKETS: '/tickets',\n  TICKETS_V2: '/v2/tickets',\n  COMMENTS: id => `/tickets/${id}/comments`,\n  ATTACHMENTS: id => `/tickets/${id}/attachments`,\n  SLA: id => `/tickets/${id}/sla`,\n  ACTIVITIES: id => `/tickets/${id}/activities`,\n  STATS: '/dashboard/stats',\n  METADATA: '/v2/tickets/metadata'\n};\nconst DEFAULT_PAGE_SIZE = 20;\nconst MAX_RETRY_ATTEMPTS = 3;\n\n// ============================================\n// HELPER FUNCTIONS\n// ============================================\n\n/**\r\n * Build query parameters from filters object\r\n */\nconst buildQueryParams = (filters = {}) => {\n  const params = new URLSearchParams();\n  Object.entries(filters).forEach(([key, value]) => {\n    if (value !== '' && value !== null && value !== undefined) {\n      if (Array.isArray(value)) {\n        value.forEach(v => params.append(key, v));\n      } else {\n        params.append(key, value);\n      }\n    }\n  });\n  return params.toString();\n};\n\n/**\r\n * Enhanced error handler with retry logic\r\n */\nconst handleApiError = (error, operation) => {\n  var _error$response, _error$response$data, _error$response2, _error$response2$data, _error$response3, _error$response3$data, _error$response4;\n  console.error(`‚ùå [TICKET SERVICE] ${operation} failed:`, error);\n\n  // Extract meaningful error message\n  const errorMessage = ((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.message) || ((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : (_error$response2$data = _error$response2.data) === null || _error$response2$data === void 0 ? void 0 : _error$response2$data.error) || error.message || 'An unexpected error occurred';\n  const errorCode = ((_error$response3 = error.response) === null || _error$response3 === void 0 ? void 0 : (_error$response3$data = _error$response3.data) === null || _error$response3$data === void 0 ? void 0 : _error$response3$data.code) || 'UNKNOWN_ERROR';\n  const statusCode = ((_error$response4 = error.response) === null || _error$response4 === void 0 ? void 0 : _error$response4.status) || 500;\n  throw {\n    success: false,\n    error: errorMessage,\n    code: errorCode,\n    status: statusCode,\n    timestamp: new Date().toISOString(),\n    operation\n  };\n};\n\n/**\r\n * Validate ticket data before submission\r\n */\nconst validateTicketData = ticketData => {\n  const errors = [];\n  if (!ticketData.title || ticketData.title.trim().length < 5) {\n    errors.push({\n      field: 'title',\n      message: 'Title must be at least 5 characters long'\n    });\n  }\n  if (!ticketData.description || ticketData.description.trim().length < 10) {\n    errors.push({\n      field: 'description',\n      message: 'Description must be at least 10 characters long'\n    });\n  }\n  if (!ticketData.category) {\n    errors.push({\n      field: 'category',\n      message: 'Category is required'\n    });\n  }\n  return {\n    isValid: errors.length === 0,\n    errors\n  };\n};\n\n// ============================================\n// MAIN TICKET SERVICE\n// ============================================\n\nconst ticketService = {\n  // ==================== CORE TICKET OPERATIONS ====================\n\n  /**\r\n   * Create a new ticket\r\n   * @param {Object} ticketData - Ticket information\r\n   * @returns {Promise<Object>} Created ticket\r\n   */\n  createTicket: async ticketData => {\n    try {\n      console.log('üìù [CREATE TICKET] Validating data...');\n\n      // Validate before sending\n      const validation = validateTicketData(ticketData);\n      if (!validation.isValid) {\n        throw {\n          response: {\n            data: {\n              message: 'Validation failed',\n              errors: validation.errors,\n              code: 'VALIDATION_ERROR'\n            },\n            status: 400\n          }\n        };\n      }\n      console.log('üìù [CREATE TICKET] Sending request...');\n      const response = await api.post(ENDPOINTS.TICKETS, ticketData);\n      console.log('‚úÖ [CREATE TICKET] Success:', response.data);\n      return response.data;\n    } catch (error) {\n      return handleApiError(error, 'CREATE_TICKET');\n    }\n  },\n  /**\r\n   * Get tickets with filters and pagination\r\n   * @param {Object} filters - Filter criteria\r\n   * @returns {Promise<Object>} Paginated tickets list\r\n   */\n  getTickets: async (filters = {}) => {\n    try {\n      var _response$data, _response$data$data, _response$data$data$t;\n      console.log('üé´ [GET TICKETS] Fetching with filters:', filters);\n      const queryString = buildQueryParams({\n        ...filters,\n        page: filters.page || 1,\n        limit: filters.limit || DEFAULT_PAGE_SIZE\n      });\n      const response = await api.get(`${ENDPOINTS.TICKETS}?${queryString}`);\n      console.log(`‚úÖ [GET TICKETS] Found ${((_response$data = response.data) === null || _response$data === void 0 ? void 0 : (_response$data$data = _response$data.data) === null || _response$data$data === void 0 ? void 0 : (_response$data$data$t = _response$data$data.tickets) === null || _response$data$data$t === void 0 ? void 0 : _response$data$data$t.length) || 0} tickets`);\n      return response.data;\n    } catch (error) {\n      return handleApiError(error, 'GET_TICKETS');\n    }\n  },\n  /**\r\n   * Get single ticket by ID - FIXED VERSION\r\n   * @param {String} id - Ticket ID\r\n   * @returns {Promise<Object>} Ticket details\r\n   */\n  getTicket: async id => {\n    try {\n      console.log('üîç [GET TICKET] Fetching ticket:', id);\n      if (!id || id === 'undefined' || id === 'null') {\n        throw {\n          response: {\n            data: {\n              message: 'Invalid ticket ID',\n              code: 'INVALID_TICKET_ID'\n            },\n            status: 400\n          }\n        };\n      }\n      const response = await api.get(`${ENDPOINTS.TICKETS}/${id}`);\n      console.log('‚úÖ [GET TICKET] Ticket fetched successfully');\n      return response.data;\n    } catch (error) {\n      return handleApiError(error, 'GET_TICKET');\n    }\n  },\n  /**\r\n   * Update ticket\r\n   * @param {String} id - Ticket ID\r\n   * @param {Object} updates - Fields to update\r\n   * @returns {Promise<Object>} Updated ticket\r\n   */\n  updateTicket: async (id, updates) => {\n    try {\n      console.log('‚úèÔ∏è [UPDATE TICKET] Updating ticket:', id);\n      const response = await api.put(`${ENDPOINTS.TICKETS}/${id}`, updates);\n      console.log('‚úÖ [UPDATE TICKET] Ticket updated successfully');\n      return response.data;\n    } catch (error) {\n      return handleApiError(error, 'UPDATE_TICKET');\n    }\n  },\n  /**\r\n   * Delete ticket (soft delete)\r\n   * @param {String} id - Ticket ID\r\n   * @returns {Promise<Object>} Deletion confirmation\r\n   */\n  deleteTicket: async id => {\n    try {\n      console.log('üóëÔ∏è [DELETE TICKET] Deleting ticket:', id);\n      const response = await api.delete(`${ENDPOINTS.TICKETS}/${id}`);\n      console.log('‚úÖ [DELETE TICKET] Ticket deleted successfully');\n      return response.data;\n    } catch (error) {\n      return handleApiError(error, 'DELETE_TICKET');\n    }\n  },\n  // ==================== COMMENT OPERATIONS ====================\n\n  /**\r\n   * Get comments for a ticket\r\n   * @param {String} ticketId - Ticket ID\r\n   * @returns {Promise<Array>} List of comments\r\n   */\n  getComments: async ticketId => {\n    try {\n      var _response$data2, _response$data2$data, _response$data2$data$;\n      console.log('üí¨ [GET COMMENTS] Fetching comments for ticket:', ticketId);\n      const response = await api.get(ENDPOINTS.COMMENTS(ticketId));\n      console.log(`‚úÖ [GET COMMENTS] Found ${((_response$data2 = response.data) === null || _response$data2 === void 0 ? void 0 : (_response$data2$data = _response$data2.data) === null || _response$data2$data === void 0 ? void 0 : (_response$data2$data$ = _response$data2$data.comments) === null || _response$data2$data$ === void 0 ? void 0 : _response$data2$data$.length) || 0} comments`);\n      return response.data;\n    } catch (error) {\n      // Comments are not critical, return empty array on error\n      console.warn('‚ö†Ô∏è [GET COMMENTS] Failed to fetch comments:', error.message);\n      return {\n        success: false,\n        data: {\n          comments: []\n        }\n      };\n    }\n  },\n  /**\r\n   * Add comment to ticket\r\n   * @param {String} ticketId - Ticket ID\r\n   * @param {Object} commentData - Comment data\r\n   * @returns {Promise<Object>} Created comment\r\n   */\n  addComment: async (ticketId, commentData) => {\n    try {\n      console.log('üí¨ [ADD COMMENT] Adding comment to ticket:', ticketId);\n      if (!commentData.content || commentData.content.trim().length === 0) {\n        throw {\n          response: {\n            data: {\n              message: 'Comment content is required',\n              code: 'VALIDATION_ERROR'\n            },\n            status: 400\n          }\n        };\n      }\n      const response = await api.post(ENDPOINTS.COMMENTS(ticketId), commentData);\n      console.log('‚úÖ [ADD COMMENT] Comment added successfully');\n      return response.data;\n    } catch (error) {\n      return handleApiError(error, 'ADD_COMMENT');\n    }\n  },\n  /**\r\n   * Update comment\r\n   * @param {String} ticketId - Ticket ID\r\n   * @param {String} commentId - Comment ID\r\n   * @param {Object} updates - Comment updates\r\n   * @returns {Promise<Object>} Updated comment\r\n   */\n  updateComment: async (ticketId, commentId, updates) => {\n    try {\n      console.log('‚úèÔ∏è [UPDATE COMMENT] Updating comment:', commentId);\n      const response = await api.put(`${ENDPOINTS.COMMENTS(ticketId)}/${commentId}`, updates);\n      console.log('‚úÖ [UPDATE COMMENT] Comment updated successfully');\n      return response.data;\n    } catch (error) {\n      return handleApiError(error, 'UPDATE_COMMENT');\n    }\n  },\n  /**\r\n   * Delete comment\r\n   * @param {String} ticketId - Ticket ID\r\n   * @param {String} commentId - Comment ID\r\n   * @returns {Promise<Object>} Deletion confirmation\r\n   */\n  deleteComment: async (ticketId, commentId) => {\n    try {\n      console.log('üóëÔ∏è [DELETE COMMENT] Deleting comment:', commentId);\n      const response = await api.delete(`${ENDPOINTS.COMMENTS(ticketId)}/${commentId}`);\n      console.log('‚úÖ [DELETE COMMENT] Comment deleted successfully');\n      return response.data;\n    } catch (error) {\n      return handleApiError(error, 'DELETE_COMMENT');\n    }\n  },\n  // ==================== ATTACHMENT OPERATIONS ====================\n\n  /**\r\n   * Upload attachment to ticket\r\n   * @param {String} ticketId - Ticket ID\r\n   * @param {File} file - File to upload\r\n   * @param {Function} onProgress - Progress callback\r\n   * @returns {Promise<Object>} Upload result\r\n   */\n  uploadAttachment: async (ticketId, file, onProgress) => {\n    try {\n      console.log('üìé [UPLOAD ATTACHMENT] Uploading file:', file.name);\n      const formData = new FormData();\n      formData.append('file', file);\n      const response = await api.post(ENDPOINTS.ATTACHMENTS(ticketId), formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        },\n        onUploadProgress: progressEvent => {\n          if (onProgress && progressEvent.total) {\n            const percentCompleted = Math.round(progressEvent.loaded * 100 / progressEvent.total);\n            onProgress(percentCompleted);\n          }\n        }\n      });\n      console.log('‚úÖ [UPLOAD ATTACHMENT] File uploaded successfully');\n      return response.data;\n    } catch (error) {\n      return handleApiError(error, 'UPLOAD_ATTACHMENT');\n    }\n  },\n  /**\r\n   * Delete attachment from ticket\r\n   * @param {String} ticketId - Ticket ID\r\n   * @param {String} fileId - File ID\r\n   * @returns {Promise<Object>} Deletion confirmation\r\n   */\n  deleteAttachment: async (ticketId, fileId) => {\n    try {\n      console.log('üóëÔ∏è [DELETE ATTACHMENT] Deleting file:', fileId);\n      const response = await api.delete(`${ENDPOINTS.ATTACHMENTS(ticketId)}/${fileId}`);\n      console.log('‚úÖ [DELETE ATTACHMENT] File deleted successfully');\n      return response.data;\n    } catch (error) {\n      return handleApiError(error, 'DELETE_ATTACHMENT');\n    }\n  },\n  // ==================== ASSIGNMENT OPERATIONS ====================\n\n  /**\r\n   * Assign ticket to technician\r\n   * @param {String} ticketId - Ticket ID\r\n   * @param {String} technicianId - Technician user ID\r\n   * @param {String} reason - Assignment reason\r\n   * @returns {Promise<Object>} Assignment result\r\n   */\n  assignTicket: async (ticketId, technicianId, reason = '') => {\n    try {\n      console.log('üë§ [ASSIGN TICKET] Assigning ticket:', ticketId, 'to:', technicianId);\n      const response = await api.put(`${ENDPOINTS.TICKETS}/${ticketId}`, {\n        assignedTo: technicianId,\n        changeReason: reason || 'Ticket assigned to technician'\n      });\n      console.log('‚úÖ [ASSIGN TICKET] Ticket assigned successfully');\n      return response.data;\n    } catch (error) {\n      return handleApiError(error, 'ASSIGN_TICKET');\n    }\n  },\n  /**\r\n   * Get available technicians for assignment\r\n   * @param {String} department - Department filter\r\n   * @returns {Promise<Array>} List of available technicians\r\n   */\n  getAvailableTechnicians: async (department = '') => {\n    try {\n      var _response$data3, _response$data3$data;\n      console.log('üë• [GET TECHNICIANS] Fetching available technicians');\n      const params = department ? `?department=${department}` : '';\n      const response = await api.get(`/users/technicians${params}`);\n      console.log(`‚úÖ [GET TECHNICIANS] Found ${((_response$data3 = response.data) === null || _response$data3 === void 0 ? void 0 : (_response$data3$data = _response$data3.data) === null || _response$data3$data === void 0 ? void 0 : _response$data3$data.length) || 0} technicians`);\n      return response.data;\n    } catch (error) {\n      return handleApiError(error, 'GET_TECHNICIANS');\n    }\n  },\n  // ==================== STATUS & WORKFLOW OPERATIONS ====================\n\n  /**\r\n   * Update ticket status\r\n   * @param {String} ticketId - Ticket ID\r\n   * @param {String} status - New status\r\n   * @param {String} reason - Status change reason\r\n   * @returns {Promise<Object>} Update result\r\n   */\n  updateStatus: async (ticketId, status, reason = '') => {\n    try {\n      console.log('üîÑ [UPDATE STATUS] Changing ticket status:', ticketId, 'to:', status);\n      const response = await api.put(`${ENDPOINTS.TICKETS}/${ticketId}`, {\n        status,\n        changeReason: reason || `Status changed to ${status}`\n      });\n      console.log('‚úÖ [UPDATE STATUS] Status updated successfully');\n      return response.data;\n    } catch (error) {\n      return handleApiError(error, 'UPDATE_STATUS');\n    }\n  },\n  /**\r\n   * Resolve ticket\r\n   * @param {String} ticketId - Ticket ID\r\n   * @param {Object} resolutionData - Resolution details\r\n   * @returns {Promise<Object>} Resolution result\r\n   */\n  resolveTicket: async (ticketId, resolutionData) => {\n    try {\n      console.log('‚úîÔ∏è [RESOLVE TICKET] Resolving ticket:', ticketId);\n      const response = await api.put(`${ENDPOINTS.TICKETS}/${ticketId}`, {\n        status: 'resolved',\n        resolution: resolutionData,\n        changeReason: 'Ticket resolved'\n      });\n      console.log('‚úÖ [RESOLVE TICKET] Ticket resolved successfully');\n      return response.data;\n    } catch (error) {\n      return handleApiError(error, 'RESOLVE_TICKET');\n    }\n  },\n  /**\r\n   * Reopen ticket\r\n   * @param {String} ticketId - Ticket ID\r\n   * @param {String} reason - Reopen reason\r\n   * @returns {Promise<Object>} Reopen result\r\n   */\n  reopenTicket: async (ticketId, reason = '') => {\n    try {\n      console.log('üîÑ [REOPEN TICKET] Reopening ticket:', ticketId);\n      const response = await api.put(`${ENDPOINTS.TICKETS}/${ticketId}`, {\n        status: 'open',\n        changeReason: reason || 'Ticket reopened'\n      });\n      console.log('‚úÖ [REOPEN TICKET] Ticket reopened successfully');\n      return response.data;\n    } catch (error) {\n      return handleApiError(error, 'REOPEN_TICKET');\n    }\n  },\n  /**\r\n   * Close ticket\r\n   * @param {String} ticketId - Ticket ID\r\n   * @param {String} reason - Close reason\r\n   * @returns {Promise<Object>} Close result\r\n   */\n  closeTicket: async (ticketId, reason = '') => {\n    try {\n      console.log('üîí [CLOSE TICKET] Closing ticket:', ticketId);\n      const response = await api.put(`${ENDPOINTS.TICKETS}/${ticketId}`, {\n        status: 'closed',\n        changeReason: reason || 'Ticket closed'\n      });\n      console.log('‚úÖ [CLOSE TICKET] Ticket closed successfully');\n      return response.data;\n    } catch (error) {\n      return handleApiError(error, 'CLOSE_TICKET');\n    }\n  },\n  // ==================== ANALYTICS & STATISTICS ====================\n\n  /**\r\n   * Get dashboard statistics\r\n   * @param {String} timeRange - Time range for stats\r\n   * @returns {Promise<Object>} Dashboard stats\r\n   */\n  getDashboardStats: async (timeRange = '30d') => {\n    try {\n      console.log('üìä [DASHBOARD STATS] Fetching statistics');\n      const response = await api.get(`${ENDPOINTS.STATS}?range=${timeRange}`);\n      console.log('‚úÖ [DASHBOARD STATS] Statistics fetched successfully');\n      return response.data;\n    } catch (error) {\n      return handleApiError(error, 'GET_DASHBOARD_STATS');\n    }\n  },\n  /**\r\n   * Get ticket statistics\r\n   * @param {Object} filters - Filter criteria\r\n   * @returns {Promise<Object>} Ticket statistics\r\n   */\n  getTicketStats: async (filters = {}) => {\n    try {\n      console.log('üìä [TICKET STATS] Fetching ticket statistics');\n      const queryString = buildQueryParams(filters);\n      const response = await api.get(`${ENDPOINTS.TICKETS}/stats?${queryString}`);\n      console.log('‚úÖ [TICKET STATS] Statistics fetched successfully');\n      return response.data;\n    } catch (error) {\n      return handleApiError(error, 'GET_TICKET_STATS');\n    }\n  },\n  /**\r\n   * Get SLA compliance report\r\n   * @param {String} period - Time period\r\n   * @returns {Promise<Object>} SLA compliance data\r\n   */\n  getSLACompliance: async (period = 'month') => {\n    try {\n      console.log('üìà [SLA COMPLIANCE] Fetching SLA data');\n      const response = await api.get(`${ENDPOINTS.TICKETS}/analytics/sla?period=${period}`);\n      console.log('‚úÖ [SLA COMPLIANCE] SLA data fetched successfully');\n      return response.data;\n    } catch (error) {\n      return handleApiError(error, 'GET_SLA_COMPLIANCE');\n    }\n  },\n  /**\r\n   * Get technician performance metrics\r\n   * @param {String} period - Time period\r\n   * @returns {Promise<Object>} Performance metrics\r\n   */\n  getTechnicianPerformance: async (period = 'month') => {\n    try {\n      console.log('üë• [TECHNICIAN PERFORMANCE] Fetching performance data');\n      const response = await api.get(`${ENDPOINTS.TICKETS}/analytics/technicians?period=${period}`);\n      console.log('‚úÖ [TECHNICIAN PERFORMANCE] Performance data fetched successfully');\n      return response.data;\n    } catch (error) {\n      return handleApiError(error, 'GET_TECHNICIAN_PERFORMANCE');\n    }\n  },\n  // ==================== BULK OPERATIONS ====================\n\n  /**\r\n   * Bulk update ticket status\r\n   * @param {Array} ticketIds - Array of ticket IDs\r\n   * @param {String} status - New status\r\n   * @param {String} notes - Update notes\r\n   * @returns {Promise<Object>} Bulk update result\r\n   */\n  bulkUpdateStatus: async (ticketIds, status, notes = '') => {\n    try {\n      console.log(`üì¶ [BULK UPDATE] Updating ${ticketIds.length} tickets`);\n      const response = await api.patch(`${ENDPOINTS.TICKETS}/bulk/status`, {\n        ticketIds,\n        status,\n        notes\n      });\n      console.log('‚úÖ [BULK UPDATE] Tickets updated successfully');\n      return response.data;\n    } catch (error) {\n      return handleApiError(error, 'BULK_UPDATE_STATUS');\n    }\n  },\n  /**\r\n   * Bulk assign tickets\r\n   * @param {Array} ticketIds - Array of ticket IDs\r\n   * @param {String} assigneeId - Assignee user ID\r\n   * @param {String} notes - Assignment notes\r\n   * @returns {Promise<Object>} Bulk assignment result\r\n   */\n  bulkAssignTickets: async (ticketIds, assigneeId, notes = '') => {\n    try {\n      console.log(`üì¶ [BULK ASSIGN] Assigning ${ticketIds.length} tickets`);\n      const response = await api.patch(`${ENDPOINTS.TICKETS}/bulk/assign`, {\n        ticketIds,\n        assigneeId,\n        notes\n      });\n      console.log('‚úÖ [BULK ASSIGN] Tickets assigned successfully');\n      return response.data;\n    } catch (error) {\n      return handleApiError(error, 'BULK_ASSIGN_TICKETS');\n    }\n  },\n  /**\r\n   * Bulk update priority\r\n   * @param {Array} ticketIds - Array of ticket IDs\r\n   * @param {String} priority - New priority\r\n   * @param {String} notes - Update notes\r\n   * @returns {Promise<Object>} Bulk update result\r\n   */\n  bulkUpdatePriority: async (ticketIds, priority, notes = '') => {\n    try {\n      console.log(`üì¶ [BULK PRIORITY] Updating priority for ${ticketIds.length} tickets`);\n      const response = await api.patch(`${ENDPOINTS.TICKETS}/bulk/priority`, {\n        ticketIds,\n        priority,\n        notes\n      });\n      console.log('‚úÖ [BULK PRIORITY] Priorities updated successfully');\n      return response.data;\n    } catch (error) {\n      return handleApiError(error, 'BULK_UPDATE_PRIORITY');\n    }\n  },\n  /**\r\n   * Bulk delete tickets\r\n   * @param {Array} ticketIds - Array of ticket IDs\r\n   * @returns {Promise<Object>} Bulk deletion result\r\n   */\n  bulkDeleteTickets: async ticketIds => {\n    try {\n      console.log(`üóëÔ∏è [BULK DELETE] Deleting ${ticketIds.length} tickets`);\n      const response = await api.post(`${ENDPOINTS.TICKETS}/bulk/delete`, {\n        ticketIds\n      });\n      console.log('‚úÖ [BULK DELETE] Tickets deleted successfully');\n      return response.data;\n    } catch (error) {\n      return handleApiError(error, 'BULK_DELETE_TICKETS');\n    }\n  },\n  // ==================== EXPORT OPERATIONS ====================\n\n  /**\r\n   * Export tickets to file\r\n   * @param {Object} filters - Export filters\r\n   * @param {String} format - Export format (csv, xlsx, pdf)\r\n   * @returns {Promise<Blob>} File blob\r\n   */\n  exportTickets: async (filters = {}, format = 'csv') => {\n    try {\n      console.log('üì• [EXPORT TICKETS] Exporting tickets as', format);\n      const queryString = buildQueryParams({\n        ...filters,\n        format\n      });\n      const response = await api.get(`${ENDPOINTS.TICKETS}/export?${queryString}`, {\n        responseType: 'blob'\n      });\n      console.log('‚úÖ [EXPORT TICKETS] Export successful');\n      return response.data;\n    } catch (error) {\n      return handleApiError(error, 'EXPORT_TICKETS');\n    }\n  },\n  /**\r\n   * Generate export URL\r\n   * @param {Object} filters - Export filters\r\n   * @param {String} format - Export format\r\n   * @returns {String} Export URL\r\n   */\n  generateExportUrl: (filters = {}, format = 'csv') => {\n    const queryString = buildQueryParams({\n      ...filters,\n      format\n    });\n    return `${api.defaults.baseURL}${ENDPOINTS.TICKETS}/export?${queryString}`;\n  },\n  // ==================== METADATA & UTILITIES ====================\n\n  /**\r\n   * Get ticket metadata (categories, priorities, etc.)\r\n   * @returns {Promise<Object>} Metadata\r\n   */\n  getMetadata: async () => {\n    try {\n      console.log('üìã [METADATA] Fetching ticket metadata');\n      const response = await api.get(ENDPOINTS.METADATA);\n      console.log('‚úÖ [METADATA] Metadata fetched successfully');\n      return response.data;\n    } catch (error) {\n      return handleApiError(error, 'GET_METADATA');\n    }\n  },\n  /**\r\n   * Search tickets with suggestions\r\n   * @param {String} query - Search query\r\n   * @returns {Promise<Array>} Search suggestions\r\n   */\n  searchTickets: async query => {\n    try {\n      var _response$data4, _response$data4$data;\n      if (!query || query.length < 2) {\n        return {\n          success: true,\n          data: []\n        };\n      }\n      console.log('üîç [SEARCH] Searching tickets:', query);\n      const response = await api.get(`${ENDPOINTS.TICKETS_V2}/search/suggestions?q=${encodeURIComponent(query)}`);\n      console.log(`‚úÖ [SEARCH] Found ${((_response$data4 = response.data) === null || _response$data4 === void 0 ? void 0 : (_response$data4$data = _response$data4.data) === null || _response$data4$data === void 0 ? void 0 : _response$data4$data.length) || 0} results`);\n      return response.data;\n    } catch (error) {\n      console.warn('‚ö†Ô∏è [SEARCH] Search failed:', error.message);\n      return {\n        success: false,\n        data: []\n      };\n    }\n  },\n  /**\r\n   * Get ticket activities/history\r\n   * @param {String} ticketId - Ticket ID\r\n   * @returns {Promise<Array>} Activity history\r\n   */\n  getActivities: async ticketId => {\n    try {\n      console.log('üìú [ACTIVITIES] Fetching ticket activities:', ticketId);\n      const response = await api.get(ENDPOINTS.ACTIVITIES(ticketId));\n      console.log('‚úÖ [ACTIVITIES] Activities fetched successfully');\n      return response.data;\n    } catch (error) {\n      console.warn('‚ö†Ô∏è [ACTIVITIES] Failed to fetch activities:', error.message);\n      return {\n        success: false,\n        data: []\n      };\n    }\n  },\n  /**\r\n   * Get SLA status for ticket\r\n   * @param {String} ticketId - Ticket ID\r\n   * @returns {Promise<Object>} SLA status\r\n   */\n  getSLAStatus: async ticketId => {\n    try {\n      console.log('‚è±Ô∏è [SLA STATUS] Fetching SLA status for ticket:', ticketId);\n      const response = await api.get(ENDPOINTS.SLA(ticketId));\n      console.log('‚úÖ [SLA STATUS] SLA status fetched successfully');\n      return response.data;\n    } catch (error) {\n      console.warn('‚ö†Ô∏è [SLA STATUS] Failed to fetch SLA status:', error.message);\n      return {\n        success: false,\n        data: null\n      };\n    }\n  },\n  // ==================== VALIDATION UTILITIES ====================\n\n  /**\r\n   * Validate ticket data\r\n   * @param {Object} ticketData - Ticket data to validate\r\n   * @returns {Object} Validation result\r\n   */\n  validateTicketData,\n  /**\r\n   * Format ticket for display\r\n   * @param {Object} ticket - Raw ticket data\r\n   * @returns {Object} Formatted ticket\r\n   */\n  formatTicket: ticket => {\n    var _ticket$priority, _ticket$priority2, _ticket$status, _ticket$status2;\n    if (!ticket) return null;\n    return {\n      ...ticket,\n      formattedCreatedAt: new Date(ticket.createdAt).toLocaleString(),\n      formattedUpdatedAt: new Date(ticket.updatedAt).toLocaleString(),\n      formattedPriority: ((_ticket$priority = ticket.priority) === null || _ticket$priority === void 0 ? void 0 : _ticket$priority.charAt(0).toUpperCase()) + ((_ticket$priority2 = ticket.priority) === null || _ticket$priority2 === void 0 ? void 0 : _ticket$priority2.slice(1)),\n      formattedStatus: ((_ticket$status = ticket.status) === null || _ticket$status === void 0 ? void 0 : _ticket$status.charAt(0).toUpperCase()) + ((_ticket$status2 = ticket.status) === null || _ticket$status2 === void 0 ? void 0 : _ticket$status2.slice(1)),\n      isOverdue: ticket.slaDueDate ? new Date(ticket.slaDueDate) < new Date() : false,\n      ageInDays: Math.floor((new Date() - new Date(ticket.createdAt)) / (1000 * 60 * 60 * 24)),\n      hasComments: ticket.comments && ticket.comments.length > 0,\n      hasAttachments: ticket.attachments && ticket.attachments.length > 0\n    };\n  },\n  /**\r\n   * Check if ticket can be edited by user\r\n   * @param {Object} ticket - Ticket object\r\n   * @param {Object} user - Current user\r\n   * @returns {Boolean} Can edit\r\n   */\n  canEditTicket: (ticket, user) => {\n    var _ticket$createdBy;\n    if (!ticket || !user) return false;\n    return user.role === 'admin' || user.role === 'technician' || ((_ticket$createdBy = ticket.createdBy) === null || _ticket$createdBy === void 0 ? void 0 : _ticket$createdBy._id) === user._id && ticket.status === 'open';\n  },\n  /**\r\n   * Check if ticket can be assigned\r\n   * @param {Object} user - Current user\r\n   * @returns {Boolean} Can assign\r\n   */\n  canAssignTicket: user => {\n    return user && ['admin', 'technician'].includes(user.role);\n  },\n  /**\r\n   * Check if ticket can be resolved\r\n   * @param {Object} ticket - Ticket object\r\n   * @param {Object} user - Current user\r\n   * @returns {Boolean} Can resolve\r\n   */\n  canResolveTicket: (ticket, user) => {\n    var _ticket$assignedTo;\n    if (!ticket || !user) return false;\n    return user.role === 'admin' || user.role === 'technician' && ((_ticket$assignedTo = ticket.assignedTo) === null || _ticket$assignedTo === void 0 ? void 0 : _ticket$assignedTo._id) === user._id;\n  }\n};\n\n// ============================================\n// EXPORT\n// ============================================\n\nexport default ticketService;","map":{"version":3,"names":["api","ENDPOINTS","TICKETS","TICKETS_V2","COMMENTS","id","ATTACHMENTS","SLA","ACTIVITIES","STATS","METADATA","DEFAULT_PAGE_SIZE","MAX_RETRY_ATTEMPTS","buildQueryParams","filters","params","URLSearchParams","Object","entries","forEach","key","value","undefined","Array","isArray","v","append","toString","handleApiError","error","operation","_error$response","_error$response$data","_error$response2","_error$response2$data","_error$response3","_error$response3$data","_error$response4","console","errorMessage","response","data","message","errorCode","code","statusCode","status","success","timestamp","Date","toISOString","validateTicketData","ticketData","errors","title","trim","length","push","field","description","category","isValid","ticketService","createTicket","log","validation","post","getTickets","_response$data","_response$data$data","_response$data$data$t","queryString","page","limit","get","tickets","getTicket","updateTicket","updates","put","deleteTicket","delete","getComments","ticketId","_response$data2","_response$data2$data","_response$data2$data$","comments","warn","addComment","commentData","content","updateComment","commentId","deleteComment","uploadAttachment","file","onProgress","name","formData","FormData","headers","onUploadProgress","progressEvent","total","percentCompleted","Math","round","loaded","deleteAttachment","fileId","assignTicket","technicianId","reason","assignedTo","changeReason","getAvailableTechnicians","department","_response$data3","_response$data3$data","updateStatus","resolveTicket","resolutionData","resolution","reopenTicket","closeTicket","getDashboardStats","timeRange","getTicketStats","getSLACompliance","period","getTechnicianPerformance","bulkUpdateStatus","ticketIds","notes","patch","bulkAssignTickets","assigneeId","bulkUpdatePriority","priority","bulkDeleteTickets","exportTickets","format","responseType","generateExportUrl","defaults","baseURL","getMetadata","searchTickets","query","_response$data4","_response$data4$data","encodeURIComponent","getActivities","getSLAStatus","formatTicket","ticket","_ticket$priority","_ticket$priority2","_ticket$status","_ticket$status2","formattedCreatedAt","createdAt","toLocaleString","formattedUpdatedAt","updatedAt","formattedPriority","charAt","toUpperCase","slice","formattedStatus","isOverdue","slaDueDate","ageInDays","floor","hasComments","hasAttachments","attachments","canEditTicket","user","_ticket$createdBy","role","createdBy","_id","canAssignTicket","includes","canResolveTicket","_ticket$assignedTo"],"sources":["C:/Users/KADZ-TECH/Documents/dev/it-support-system/frontend/src/services/ticketService.js"],"sourcesContent":["/**\r\n * Bugema University IT Support System\r\n * Ticket Service - Complete API Integration\r\n * \r\n * @version 3.0.0\r\n * @description Handles all ticket-related API calls with proper error handling\r\n */\r\n\r\nimport api from './api';\r\n\r\n// ============================================\r\n// CONSTANTS & CONFIGURATION\r\n// ============================================\r\n\r\nconst ENDPOINTS = {\r\n  TICKETS: '/tickets',\r\n  TICKETS_V2: '/v2/tickets',\r\n  COMMENTS: (id) => `/tickets/${id}/comments`,\r\n  ATTACHMENTS: (id) => `/tickets/${id}/attachments`,\r\n  SLA: (id) => `/tickets/${id}/sla`,\r\n  ACTIVITIES: (id) => `/tickets/${id}/activities`,\r\n  STATS: '/dashboard/stats',\r\n  METADATA: '/v2/tickets/metadata'\r\n};\r\n\r\nconst DEFAULT_PAGE_SIZE = 20;\r\nconst MAX_RETRY_ATTEMPTS = 3;\r\n\r\n// ============================================\r\n// HELPER FUNCTIONS\r\n// ============================================\r\n\r\n/**\r\n * Build query parameters from filters object\r\n */\r\nconst buildQueryParams = (filters = {}) => {\r\n  const params = new URLSearchParams();\r\n  \r\n  Object.entries(filters).forEach(([key, value]) => {\r\n    if (value !== '' && value !== null && value !== undefined) {\r\n      if (Array.isArray(value)) {\r\n        value.forEach(v => params.append(key, v));\r\n      } else {\r\n        params.append(key, value);\r\n      }\r\n    }\r\n  });\r\n  \r\n  return params.toString();\r\n};\r\n\r\n/**\r\n * Enhanced error handler with retry logic\r\n */\r\nconst handleApiError = (error, operation) => {\r\n  console.error(`‚ùå [TICKET SERVICE] ${operation} failed:`, error);\r\n  \r\n  // Extract meaningful error message\r\n  const errorMessage = error.response?.data?.message \r\n    || error.response?.data?.error \r\n    || error.message \r\n    || 'An unexpected error occurred';\r\n  \r\n  const errorCode = error.response?.data?.code || 'UNKNOWN_ERROR';\r\n  const statusCode = error.response?.status || 500;\r\n  \r\n  throw {\r\n    success: false,\r\n    error: errorMessage,\r\n    code: errorCode,\r\n    status: statusCode,\r\n    timestamp: new Date().toISOString(),\r\n    operation\r\n  };\r\n};\r\n\r\n/**\r\n * Validate ticket data before submission\r\n */\r\nconst validateTicketData = (ticketData) => {\r\n  const errors = [];\r\n  \r\n  if (!ticketData.title || ticketData.title.trim().length < 5) {\r\n    errors.push({\r\n      field: 'title',\r\n      message: 'Title must be at least 5 characters long'\r\n    });\r\n  }\r\n  \r\n  if (!ticketData.description || ticketData.description.trim().length < 10) {\r\n    errors.push({\r\n      field: 'description',\r\n      message: 'Description must be at least 10 characters long'\r\n    });\r\n  }\r\n  \r\n  if (!ticketData.category) {\r\n    errors.push({\r\n      field: 'category',\r\n      message: 'Category is required'\r\n    });\r\n  }\r\n  \r\n  return {\r\n    isValid: errors.length === 0,\r\n    errors\r\n  };\r\n};\r\n\r\n// ============================================\r\n// MAIN TICKET SERVICE\r\n// ============================================\r\n\r\nconst ticketService = {\r\n  \r\n  // ==================== CORE TICKET OPERATIONS ====================\r\n  \r\n  /**\r\n   * Create a new ticket\r\n   * @param {Object} ticketData - Ticket information\r\n   * @returns {Promise<Object>} Created ticket\r\n   */\r\n  createTicket: async (ticketData) => {\r\n    try {\r\n      console.log('üìù [CREATE TICKET] Validating data...');\r\n      \r\n      // Validate before sending\r\n      const validation = validateTicketData(ticketData);\r\n      if (!validation.isValid) {\r\n        throw {\r\n          response: {\r\n            data: {\r\n              message: 'Validation failed',\r\n              errors: validation.errors,\r\n              code: 'VALIDATION_ERROR'\r\n            },\r\n            status: 400\r\n          }\r\n        };\r\n      }\r\n      \r\n      console.log('üìù [CREATE TICKET] Sending request...');\r\n      const response = await api.post(ENDPOINTS.TICKETS, ticketData);\r\n      \r\n      console.log('‚úÖ [CREATE TICKET] Success:', response.data);\r\n      return response.data;\r\n    } catch (error) {\r\n      return handleApiError(error, 'CREATE_TICKET');\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Get tickets with filters and pagination\r\n   * @param {Object} filters - Filter criteria\r\n   * @returns {Promise<Object>} Paginated tickets list\r\n   */\r\n  getTickets: async (filters = {}) => {\r\n    try {\r\n      console.log('üé´ [GET TICKETS] Fetching with filters:', filters);\r\n      \r\n      const queryString = buildQueryParams({\r\n        ...filters,\r\n        page: filters.page || 1,\r\n        limit: filters.limit || DEFAULT_PAGE_SIZE\r\n      });\r\n      \r\n      const response = await api.get(`${ENDPOINTS.TICKETS}?${queryString}`);\r\n      \r\n      console.log(`‚úÖ [GET TICKETS] Found ${response.data?.data?.tickets?.length || 0} tickets`);\r\n      return response.data;\r\n    } catch (error) {\r\n      return handleApiError(error, 'GET_TICKETS');\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Get single ticket by ID - FIXED VERSION\r\n   * @param {String} id - Ticket ID\r\n   * @returns {Promise<Object>} Ticket details\r\n   */\r\n  getTicket: async (id) => {\r\n    try {\r\n      console.log('üîç [GET TICKET] Fetching ticket:', id);\r\n      \r\n      if (!id || id === 'undefined' || id === 'null') {\r\n        throw {\r\n          response: {\r\n            data: {\r\n              message: 'Invalid ticket ID',\r\n              code: 'INVALID_TICKET_ID'\r\n            },\r\n            status: 400\r\n          }\r\n        };\r\n      }\r\n      \r\n      const response = await api.get(`${ENDPOINTS.TICKETS}/${id}`);\r\n      \r\n      console.log('‚úÖ [GET TICKET] Ticket fetched successfully');\r\n      return response.data;\r\n    } catch (error) {\r\n      return handleApiError(error, 'GET_TICKET');\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Update ticket\r\n   * @param {String} id - Ticket ID\r\n   * @param {Object} updates - Fields to update\r\n   * @returns {Promise<Object>} Updated ticket\r\n   */\r\n  updateTicket: async (id, updates) => {\r\n    try {\r\n      console.log('‚úèÔ∏è [UPDATE TICKET] Updating ticket:', id);\r\n      \r\n      const response = await api.put(`${ENDPOINTS.TICKETS}/${id}`, updates);\r\n      \r\n      console.log('‚úÖ [UPDATE TICKET] Ticket updated successfully');\r\n      return response.data;\r\n    } catch (error) {\r\n      return handleApiError(error, 'UPDATE_TICKET');\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Delete ticket (soft delete)\r\n   * @param {String} id - Ticket ID\r\n   * @returns {Promise<Object>} Deletion confirmation\r\n   */\r\n  deleteTicket: async (id) => {\r\n    try {\r\n      console.log('üóëÔ∏è [DELETE TICKET] Deleting ticket:', id);\r\n      \r\n      const response = await api.delete(`${ENDPOINTS.TICKETS}/${id}`);\r\n      \r\n      console.log('‚úÖ [DELETE TICKET] Ticket deleted successfully');\r\n      return response.data;\r\n    } catch (error) {\r\n      return handleApiError(error, 'DELETE_TICKET');\r\n    }\r\n  },\r\n\r\n  // ==================== COMMENT OPERATIONS ====================\r\n\r\n  /**\r\n   * Get comments for a ticket\r\n   * @param {String} ticketId - Ticket ID\r\n   * @returns {Promise<Array>} List of comments\r\n   */\r\n  getComments: async (ticketId) => {\r\n    try {\r\n      console.log('üí¨ [GET COMMENTS] Fetching comments for ticket:', ticketId);\r\n      \r\n      const response = await api.get(ENDPOINTS.COMMENTS(ticketId));\r\n      \r\n      console.log(`‚úÖ [GET COMMENTS] Found ${response.data?.data?.comments?.length || 0} comments`);\r\n      return response.data;\r\n    } catch (error) {\r\n      // Comments are not critical, return empty array on error\r\n      console.warn('‚ö†Ô∏è [GET COMMENTS] Failed to fetch comments:', error.message);\r\n      return {\r\n        success: false,\r\n        data: { comments: [] }\r\n      };\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Add comment to ticket\r\n   * @param {String} ticketId - Ticket ID\r\n   * @param {Object} commentData - Comment data\r\n   * @returns {Promise<Object>} Created comment\r\n   */\r\n  addComment: async (ticketId, commentData) => {\r\n    try {\r\n      console.log('üí¨ [ADD COMMENT] Adding comment to ticket:', ticketId);\r\n      \r\n      if (!commentData.content || commentData.content.trim().length === 0) {\r\n        throw {\r\n          response: {\r\n            data: {\r\n              message: 'Comment content is required',\r\n              code: 'VALIDATION_ERROR'\r\n            },\r\n            status: 400\r\n          }\r\n        };\r\n      }\r\n      \r\n      const response = await api.post(ENDPOINTS.COMMENTS(ticketId), commentData);\r\n      \r\n      console.log('‚úÖ [ADD COMMENT] Comment added successfully');\r\n      return response.data;\r\n    } catch (error) {\r\n      return handleApiError(error, 'ADD_COMMENT');\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Update comment\r\n   * @param {String} ticketId - Ticket ID\r\n   * @param {String} commentId - Comment ID\r\n   * @param {Object} updates - Comment updates\r\n   * @returns {Promise<Object>} Updated comment\r\n   */\r\n  updateComment: async (ticketId, commentId, updates) => {\r\n    try {\r\n      console.log('‚úèÔ∏è [UPDATE COMMENT] Updating comment:', commentId);\r\n      \r\n      const response = await api.put(\r\n        `${ENDPOINTS.COMMENTS(ticketId)}/${commentId}`,\r\n        updates\r\n      );\r\n      \r\n      console.log('‚úÖ [UPDATE COMMENT] Comment updated successfully');\r\n      return response.data;\r\n    } catch (error) {\r\n      return handleApiError(error, 'UPDATE_COMMENT');\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Delete comment\r\n   * @param {String} ticketId - Ticket ID\r\n   * @param {String} commentId - Comment ID\r\n   * @returns {Promise<Object>} Deletion confirmation\r\n   */\r\n  deleteComment: async (ticketId, commentId) => {\r\n    try {\r\n      console.log('üóëÔ∏è [DELETE COMMENT] Deleting comment:', commentId);\r\n      \r\n      const response = await api.delete(\r\n        `${ENDPOINTS.COMMENTS(ticketId)}/${commentId}`\r\n      );\r\n      \r\n      console.log('‚úÖ [DELETE COMMENT] Comment deleted successfully');\r\n      return response.data;\r\n    } catch (error) {\r\n      return handleApiError(error, 'DELETE_COMMENT');\r\n    }\r\n  },\r\n\r\n  // ==================== ATTACHMENT OPERATIONS ====================\r\n\r\n  /**\r\n   * Upload attachment to ticket\r\n   * @param {String} ticketId - Ticket ID\r\n   * @param {File} file - File to upload\r\n   * @param {Function} onProgress - Progress callback\r\n   * @returns {Promise<Object>} Upload result\r\n   */\r\n  uploadAttachment: async (ticketId, file, onProgress) => {\r\n    try {\r\n      console.log('üìé [UPLOAD ATTACHMENT] Uploading file:', file.name);\r\n      \r\n      const formData = new FormData();\r\n      formData.append('file', file);\r\n      \r\n      const response = await api.post(\r\n        ENDPOINTS.ATTACHMENTS(ticketId),\r\n        formData,\r\n        {\r\n          headers: {\r\n            'Content-Type': 'multipart/form-data',\r\n          },\r\n          onUploadProgress: (progressEvent) => {\r\n            if (onProgress && progressEvent.total) {\r\n              const percentCompleted = Math.round(\r\n                (progressEvent.loaded * 100) / progressEvent.total\r\n              );\r\n              onProgress(percentCompleted);\r\n            }\r\n          }\r\n        }\r\n      );\r\n      \r\n      console.log('‚úÖ [UPLOAD ATTACHMENT] File uploaded successfully');\r\n      return response.data;\r\n    } catch (error) {\r\n      return handleApiError(error, 'UPLOAD_ATTACHMENT');\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Delete attachment from ticket\r\n   * @param {String} ticketId - Ticket ID\r\n   * @param {String} fileId - File ID\r\n   * @returns {Promise<Object>} Deletion confirmation\r\n   */\r\n  deleteAttachment: async (ticketId, fileId) => {\r\n    try {\r\n      console.log('üóëÔ∏è [DELETE ATTACHMENT] Deleting file:', fileId);\r\n      \r\n      const response = await api.delete(\r\n        `${ENDPOINTS.ATTACHMENTS(ticketId)}/${fileId}`\r\n      );\r\n      \r\n      console.log('‚úÖ [DELETE ATTACHMENT] File deleted successfully');\r\n      return response.data;\r\n    } catch (error) {\r\n      return handleApiError(error, 'DELETE_ATTACHMENT');\r\n    }\r\n  },\r\n\r\n  // ==================== ASSIGNMENT OPERATIONS ====================\r\n\r\n  /**\r\n   * Assign ticket to technician\r\n   * @param {String} ticketId - Ticket ID\r\n   * @param {String} technicianId - Technician user ID\r\n   * @param {String} reason - Assignment reason\r\n   * @returns {Promise<Object>} Assignment result\r\n   */\r\n  assignTicket: async (ticketId, technicianId, reason = '') => {\r\n    try {\r\n      console.log('üë§ [ASSIGN TICKET] Assigning ticket:', ticketId, 'to:', technicianId);\r\n      \r\n      const response = await api.put(`${ENDPOINTS.TICKETS}/${ticketId}`, {\r\n        assignedTo: technicianId,\r\n        changeReason: reason || 'Ticket assigned to technician'\r\n      });\r\n      \r\n      console.log('‚úÖ [ASSIGN TICKET] Ticket assigned successfully');\r\n      return response.data;\r\n    } catch (error) {\r\n      return handleApiError(error, 'ASSIGN_TICKET');\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Get available technicians for assignment\r\n   * @param {String} department - Department filter\r\n   * @returns {Promise<Array>} List of available technicians\r\n   */\r\n  getAvailableTechnicians: async (department = '') => {\r\n    try {\r\n      console.log('üë• [GET TECHNICIANS] Fetching available technicians');\r\n      \r\n      const params = department ? `?department=${department}` : '';\r\n      const response = await api.get(`/users/technicians${params}`);\r\n      \r\n      console.log(`‚úÖ [GET TECHNICIANS] Found ${response.data?.data?.length || 0} technicians`);\r\n      return response.data;\r\n    } catch (error) {\r\n      return handleApiError(error, 'GET_TECHNICIANS');\r\n    }\r\n  },\r\n\r\n  // ==================== STATUS & WORKFLOW OPERATIONS ====================\r\n\r\n  /**\r\n   * Update ticket status\r\n   * @param {String} ticketId - Ticket ID\r\n   * @param {String} status - New status\r\n   * @param {String} reason - Status change reason\r\n   * @returns {Promise<Object>} Update result\r\n   */\r\n  updateStatus: async (ticketId, status, reason = '') => {\r\n    try {\r\n      console.log('üîÑ [UPDATE STATUS] Changing ticket status:', ticketId, 'to:', status);\r\n      \r\n      const response = await api.put(`${ENDPOINTS.TICKETS}/${ticketId}`, {\r\n        status,\r\n        changeReason: reason || `Status changed to ${status}`\r\n      });\r\n      \r\n      console.log('‚úÖ [UPDATE STATUS] Status updated successfully');\r\n      return response.data;\r\n    } catch (error) {\r\n      return handleApiError(error, 'UPDATE_STATUS');\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Resolve ticket\r\n   * @param {String} ticketId - Ticket ID\r\n   * @param {Object} resolutionData - Resolution details\r\n   * @returns {Promise<Object>} Resolution result\r\n   */\r\n  resolveTicket: async (ticketId, resolutionData) => {\r\n    try {\r\n      console.log('‚úîÔ∏è [RESOLVE TICKET] Resolving ticket:', ticketId);\r\n      \r\n      const response = await api.put(`${ENDPOINTS.TICKETS}/${ticketId}`, {\r\n        status: 'resolved',\r\n        resolution: resolutionData,\r\n        changeReason: 'Ticket resolved'\r\n      });\r\n      \r\n      console.log('‚úÖ [RESOLVE TICKET] Ticket resolved successfully');\r\n      return response.data;\r\n    } catch (error) {\r\n      return handleApiError(error, 'RESOLVE_TICKET');\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Reopen ticket\r\n   * @param {String} ticketId - Ticket ID\r\n   * @param {String} reason - Reopen reason\r\n   * @returns {Promise<Object>} Reopen result\r\n   */\r\n  reopenTicket: async (ticketId, reason = '') => {\r\n    try {\r\n      console.log('üîÑ [REOPEN TICKET] Reopening ticket:', ticketId);\r\n      \r\n      const response = await api.put(`${ENDPOINTS.TICKETS}/${ticketId}`, {\r\n        status: 'open',\r\n        changeReason: reason || 'Ticket reopened'\r\n      });\r\n      \r\n      console.log('‚úÖ [REOPEN TICKET] Ticket reopened successfully');\r\n      return response.data;\r\n    } catch (error) {\r\n      return handleApiError(error, 'REOPEN_TICKET');\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Close ticket\r\n   * @param {String} ticketId - Ticket ID\r\n   * @param {String} reason - Close reason\r\n   * @returns {Promise<Object>} Close result\r\n   */\r\n  closeTicket: async (ticketId, reason = '') => {\r\n    try {\r\n      console.log('üîí [CLOSE TICKET] Closing ticket:', ticketId);\r\n      \r\n      const response = await api.put(`${ENDPOINTS.TICKETS}/${ticketId}`, {\r\n        status: 'closed',\r\n        changeReason: reason || 'Ticket closed'\r\n      });\r\n      \r\n      console.log('‚úÖ [CLOSE TICKET] Ticket closed successfully');\r\n      return response.data;\r\n    } catch (error) {\r\n      return handleApiError(error, 'CLOSE_TICKET');\r\n    }\r\n  },\r\n\r\n  // ==================== ANALYTICS & STATISTICS ====================\r\n\r\n  /**\r\n   * Get dashboard statistics\r\n   * @param {String} timeRange - Time range for stats\r\n   * @returns {Promise<Object>} Dashboard stats\r\n   */\r\n  getDashboardStats: async (timeRange = '30d') => {\r\n    try {\r\n      console.log('üìä [DASHBOARD STATS] Fetching statistics');\r\n      \r\n      const response = await api.get(`${ENDPOINTS.STATS}?range=${timeRange}`);\r\n      \r\n      console.log('‚úÖ [DASHBOARD STATS] Statistics fetched successfully');\r\n      return response.data;\r\n    } catch (error) {\r\n      return handleApiError(error, 'GET_DASHBOARD_STATS');\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Get ticket statistics\r\n   * @param {Object} filters - Filter criteria\r\n   * @returns {Promise<Object>} Ticket statistics\r\n   */\r\n  getTicketStats: async (filters = {}) => {\r\n    try {\r\n      console.log('üìä [TICKET STATS] Fetching ticket statistics');\r\n      \r\n      const queryString = buildQueryParams(filters);\r\n      const response = await api.get(`${ENDPOINTS.TICKETS}/stats?${queryString}`);\r\n      \r\n      console.log('‚úÖ [TICKET STATS] Statistics fetched successfully');\r\n      return response.data;\r\n    } catch (error) {\r\n      return handleApiError(error, 'GET_TICKET_STATS');\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Get SLA compliance report\r\n   * @param {String} period - Time period\r\n   * @returns {Promise<Object>} SLA compliance data\r\n   */\r\n  getSLACompliance: async (period = 'month') => {\r\n    try {\r\n      console.log('üìà [SLA COMPLIANCE] Fetching SLA data');\r\n      \r\n      const response = await api.get(`${ENDPOINTS.TICKETS}/analytics/sla?period=${period}`);\r\n      \r\n      console.log('‚úÖ [SLA COMPLIANCE] SLA data fetched successfully');\r\n      return response.data;\r\n    } catch (error) {\r\n      return handleApiError(error, 'GET_SLA_COMPLIANCE');\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Get technician performance metrics\r\n   * @param {String} period - Time period\r\n   * @returns {Promise<Object>} Performance metrics\r\n   */\r\n  getTechnicianPerformance: async (period = 'month') => {\r\n    try {\r\n      console.log('üë• [TECHNICIAN PERFORMANCE] Fetching performance data');\r\n      \r\n      const response = await api.get(\r\n        `${ENDPOINTS.TICKETS}/analytics/technicians?period=${period}`\r\n      );\r\n      \r\n      console.log('‚úÖ [TECHNICIAN PERFORMANCE] Performance data fetched successfully');\r\n      return response.data;\r\n    } catch (error) {\r\n      return handleApiError(error, 'GET_TECHNICIAN_PERFORMANCE');\r\n    }\r\n  },\r\n\r\n  // ==================== BULK OPERATIONS ====================\r\n\r\n  /**\r\n   * Bulk update ticket status\r\n   * @param {Array} ticketIds - Array of ticket IDs\r\n   * @param {String} status - New status\r\n   * @param {String} notes - Update notes\r\n   * @returns {Promise<Object>} Bulk update result\r\n   */\r\n  bulkUpdateStatus: async (ticketIds, status, notes = '') => {\r\n    try {\r\n      console.log(`üì¶ [BULK UPDATE] Updating ${ticketIds.length} tickets`);\r\n      \r\n      const response = await api.patch(`${ENDPOINTS.TICKETS}/bulk/status`, {\r\n        ticketIds,\r\n        status,\r\n        notes\r\n      });\r\n      \r\n      console.log('‚úÖ [BULK UPDATE] Tickets updated successfully');\r\n      return response.data;\r\n    } catch (error) {\r\n      return handleApiError(error, 'BULK_UPDATE_STATUS');\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Bulk assign tickets\r\n   * @param {Array} ticketIds - Array of ticket IDs\r\n   * @param {String} assigneeId - Assignee user ID\r\n   * @param {String} notes - Assignment notes\r\n   * @returns {Promise<Object>} Bulk assignment result\r\n   */\r\n  bulkAssignTickets: async (ticketIds, assigneeId, notes = '') => {\r\n    try {\r\n      console.log(`üì¶ [BULK ASSIGN] Assigning ${ticketIds.length} tickets`);\r\n      \r\n      const response = await api.patch(`${ENDPOINTS.TICKETS}/bulk/assign`, {\r\n        ticketIds,\r\n        assigneeId,\r\n        notes\r\n      });\r\n      \r\n      console.log('‚úÖ [BULK ASSIGN] Tickets assigned successfully');\r\n      return response.data;\r\n    } catch (error) {\r\n      return handleApiError(error, 'BULK_ASSIGN_TICKETS');\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Bulk update priority\r\n   * @param {Array} ticketIds - Array of ticket IDs\r\n   * @param {String} priority - New priority\r\n   * @param {String} notes - Update notes\r\n   * @returns {Promise<Object>} Bulk update result\r\n   */\r\n  bulkUpdatePriority: async (ticketIds, priority, notes = '') => {\r\n    try {\r\n      console.log(`üì¶ [BULK PRIORITY] Updating priority for ${ticketIds.length} tickets`);\r\n      \r\n      const response = await api.patch(`${ENDPOINTS.TICKETS}/bulk/priority`, {\r\n        ticketIds,\r\n        priority,\r\n        notes\r\n      });\r\n      \r\n      console.log('‚úÖ [BULK PRIORITY] Priorities updated successfully');\r\n      return response.data;\r\n    } catch (error) {\r\n      return handleApiError(error, 'BULK_UPDATE_PRIORITY');\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Bulk delete tickets\r\n   * @param {Array} ticketIds - Array of ticket IDs\r\n   * @returns {Promise<Object>} Bulk deletion result\r\n   */\r\n  bulkDeleteTickets: async (ticketIds) => {\r\n    try {\r\n      console.log(`üóëÔ∏è [BULK DELETE] Deleting ${ticketIds.length} tickets`);\r\n      \r\n      const response = await api.post(`${ENDPOINTS.TICKETS}/bulk/delete`, {\r\n        ticketIds\r\n      });\r\n      \r\n      console.log('‚úÖ [BULK DELETE] Tickets deleted successfully');\r\n      return response.data;\r\n    } catch (error) {\r\n      return handleApiError(error, 'BULK_DELETE_TICKETS');\r\n    }\r\n  },\r\n\r\n  // ==================== EXPORT OPERATIONS ====================\r\n\r\n  /**\r\n   * Export tickets to file\r\n   * @param {Object} filters - Export filters\r\n   * @param {String} format - Export format (csv, xlsx, pdf)\r\n   * @returns {Promise<Blob>} File blob\r\n   */\r\n  exportTickets: async (filters = {}, format = 'csv') => {\r\n    try {\r\n      console.log('üì• [EXPORT TICKETS] Exporting tickets as', format);\r\n      \r\n      const queryString = buildQueryParams({ ...filters, format });\r\n      const response = await api.get(`${ENDPOINTS.TICKETS}/export?${queryString}`, {\r\n        responseType: 'blob'\r\n      });\r\n      \r\n      console.log('‚úÖ [EXPORT TICKETS] Export successful');\r\n      return response.data;\r\n    } catch (error) {\r\n      return handleApiError(error, 'EXPORT_TICKETS');\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Generate export URL\r\n   * @param {Object} filters - Export filters\r\n   * @param {String} format - Export format\r\n   * @returns {String} Export URL\r\n   */\r\n  generateExportUrl: (filters = {}, format = 'csv') => {\r\n    const queryString = buildQueryParams({ ...filters, format });\r\n    return `${api.defaults.baseURL}${ENDPOINTS.TICKETS}/export?${queryString}`;\r\n  },\r\n\r\n  // ==================== METADATA & UTILITIES ====================\r\n\r\n  /**\r\n   * Get ticket metadata (categories, priorities, etc.)\r\n   * @returns {Promise<Object>} Metadata\r\n   */\r\n  getMetadata: async () => {\r\n    try {\r\n      console.log('üìã [METADATA] Fetching ticket metadata');\r\n      \r\n      const response = await api.get(ENDPOINTS.METADATA);\r\n      \r\n      console.log('‚úÖ [METADATA] Metadata fetched successfully');\r\n      return response.data;\r\n    } catch (error) {\r\n      return handleApiError(error, 'GET_METADATA');\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Search tickets with suggestions\r\n   * @param {String} query - Search query\r\n   * @returns {Promise<Array>} Search suggestions\r\n   */\r\n  searchTickets: async (query) => {\r\n    try {\r\n      if (!query || query.length < 2) {\r\n        return { success: true, data: [] };\r\n      }\r\n      \r\n      console.log('üîç [SEARCH] Searching tickets:', query);\r\n      \r\n      const response = await api.get(\r\n        `${ENDPOINTS.TICKETS_V2}/search/suggestions?q=${encodeURIComponent(query)}`\r\n      );\r\n      \r\n      console.log(`‚úÖ [SEARCH] Found ${response.data?.data?.length || 0} results`);\r\n      return response.data;\r\n    } catch (error) {\r\n      console.warn('‚ö†Ô∏è [SEARCH] Search failed:', error.message);\r\n      return { success: false, data: [] };\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Get ticket activities/history\r\n   * @param {String} ticketId - Ticket ID\r\n   * @returns {Promise<Array>} Activity history\r\n   */\r\n  getActivities: async (ticketId) => {\r\n    try {\r\n      console.log('üìú [ACTIVITIES] Fetching ticket activities:', ticketId);\r\n      \r\n      const response = await api.get(ENDPOINTS.ACTIVITIES(ticketId));\r\n      \r\n      console.log('‚úÖ [ACTIVITIES] Activities fetched successfully');\r\n      return response.data;\r\n    } catch (error) {\r\n      console.warn('‚ö†Ô∏è [ACTIVITIES] Failed to fetch activities:', error.message);\r\n      return { success: false, data: [] };\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Get SLA status for ticket\r\n   * @param {String} ticketId - Ticket ID\r\n   * @returns {Promise<Object>} SLA status\r\n   */\r\n  getSLAStatus: async (ticketId) => {\r\n    try {\r\n      console.log('‚è±Ô∏è [SLA STATUS] Fetching SLA status for ticket:', ticketId);\r\n      \r\n      const response = await api.get(ENDPOINTS.SLA(ticketId));\r\n      \r\n      console.log('‚úÖ [SLA STATUS] SLA status fetched successfully');\r\n      return response.data;\r\n    } catch (error) {\r\n      console.warn('‚ö†Ô∏è [SLA STATUS] Failed to fetch SLA status:', error.message);\r\n      return { success: false, data: null };\r\n    }\r\n  },\r\n\r\n  // ==================== VALIDATION UTILITIES ====================\r\n\r\n  /**\r\n   * Validate ticket data\r\n   * @param {Object} ticketData - Ticket data to validate\r\n   * @returns {Object} Validation result\r\n   */\r\n  validateTicketData,\r\n\r\n  /**\r\n   * Format ticket for display\r\n   * @param {Object} ticket - Raw ticket data\r\n   * @returns {Object} Formatted ticket\r\n   */\r\n  formatTicket: (ticket) => {\r\n    if (!ticket) return null;\r\n    \r\n    return {\r\n      ...ticket,\r\n      formattedCreatedAt: new Date(ticket.createdAt).toLocaleString(),\r\n      formattedUpdatedAt: new Date(ticket.updatedAt).toLocaleString(),\r\n      formattedPriority: ticket.priority?.charAt(0).toUpperCase() + ticket.priority?.slice(1),\r\n      formattedStatus: ticket.status?.charAt(0).toUpperCase() + ticket.status?.slice(1),\r\n      isOverdue: ticket.slaDueDate ? new Date(ticket.slaDueDate) < new Date() : false,\r\n      ageInDays: Math.floor((new Date() - new Date(ticket.createdAt)) / (1000 * 60 * 60 * 24)),\r\n      hasComments: ticket.comments && ticket.comments.length > 0,\r\n      hasAttachments: ticket.attachments && ticket.attachments.length > 0\r\n    };\r\n  },\r\n\r\n  /**\r\n   * Check if ticket can be edited by user\r\n   * @param {Object} ticket - Ticket object\r\n   * @param {Object} user - Current user\r\n   * @returns {Boolean} Can edit\r\n   */\r\n  canEditTicket: (ticket, user) => {\r\n    if (!ticket || !user) return false;\r\n    \r\n    return (\r\n      user.role === 'admin' ||\r\n      user.role === 'technician' ||\r\n      (ticket.createdBy?._id === user._id && ticket.status === 'open')\r\n    );\r\n  },\r\n\r\n  /**\r\n   * Check if ticket can be assigned\r\n   * @param {Object} user - Current user\r\n   * @returns {Boolean} Can assign\r\n   */\r\n  canAssignTicket: (user) => {\r\n    return user && ['admin', 'technician'].includes(user.role);\r\n  },\r\n\r\n  /**\r\n   * Check if ticket can be resolved\r\n   * @param {Object} ticket - Ticket object\r\n   * @param {Object} user - Current user\r\n   * @returns {Boolean} Can resolve\r\n   */\r\n  canResolveTicket: (ticket, user) => {\r\n    if (!ticket || !user) return false;\r\n    \r\n    return (\r\n      user.role === 'admin' ||\r\n      (user.role === 'technician' && ticket.assignedTo?._id === user._id)\r\n    );\r\n  }\r\n};\r\n\r\n// ============================================\r\n// EXPORT\r\n// ============================================\r\n\r\nexport default ticketService;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}