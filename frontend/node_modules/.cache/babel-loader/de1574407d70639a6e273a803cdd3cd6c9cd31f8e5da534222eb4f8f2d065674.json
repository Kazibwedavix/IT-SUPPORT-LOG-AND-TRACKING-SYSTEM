{"ast":null,"code":"// frontend/src/services/authService.js - SIMPLIFIED VERSION\nimport axios from 'axios';\nconst API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:5000/api';\n\n// Create axios instance without interceptors\nconst authAxios = axios.create({\n  baseURL: API_BASE_URL,\n  timeout: 15000,\n  headers: {\n    'Content-Type': 'application/json'\n  }\n});\n\n// Simple token helper\nconst getToken = () => {\n  return localStorage.getItem('accessToken') || localStorage.getItem('token') || sessionStorage.getItem('accessToken') || sessionStorage.getItem('token');\n};\n\n// Main auth service\nconst authService = {\n  /**\r\n   * User login with credentials\r\n   */\n  login: async (email, password, rememberMe = false) => {\n    try {\n      console.log('ðŸ” Login attempt:', email);\n      const response = await authAxios.post('/auth/login', {\n        email: email.toLowerCase().trim(),\n        password: password.trim(),\n        rememberMe\n      });\n      if (!response.data.success) {\n        throw new Error(response.data.message || 'Login failed');\n      }\n      const {\n        data\n      } = response.data;\n\n      // Store token if received\n      if (data.accessToken) {\n        if (rememberMe) {\n          localStorage.setItem('accessToken', data.accessToken);\n        } else {\n          sessionStorage.setItem('accessToken', data.accessToken);\n        }\n\n        // Also store in 'token' for backward compatibility\n        if (rememberMe) {\n          localStorage.setItem('token', data.accessToken);\n        } else {\n          sessionStorage.setItem('token', data.accessToken);\n        }\n      }\n\n      // Store user data\n      if (data.user) {\n        const userData = JSON.stringify(data.user);\n        if (rememberMe) {\n          localStorage.setItem('user', userData);\n        } else {\n          sessionStorage.setItem('user', userData);\n        }\n      }\n      console.log('âœ… Login successful');\n      return {\n        success: true,\n        message: response.data.message,\n        data: data\n      };\n    } catch (error) {\n      var _error$response, _error$response$data;\n      console.error('âŒ Login error:', error.message);\n      let errorMessage = 'Login failed. Please check your credentials.';\n      if ((_error$response = error.response) !== null && _error$response !== void 0 && (_error$response$data = _error$response.data) !== null && _error$response$data !== void 0 && _error$response$data.message) {\n        errorMessage = error.response.data.message;\n      }\n      throw new Error(errorMessage);\n    }\n  },\n  /**\r\n   * Register new user\r\n   */\n  register: async userData => {\n    try {\n      console.log('ðŸ“ Registration attempt:', userData.email);\n      const response = await authAxios.post('/auth/register', userData);\n      if (!response.data.success) {\n        throw new Error(response.data.message || 'Registration failed');\n      }\n      const {\n        data\n      } = response.data;\n\n      // Check if email verification is required\n      const requiresVerification = data.requiresEmailVerification || false;\n      if (requiresVerification) {\n        console.log('ðŸ“§ Email verification required');\n        return {\n          success: true,\n          message: 'Registration successful! Please check your email to verify your account.',\n          data: {\n            requiresEmailVerification: true\n          }\n        };\n      }\n\n      // Auto-login if no verification required\n      if (data.accessToken && data.user) {\n        localStorage.setItem('accessToken', data.accessToken);\n        localStorage.setItem('token', data.accessToken);\n        localStorage.setItem('user', JSON.stringify(data.user));\n      }\n      console.log('âœ… Registration successful');\n      return {\n        success: true,\n        message: 'Registration successful! You are now logged in.',\n        data: data\n      };\n    } catch (error) {\n      var _error$response2, _error$response2$data, _error$response3, _error$response3$data;\n      console.error('âŒ Registration error:', error.message);\n      let errorMessage = 'Registration failed. Please try again.';\n      if ((_error$response2 = error.response) !== null && _error$response2 !== void 0 && (_error$response2$data = _error$response2.data) !== null && _error$response2$data !== void 0 && _error$response2$data.message) {\n        errorMessage = error.response.data.message;\n      } else if ((_error$response3 = error.response) !== null && _error$response3 !== void 0 && (_error$response3$data = _error$response3.data) !== null && _error$response3$data !== void 0 && _error$response3$data.errors) {\n        const errors = error.response.data.errors;\n        if (Array.isArray(errors)) {\n          errorMessage = errors.map(err => err.message || err.msg).join('. ');\n        }\n      }\n      throw new Error(errorMessage);\n    }\n  },\n  /**\r\n   * Get current authenticated user (WITHOUT interceptor loops)\r\n   */\n  getCurrentUser: async () => {\n    try {\n      var _response$data$data$u;\n      console.log('ðŸ” Getting current user...');\n      const token = getToken();\n      if (!token) {\n        throw new Error('No authentication token found');\n      }\n\n      // Use a fresh axios instance to avoid interceptor conflicts\n      const directAxios = axios.create({\n        baseURL: API_BASE_URL,\n        timeout: 10000,\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${token}`\n        }\n      });\n      const response = await directAxios.get('/auth/me');\n      if (!response.data.success) {\n        throw new Error(response.data.message || 'Failed to get user data');\n      }\n      console.log('âœ… Got current user:', (_response$data$data$u = response.data.data.user) === null || _response$data$data$u === void 0 ? void 0 : _response$data$data$u.email);\n      return {\n        success: true,\n        data: response.data.data.user\n      };\n    } catch (error) {\n      var _error$response4;\n      console.error('âŒ getCurrentUser error:', error.message);\n      if (((_error$response4 = error.response) === null || _error$response4 === void 0 ? void 0 : _error$response4.status) === 401) {\n        // Clear tokens on 401\n        localStorage.removeItem('accessToken');\n        localStorage.removeItem('token');\n        localStorage.removeItem('user');\n        sessionStorage.removeItem('accessToken');\n        sessionStorage.removeItem('token');\n        sessionStorage.removeItem('user');\n        throw new Error('Session expired. Please login again.');\n      }\n      throw new Error('Failed to get user data');\n    }\n  },\n  /**\r\n   * Logout user\r\n   */\n  logout: async () => {\n    try {\n      console.log('ðŸ‘‹ Logging out...');\n      const token = getToken();\n      if (token) {\n        await authAxios.post('/auth/logout', {}, {\n          headers: {\n            'Authorization': `Bearer ${token}`\n          }\n        });\n      }\n\n      // Clear local storage\n      localStorage.removeItem('accessToken');\n      localStorage.removeItem('token');\n      localStorage.removeItem('user');\n      sessionStorage.removeItem('accessToken');\n      sessionStorage.removeItem('token');\n      sessionStorage.removeItem('user');\n      console.log('âœ… Logout successful');\n      return {\n        success: true,\n        message: 'Logged out successfully'\n      };\n    } catch (error) {\n      console.error('âŒ Logout error:', error);\n\n      // Still clear tokens even if API call fails\n      localStorage.removeItem('accessToken');\n      localStorage.removeItem('token');\n      localStorage.removeItem('user');\n      sessionStorage.removeItem('accessToken');\n      sessionStorage.removeItem('token');\n      sessionStorage.removeItem('user');\n      return {\n        success: true,\n        message: 'Logged out locally'\n      };\n    }\n  },\n  /**\r\n   * Refresh token\r\n   */\n  refreshToken: async () => {\n    try {\n      var _response$data$data;\n      console.log('ðŸ”„ Refreshing token...');\n      const refreshToken = localStorage.getItem('refreshToken') || sessionStorage.getItem('refreshToken');\n      if (!refreshToken) {\n        throw new Error('No refresh token available');\n      }\n      const response = await authAxios.post('/auth/refresh', {\n        refreshToken\n      });\n      if (!response.data.success || !((_response$data$data = response.data.data) !== null && _response$data$data !== void 0 && _response$data$data.accessToken)) {\n        throw new Error('Token refresh failed');\n      }\n      const {\n        accessToken,\n        user\n      } = response.data.data;\n\n      // Store new token\n      localStorage.setItem('accessToken', accessToken);\n      localStorage.setItem('token', accessToken);\n      if (user) {\n        localStorage.setItem('user', JSON.stringify(user));\n      }\n      console.log('âœ… Token refreshed');\n      return {\n        success: true,\n        data: response.data.data\n      };\n    } catch (error) {\n      console.error('âŒ Token refresh error:', error);\n      throw error;\n    }\n  },\n  // ... other methods (simplified versions)\n  forgotPassword: async email => {\n    try {\n      const response = await authAxios.post('/auth/forgot-password', {\n        email\n      });\n      return {\n        success: true,\n        message: response.data.message || 'Password reset email sent'\n      };\n    } catch (error) {\n      var _error$response5, _error$response5$data;\n      throw new Error(((_error$response5 = error.response) === null || _error$response5 === void 0 ? void 0 : (_error$response5$data = _error$response5.data) === null || _error$response5$data === void 0 ? void 0 : _error$response5$data.message) || 'Failed to send reset email');\n    }\n  },\n  resetPassword: async (token, newPassword) => {\n    try {\n      const response = await authAxios.post('/auth/reset-password', {\n        token,\n        password: newPassword\n      });\n      return {\n        success: true,\n        message: response.data.message || 'Password reset successful'\n      };\n    } catch (error) {\n      var _error$response6, _error$response6$data;\n      throw new Error(((_error$response6 = error.response) === null || _error$response6 === void 0 ? void 0 : (_error$response6$data = _error$response6.data) === null || _error$response6$data === void 0 ? void 0 : _error$response6$data.message) || 'Failed to reset password');\n    }\n  },\n  verifyEmail: async token => {\n    try {\n      const response = await authAxios.get(`/auth/verify-email/${token}`);\n      return {\n        success: true,\n        message: response.data.message || 'Email verified successfully'\n      };\n    } catch (error) {\n      var _error$response7, _error$response7$data;\n      throw new Error(((_error$response7 = error.response) === null || _error$response7 === void 0 ? void 0 : (_error$response7$data = _error$response7.data) === null || _error$response7$data === void 0 ? void 0 : _error$response7$data.message) || 'Failed to verify email');\n    }\n  },\n  checkUsername: async username => {\n    try {\n      const response = await authAxios.post('/auth/check-username', {\n        username\n      });\n      return {\n        success: true,\n        data: response.data.data\n      };\n    } catch (error) {\n      throw new Error('Failed to check username availability');\n    }\n  },\n  checkEmail: async email => {\n    try {\n      const response = await authAxios.post('/auth/check-email', {\n        email\n      });\n      return {\n        success: true,\n        data: response.data.data\n      };\n    } catch (error) {\n      throw new Error('Failed to check email availability');\n    }\n  }\n};\nexport default authService;","map":{"version":3,"names":["axios","API_BASE_URL","process","env","REACT_APP_API_URL","authAxios","create","baseURL","timeout","headers","getToken","localStorage","getItem","sessionStorage","authService","login","email","password","rememberMe","console","log","response","post","toLowerCase","trim","data","success","Error","message","accessToken","setItem","user","userData","JSON","stringify","error","_error$response","_error$response$data","errorMessage","register","requiresVerification","requiresEmailVerification","_error$response2","_error$response2$data","_error$response3","_error$response3$data","errors","Array","isArray","map","err","msg","join","getCurrentUser","_response$data$data$u","token","directAxios","get","_error$response4","status","removeItem","logout","refreshToken","_response$data$data","forgotPassword","_error$response5","_error$response5$data","resetPassword","newPassword","_error$response6","_error$response6$data","verifyEmail","_error$response7","_error$response7$data","checkUsername","username","checkEmail"],"sources":["C:/Users/KADZ-TECH/Documents/dev/it-support-system/frontend/src/services/authService.js"],"sourcesContent":["// frontend/src/services/authService.js - SIMPLIFIED VERSION\r\nimport axios from 'axios';\r\n\r\nconst API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:5000/api';\r\n\r\n// Create axios instance without interceptors\r\nconst authAxios = axios.create({\r\n  baseURL: API_BASE_URL,\r\n  timeout: 15000,\r\n  headers: {\r\n    'Content-Type': 'application/json',\r\n  },\r\n});\r\n\r\n// Simple token helper\r\nconst getToken = () => {\r\n  return localStorage.getItem('accessToken') || \r\n         localStorage.getItem('token') ||\r\n         sessionStorage.getItem('accessToken') || \r\n         sessionStorage.getItem('token');\r\n};\r\n\r\n// Main auth service\r\nconst authService = {\r\n  /**\r\n   * User login with credentials\r\n   */\r\n  login: async (email, password, rememberMe = false) => {\r\n    try {\r\n      console.log('ðŸ” Login attempt:', email);\r\n      \r\n      const response = await authAxios.post('/auth/login', {\r\n        email: email.toLowerCase().trim(),\r\n        password: password.trim(),\r\n        rememberMe\r\n      });\r\n\r\n      if (!response.data.success) {\r\n        throw new Error(response.data.message || 'Login failed');\r\n      }\r\n\r\n      const { data } = response.data;\r\n      \r\n      // Store token if received\r\n      if (data.accessToken) {\r\n        if (rememberMe) {\r\n          localStorage.setItem('accessToken', data.accessToken);\r\n        } else {\r\n          sessionStorage.setItem('accessToken', data.accessToken);\r\n        }\r\n        \r\n        // Also store in 'token' for backward compatibility\r\n        if (rememberMe) {\r\n          localStorage.setItem('token', data.accessToken);\r\n        } else {\r\n          sessionStorage.setItem('token', data.accessToken);\r\n        }\r\n      }\r\n      \r\n      // Store user data\r\n      if (data.user) {\r\n        const userData = JSON.stringify(data.user);\r\n        if (rememberMe) {\r\n          localStorage.setItem('user', userData);\r\n        } else {\r\n          sessionStorage.setItem('user', userData);\r\n        }\r\n      }\r\n\r\n      console.log('âœ… Login successful');\r\n      \r\n      return {\r\n        success: true,\r\n        message: response.data.message,\r\n        data: data\r\n      };\r\n\r\n    } catch (error) {\r\n      console.error('âŒ Login error:', error.message);\r\n      \r\n      let errorMessage = 'Login failed. Please check your credentials.';\r\n      \r\n      if (error.response?.data?.message) {\r\n        errorMessage = error.response.data.message;\r\n      }\r\n      \r\n      throw new Error(errorMessage);\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Register new user\r\n   */\r\n  register: async (userData) => {\r\n    try {\r\n      console.log('ðŸ“ Registration attempt:', userData.email);\r\n      \r\n      const response = await authAxios.post('/auth/register', userData);\r\n      \r\n      if (!response.data.success) {\r\n        throw new Error(response.data.message || 'Registration failed');\r\n      }\r\n\r\n      const { data } = response.data;\r\n      \r\n      // Check if email verification is required\r\n      const requiresVerification = data.requiresEmailVerification || false;\r\n      \r\n      if (requiresVerification) {\r\n        console.log('ðŸ“§ Email verification required');\r\n        return {\r\n          success: true,\r\n          message: 'Registration successful! Please check your email to verify your account.',\r\n          data: {\r\n            requiresEmailVerification: true\r\n          }\r\n        };\r\n      }\r\n\r\n      // Auto-login if no verification required\r\n      if (data.accessToken && data.user) {\r\n        localStorage.setItem('accessToken', data.accessToken);\r\n        localStorage.setItem('token', data.accessToken);\r\n        localStorage.setItem('user', JSON.stringify(data.user));\r\n      }\r\n\r\n      console.log('âœ… Registration successful');\r\n      \r\n      return {\r\n        success: true,\r\n        message: 'Registration successful! You are now logged in.',\r\n        data: data\r\n      };\r\n\r\n    } catch (error) {\r\n      console.error('âŒ Registration error:', error.message);\r\n      \r\n      let errorMessage = 'Registration failed. Please try again.';\r\n      \r\n      if (error.response?.data?.message) {\r\n        errorMessage = error.response.data.message;\r\n      } else if (error.response?.data?.errors) {\r\n        const errors = error.response.data.errors;\r\n        if (Array.isArray(errors)) {\r\n          errorMessage = errors.map(err => err.message || err.msg).join('. ');\r\n        }\r\n      }\r\n      \r\n      throw new Error(errorMessage);\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Get current authenticated user (WITHOUT interceptor loops)\r\n   */\r\n  getCurrentUser: async () => {\r\n    try {\r\n      console.log('ðŸ” Getting current user...');\r\n      \r\n      const token = getToken();\r\n      \r\n      if (!token) {\r\n        throw new Error('No authentication token found');\r\n      }\r\n      \r\n      // Use a fresh axios instance to avoid interceptor conflicts\r\n      const directAxios = axios.create({\r\n        baseURL: API_BASE_URL,\r\n        timeout: 10000,\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Authorization': `Bearer ${token}`\r\n        }\r\n      });\r\n      \r\n      const response = await directAxios.get('/auth/me');\r\n      \r\n      if (!response.data.success) {\r\n        throw new Error(response.data.message || 'Failed to get user data');\r\n      }\r\n\r\n      console.log('âœ… Got current user:', response.data.data.user?.email);\r\n      \r\n      return {\r\n        success: true,\r\n        data: response.data.data.user\r\n      };\r\n\r\n    } catch (error) {\r\n      console.error('âŒ getCurrentUser error:', error.message);\r\n      \r\n      if (error.response?.status === 401) {\r\n        // Clear tokens on 401\r\n        localStorage.removeItem('accessToken');\r\n        localStorage.removeItem('token');\r\n        localStorage.removeItem('user');\r\n        sessionStorage.removeItem('accessToken');\r\n        sessionStorage.removeItem('token');\r\n        sessionStorage.removeItem('user');\r\n        \r\n        throw new Error('Session expired. Please login again.');\r\n      }\r\n\r\n      throw new Error('Failed to get user data');\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Logout user\r\n   */\r\n  logout: async () => {\r\n    try {\r\n      console.log('ðŸ‘‹ Logging out...');\r\n      \r\n      const token = getToken();\r\n      \r\n      if (token) {\r\n        await authAxios.post('/auth/logout', {}, {\r\n          headers: {\r\n            'Authorization': `Bearer ${token}`\r\n          }\r\n        });\r\n      }\r\n      \r\n      // Clear local storage\r\n      localStorage.removeItem('accessToken');\r\n      localStorage.removeItem('token');\r\n      localStorage.removeItem('user');\r\n      sessionStorage.removeItem('accessToken');\r\n      sessionStorage.removeItem('token');\r\n      sessionStorage.removeItem('user');\r\n      \r\n      console.log('âœ… Logout successful');\r\n      \r\n      return {\r\n        success: true,\r\n        message: 'Logged out successfully'\r\n      };\r\n\r\n    } catch (error) {\r\n      console.error('âŒ Logout error:', error);\r\n      \r\n      // Still clear tokens even if API call fails\r\n      localStorage.removeItem('accessToken');\r\n      localStorage.removeItem('token');\r\n      localStorage.removeItem('user');\r\n      sessionStorage.removeItem('accessToken');\r\n      sessionStorage.removeItem('token');\r\n      sessionStorage.removeItem('user');\r\n      \r\n      return {\r\n        success: true,\r\n        message: 'Logged out locally'\r\n      };\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Refresh token\r\n   */\r\n  refreshToken: async () => {\r\n    try {\r\n      console.log('ðŸ”„ Refreshing token...');\r\n      \r\n      const refreshToken = localStorage.getItem('refreshToken') || \r\n                          sessionStorage.getItem('refreshToken');\r\n      \r\n      if (!refreshToken) {\r\n        throw new Error('No refresh token available');\r\n      }\r\n      \r\n      const response = await authAxios.post('/auth/refresh', {\r\n        refreshToken\r\n      });\r\n      \r\n      if (!response.data.success || !response.data.data?.accessToken) {\r\n        throw new Error('Token refresh failed');\r\n      }\r\n      \r\n      const { accessToken, user } = response.data.data;\r\n      \r\n      // Store new token\r\n      localStorage.setItem('accessToken', accessToken);\r\n      localStorage.setItem('token', accessToken);\r\n      \r\n      if (user) {\r\n        localStorage.setItem('user', JSON.stringify(user));\r\n      }\r\n      \r\n      console.log('âœ… Token refreshed');\r\n      \r\n      return {\r\n        success: true,\r\n        data: response.data.data\r\n      };\r\n\r\n    } catch (error) {\r\n      console.error('âŒ Token refresh error:', error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  // ... other methods (simplified versions)\r\n  forgotPassword: async (email) => {\r\n    try {\r\n      const response = await authAxios.post('/auth/forgot-password', { email });\r\n      return {\r\n        success: true,\r\n        message: response.data.message || 'Password reset email sent'\r\n      };\r\n    } catch (error) {\r\n      throw new Error(error.response?.data?.message || 'Failed to send reset email');\r\n    }\r\n  },\r\n\r\n  resetPassword: async (token, newPassword) => {\r\n    try {\r\n      const response = await authAxios.post('/auth/reset-password', {\r\n        token,\r\n        password: newPassword\r\n      });\r\n      return {\r\n        success: true,\r\n        message: response.data.message || 'Password reset successful'\r\n      };\r\n    } catch (error) {\r\n      throw new Error(error.response?.data?.message || 'Failed to reset password');\r\n    }\r\n  },\r\n\r\n  verifyEmail: async (token) => {\r\n    try {\r\n      const response = await authAxios.get(`/auth/verify-email/${token}`);\r\n      return {\r\n        success: true,\r\n        message: response.data.message || 'Email verified successfully'\r\n      };\r\n    } catch (error) {\r\n      throw new Error(error.response?.data?.message || 'Failed to verify email');\r\n    }\r\n  },\r\n\r\n  checkUsername: async (username) => {\r\n    try {\r\n      const response = await authAxios.post('/auth/check-username', { username });\r\n      return {\r\n        success: true,\r\n        data: response.data.data\r\n      };\r\n    } catch (error) {\r\n      throw new Error('Failed to check username availability');\r\n    }\r\n  },\r\n\r\n  checkEmail: async (email) => {\r\n    try {\r\n      const response = await authAxios.post('/auth/check-email', { email });\r\n      return {\r\n        success: true,\r\n        data: response.data.data\r\n      };\r\n    } catch (error) {\r\n      throw new Error('Failed to check email availability');\r\n    }\r\n  }\r\n};\r\n\r\nexport default authService;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}