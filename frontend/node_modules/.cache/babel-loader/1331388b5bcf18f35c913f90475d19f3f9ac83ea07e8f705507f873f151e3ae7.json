{"ast":null,"code":"import _objectSpread from\"C:/Users/KADZ-TECH/Documents/dev/it-support-system/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{useParams,useNavigate}from'react-router-dom';import{useAuth}from'../context/AuthContext';import Navbar from'../components/Navbar';import LoadingSpinner from'../components/LoadingSpinner';import ErrorBoundary from'../components/ErrorBoundary';import ticketService from'../services/ticketService';import'../styles/TicketDetail.css';/**\r\n * TicketDetail Component\r\n * \r\n * Displays detailed information about a specific ticket including\r\n * comments, activities, and status updates.\r\n * \r\n * @version 3.0.0\r\n * @author IT Support Team\r\n */import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";const TicketDetail=()=>{var _ticket$_id,_ticket$issueType,_ticket$issueType2,_ticket$createdBy,_ticket$createdBy2,_ticket$assignedTo,_ticket$assignedTo2;const{id}=useParams();const navigate=useNavigate();const{user,isAuthenticated}=useAuth();const[ticket,setTicket]=useState(null);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const[comments,setComments]=useState([]);const[newComment,setNewComment]=useState('');const[submittingComment,setSubmittingComment]=useState(false);const[updatingStatus,setUpdatingStatus]=useState(false);// Validate ticket ID before fetching\nconst isValidTicketId=ticketId=>{if(!ticketId||ticketId==='create'||ticketId==='undefined'||ticketId==='null'||ticketId.length<10){return false;}// Check if it looks like a valid MongoDB ObjectId or UUID\nconst objectIdPattern=/^[0-9a-fA-F]{24}$/;const uuidPattern=/^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i;return objectIdPattern.test(ticketId)||uuidPattern.test(ticketId);};useEffect(()=>{// Check authentication first\nif(!isAuthenticated){navigate('/login');return;}// Validate ticket ID\nif(!isValidTicketId(id)){console.error('Invalid ticket ID:',id);setError('Invalid ticket ID or ticket not found');setLoading(false);navigate('/tickets');return;}// Fetch ticket data\nfetchTicketData();},[id,isAuthenticated,navigate]);/**\r\n   * Fetches ticket data with error handling\r\n   */const fetchTicketData=async()=>{try{setLoading(true);setError(null);// Fetch ticket details\nconst response=await ticketService.getTicket(id);if(response&&response.success){var _response$data;// Extract ticket from response\nconst ticketData=((_response$data=response.data)===null||_response$data===void 0?void 0:_response$data.ticket)||response.data||response.ticket||response;if(ticketData&&(ticketData._id||ticketData.id)){setTicket(ticketData);// Only fetch comments if the endpoint exists\nif(ticketService.getComments&&typeof ticketService.getComments==='function'){try{const commentsResponse=await ticketService.getComments(id);if(commentsResponse&&commentsResponse.success){var _commentsResponse$dat;setComments(((_commentsResponse$dat=commentsResponse.data)===null||_commentsResponse$dat===void 0?void 0:_commentsResponse$dat.comments)||commentsResponse.comments||commentsResponse.data||[]);}}catch(commentsError){console.warn('Comments endpoint not available:',commentsError.message);// This is not critical, so we don't set an error\n}}}else{throw new Error('Invalid ticket data structure received');}}else{throw new Error((response===null||response===void 0?void 0:response.message)||'Failed to load ticket details');}}catch(error){console.error('Error fetching ticket data:',error);// Handle specific error cases\nlet errorMessage='Unable to load ticket. Please try again.';if(error.response){switch(error.response.status){case 404:errorMessage='Ticket not found. It may have been deleted.';break;case 401:errorMessage='Session expired. Please log in again.';navigate('/login');break;case 403:errorMessage='You do not have permission to view this ticket.';break;}}else if(error.request){errorMessage='Unable to connect to server. Please check your connection.';}setError({message:errorMessage,type:'fetch',retryable:true});}finally{setLoading(false);}};/**\r\n   * Handles adding a new comment\r\n   */const handleAddComment=async()=>{if(!newComment.trim()||!ticket)return;try{setSubmittingComment(true);const commentData={content:newComment.trim(),author:(user===null||user===void 0?void 0:user.id)||(user===null||user===void 0?void 0:user._id),isInternal:(user===null||user===void 0?void 0:user.role)==='technician'||(user===null||user===void 0?void 0:user.role)==='admin',createdAt:new Date().toISOString()};// Check if addComment method exists\nif(ticketService.addComment&&typeof ticketService.addComment==='function'){await ticketService.addComment(ticket._id,commentData);// Refresh comments\nif(ticketService.getComments){try{const commentsResponse=await ticketService.getComments(ticket._id);if(commentsResponse&&commentsResponse.success){var _commentsResponse$dat2;setComments(((_commentsResponse$dat2=commentsResponse.data)===null||_commentsResponse$dat2===void 0?void 0:_commentsResponse$dat2.comments)||commentsResponse.comments||commentsResponse.data||[]);}}catch(refreshError){console.warn('Could not refresh comments:',refreshError);}}// Add comment locally if refresh fails\nsetComments(prev=>[commentData,...prev]);setNewComment('');}else{// Fallback: add comment locally\nsetComments(prev=>[commentData,...prev]);setNewComment('');}}catch(error){console.error('Error adding comment:',error);setError({message:'Failed to add comment. Please try again.',type:'comment',retryable:false});}finally{setSubmittingComment(false);}};/**\r\n   * Handles status update\r\n   */const handleStatusUpdate=async newStatus=>{if(!ticket||updatingStatus)return;try{setUpdatingStatus(true);if(ticketService.updateTicket&&typeof ticketService.updateTicket==='function'){await ticketService.updateTicket(ticket._id,{status:newStatus});// Update local state\nsetTicket(prev=>_objectSpread(_objectSpread({},prev),{},{status:newStatus,updatedAt:new Date().toISOString()}));}else{// Fallback: update local state only\nsetTicket(prev=>_objectSpread(_objectSpread({},prev),{},{status:newStatus,updatedAt:new Date().toISOString()}));}}catch(error){console.error('Error updating ticket status:',error);setError({message:'Failed to update ticket status.',type:'status',retryable:false});}finally{setUpdatingStatus(false);}};/**\r\n   * Formats date for display\r\n   */const formatDate=dateString=>{if(!dateString)return'N/A';try{const date=new Date(dateString);const now=new Date();const diffMs=now-date;const diffHours=diffMs/(1000*60*60);if(diffHours<1){return'Just now';}else if(diffHours<24){return\"\".concat(Math.floor(diffHours),\"h ago\");}else{return date.toLocaleString('en-US',{year:'numeric',month:'short',day:'numeric',hour:'2-digit',minute:'2-digit'});}}catch(error){return'Invalid date';}};/**\r\n   * Gets status display text\r\n   */const getStatusText=status=>{const statusMap={'open':'Open','in-progress':'In Progress','awaiting-user':'Awaiting User','resolved':'Resolved','closed':'Closed'};return statusMap[status]||status;};/**\r\n   * Gets urgency display text\r\n   */const getUrgencyText=urgency=>{const urgencyMap={'low':'Low','medium':'Medium','high':'High','critical':'Critical'};return urgencyMap[urgency]||urgency;};/**\r\n   * Handles retry action\r\n   */const handleRetry=()=>{setError(null);fetchTicketData();};// Loading state\nif(loading){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Navbar,{}),/*#__PURE__*/_jsx(\"div\",{className:\"loading-container\",children:/*#__PURE__*/_jsx(LoadingSpinner,{message:\"Loading ticket details...\",fullPage:true})})]});}// Error state\nif(error&&!ticket){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Navbar,{}),/*#__PURE__*/_jsx(\"div\",{className:\"error-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"error-content\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Unable to Load Ticket\"}),/*#__PURE__*/_jsx(\"p\",{className:\"error-message\",children:error.message}),/*#__PURE__*/_jsxs(\"div\",{className:\"error-actions\",children:[error.retryable&&/*#__PURE__*/_jsx(\"button\",{onClick:handleRetry,className:\"btn btn-primary\",children:\"Try Again\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('/tickets'),className:\"btn btn-secondary\",children:\"Back to Tickets\"})]})]})})]});}// No ticket found\nif(!ticket){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Navbar,{}),/*#__PURE__*/_jsx(\"div\",{className:\"not-found\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"not-found-content\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Ticket Not Found\"}),/*#__PURE__*/_jsx(\"p\",{children:\"The ticket you're looking for doesn't exist or has been deleted.\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('/tickets'),className:\"btn btn-primary\",children:\"View All Tickets\"})]})})]});}return/*#__PURE__*/_jsx(ErrorBoundary,{children:/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Navbar,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"ticket-detail-page\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"ticket-header\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"ticket-meta\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"ticket-id\",children:[\"Ticket #\",ticket.ticketNumber||((_ticket$_id=ticket._id)===null||_ticket$_id===void 0?void 0:_ticket$_id.substring(0,8).toUpperCase())]}),/*#__PURE__*/_jsx(\"span\",{className:\"status-badge status-\".concat(ticket.status),children:getStatusText(ticket.status)}),/*#__PURE__*/_jsx(\"span\",{className:\"urgency-badge urgency-\".concat(ticket.urgency),children:getUrgencyText(ticket.urgency)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"ticket-actions\",children:[((user===null||user===void 0?void 0:user.role)==='technician'||(user===null||user===void 0?void 0:user.role)==='admin')&&/*#__PURE__*/_jsxs(\"select\",{className:\"status-select\",value:ticket.status,onChange:e=>handleStatusUpdate(e.target.value),disabled:updatingStatus,\"aria-label\":\"Update ticket status\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"open\",children:\"Open\"}),/*#__PURE__*/_jsx(\"option\",{value:\"in-progress\",children:\"In Progress\"}),/*#__PURE__*/_jsx(\"option\",{value:\"awaiting-user\",children:\"Awaiting User\"}),/*#__PURE__*/_jsx(\"option\",{value:\"resolved\",children:\"Resolved\"}),/*#__PURE__*/_jsx(\"option\",{value:\"closed\",children:\"Closed\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('/tickets'),className:\"btn btn-secondary\",children:\"Back to List\"})]})]}),error&&/*#__PURE__*/_jsxs(\"div\",{className:\"alert alert-\".concat(error.type),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"alert-content\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Error:\"}),\" \",error.message]}),/*#__PURE__*/_jsx(\"div\",{className:\"alert-actions\",children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>setError(null),className:\"btn btn-sm btn-text\",children:\"Dismiss\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"ticket-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"ticket-main\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"ticket-title\",children:ticket.title}),/*#__PURE__*/_jsxs(\"div\",{className:\"ticket-description\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Description\"}),/*#__PURE__*/_jsx(\"div\",{className:\"description-content\",children:ticket.description})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"ticket-info-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"info-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"info-label\",children:\"Issue Type:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"info-value\",children:((_ticket$issueType=ticket.issueType)===null||_ticket$issueType===void 0?void 0:_ticket$issueType.charAt(0).toUpperCase())+((_ticket$issueType2=ticket.issueType)===null||_ticket$issueType2===void 0?void 0:_ticket$issueType2.slice(1))||'Not specified'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"info-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"info-label\",children:\"Created:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"info-value\",children:formatDate(ticket.createdAt)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"info-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"info-label\",children:\"Last Updated:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"info-value\",children:formatDate(ticket.updatedAt)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"info-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"info-label\",children:\"Created By:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"info-value\",children:((_ticket$createdBy=ticket.createdBy)===null||_ticket$createdBy===void 0?void 0:_ticket$createdBy.name)||((_ticket$createdBy2=ticket.createdBy)===null||_ticket$createdBy2===void 0?void 0:_ticket$createdBy2.email)||'Unknown'})]}),ticket.assignedTo&&/*#__PURE__*/_jsxs(\"div\",{className:\"info-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"info-label\",children:\"Assigned To:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"info-value\",children:((_ticket$assignedTo=ticket.assignedTo)===null||_ticket$assignedTo===void 0?void 0:_ticket$assignedTo.name)||((_ticket$assignedTo2=ticket.assignedTo)===null||_ticket$assignedTo2===void 0?void 0:_ticket$assignedTo2.email)||'Unassigned'})]}),ticket.category&&/*#__PURE__*/_jsxs(\"div\",{className:\"info-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"info-label\",children:\"Category:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"info-value\",children:ticket.category})]}),ticket.department&&/*#__PURE__*/_jsxs(\"div\",{className:\"info-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"info-label\",children:\"Department:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"info-value\",children:ticket.department})]}),ticket.location&&/*#__PURE__*/_jsxs(\"div\",{className:\"info-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"info-label\",children:\"Location:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"info-value\",children:ticket.location})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"comments-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Activity & Comments\"}),/*#__PURE__*/_jsx(\"div\",{className:\"comments-list\",children:comments.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"no-comments\",children:/*#__PURE__*/_jsx(\"p\",{children:\"No comments yet. Be the first to add one.\"})}):comments.map((comment,index)=>{var _comment$author,_comment$author2;return/*#__PURE__*/_jsxs(\"div\",{className:\"comment-item\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"comment-header\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"comment-author\",children:((_comment$author=comment.author)===null||_comment$author===void 0?void 0:_comment$author.name)||((_comment$author2=comment.author)===null||_comment$author2===void 0?void 0:_comment$author2.email)||'Unknown'}),/*#__PURE__*/_jsx(\"span\",{className:\"comment-date\",children:formatDate(comment.createdAt)}),comment.isInternal&&/*#__PURE__*/_jsx(\"span\",{className:\"internal-badge\",children:\"Internal Note\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"comment-content\",children:comment.content})]},comment._id||index);})}),/*#__PURE__*/_jsxs(\"div\",{className:\"add-comment\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Add Comment\"}),/*#__PURE__*/_jsx(\"textarea\",{value:newComment,onChange:e=>setNewComment(e.target.value),placeholder:\"Type your comment here...\",rows:\"4\",maxLength:\"2000\",\"aria-label\":\"Add comment\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"comment-actions\",children:[(user===null||user===void 0?void 0:user.role)==='technician'||(user===null||user===void 0?void 0:user.role)==='admin'?/*#__PURE__*/_jsxs(\"div\",{className:\"internal-note-option\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",id:\"internal-note\",\"aria-label\":\"Mark as internal note\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"internal-note\",children:\"Internal note (visible to staff only)\"})]}):null,/*#__PURE__*/_jsx(\"button\",{onClick:handleAddComment,disabled:!newComment.trim()||submittingComment,className:\"btn btn-primary\",children:submittingComment?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"span\",{className:\"comment-spinner\"}),\"Posting...\"]}):'Post Comment'})]})]})]})]})]})]})});};export default TicketDetail;","map":{"version":3,"names":["React","useState","useEffect","useParams","useNavigate","useAuth","Navbar","LoadingSpinner","ErrorBoundary","ticketService","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","TicketDetail","_ticket$_id","_ticket$issueType","_ticket$issueType2","_ticket$createdBy","_ticket$createdBy2","_ticket$assignedTo","_ticket$assignedTo2","id","navigate","user","isAuthenticated","ticket","setTicket","loading","setLoading","error","setError","comments","setComments","newComment","setNewComment","submittingComment","setSubmittingComment","updatingStatus","setUpdatingStatus","isValidTicketId","ticketId","length","objectIdPattern","uuidPattern","test","console","fetchTicketData","response","getTicket","success","_response$data","ticketData","data","_id","getComments","commentsResponse","_commentsResponse$dat","commentsError","warn","message","Error","errorMessage","status","request","type","retryable","handleAddComment","trim","commentData","content","author","isInternal","role","createdAt","Date","toISOString","addComment","_commentsResponse$dat2","refreshError","prev","handleStatusUpdate","newStatus","updateTicket","_objectSpread","updatedAt","formatDate","dateString","date","now","diffMs","diffHours","concat","Math","floor","toLocaleString","year","month","day","hour","minute","getStatusText","statusMap","getUrgencyText","urgency","urgencyMap","handleRetry","children","className","fullPage","onClick","ticketNumber","substring","toUpperCase","value","onChange","e","target","disabled","title","description","issueType","charAt","slice","createdBy","name","email","assignedTo","category","department","location","map","comment","index","_comment$author","_comment$author2","placeholder","rows","maxLength","htmlFor"],"sources":["C:/Users/KADZ-TECH/Documents/dev/it-support-system/frontend/src/pages/TicketDetail.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport Navbar from '../components/Navbar';\r\nimport LoadingSpinner from '../components/LoadingSpinner';\r\nimport ErrorBoundary from '../components/ErrorBoundary';\r\nimport ticketService from '../services/ticketService';\r\nimport '../styles/TicketDetail.css';\r\n\r\n/**\r\n * TicketDetail Component\r\n * \r\n * Displays detailed information about a specific ticket including\r\n * comments, activities, and status updates.\r\n * \r\n * @version 3.0.0\r\n * @author IT Support Team\r\n */\r\nconst TicketDetail = () => {\r\n  const { id } = useParams();\r\n  const navigate = useNavigate();\r\n  const { user, isAuthenticated } = useAuth();\r\n  \r\n  const [ticket, setTicket] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [comments, setComments] = useState([]);\r\n  const [newComment, setNewComment] = useState('');\r\n  const [submittingComment, setSubmittingComment] = useState(false);\r\n  const [updatingStatus, setUpdatingStatus] = useState(false);\r\n\r\n  // Validate ticket ID before fetching\r\n  const isValidTicketId = (ticketId) => {\r\n    if (!ticketId || \r\n        ticketId === 'create' || \r\n        ticketId === 'undefined' || \r\n        ticketId === 'null' ||\r\n        ticketId.length < 10) {\r\n      return false;\r\n    }\r\n    \r\n    // Check if it looks like a valid MongoDB ObjectId or UUID\r\n    const objectIdPattern = /^[0-9a-fA-F]{24}$/;\r\n    const uuidPattern = /^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i;\r\n    \r\n    return objectIdPattern.test(ticketId) || uuidPattern.test(ticketId);\r\n  };\r\n\r\n  useEffect(() => {\r\n    // Check authentication first\r\n    if (!isAuthenticated) {\r\n      navigate('/login');\r\n      return;\r\n    }\r\n\r\n    // Validate ticket ID\r\n    if (!isValidTicketId(id)) {\r\n      console.error('Invalid ticket ID:', id);\r\n      setError('Invalid ticket ID or ticket not found');\r\n      setLoading(false);\r\n      navigate('/tickets');\r\n      return;\r\n    }\r\n\r\n    // Fetch ticket data\r\n    fetchTicketData();\r\n  }, [id, isAuthenticated, navigate]);\r\n\r\n  /**\r\n   * Fetches ticket data with error handling\r\n   */\r\n  const fetchTicketData = async () => {\r\n    try {\r\n      setLoading(true);\r\n      setError(null);\r\n      \r\n      // Fetch ticket details\r\n      const response = await ticketService.getTicket(id);\r\n      \r\n      if (response && response.success) {\r\n        // Extract ticket from response\r\n        const ticketData = response.data?.ticket || response.data || response.ticket || response;\r\n        \r\n        if (ticketData && (ticketData._id || ticketData.id)) {\r\n          setTicket(ticketData);\r\n          \r\n          // Only fetch comments if the endpoint exists\r\n          if (ticketService.getComments && typeof ticketService.getComments === 'function') {\r\n            try {\r\n              const commentsResponse = await ticketService.getComments(id);\r\n              if (commentsResponse && commentsResponse.success) {\r\n                setComments(commentsResponse.data?.comments || \r\n                           commentsResponse.comments || \r\n                           commentsResponse.data || \r\n                           []);\r\n              }\r\n            } catch (commentsError) {\r\n              console.warn('Comments endpoint not available:', commentsError.message);\r\n              // This is not critical, so we don't set an error\r\n            }\r\n          }\r\n        } else {\r\n          throw new Error('Invalid ticket data structure received');\r\n        }\r\n      } else {\r\n        throw new Error(response?.message || 'Failed to load ticket details');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching ticket data:', error);\r\n      \r\n      // Handle specific error cases\r\n      let errorMessage = 'Unable to load ticket. Please try again.';\r\n      \r\n      if (error.response) {\r\n        switch (error.response.status) {\r\n          case 404:\r\n            errorMessage = 'Ticket not found. It may have been deleted.';\r\n            break;\r\n          case 401:\r\n            errorMessage = 'Session expired. Please log in again.';\r\n            navigate('/login');\r\n            break;\r\n          case 403:\r\n            errorMessage = 'You do not have permission to view this ticket.';\r\n            break;\r\n        }\r\n      } else if (error.request) {\r\n        errorMessage = 'Unable to connect to server. Please check your connection.';\r\n      }\r\n      \r\n      setError({\r\n        message: errorMessage,\r\n        type: 'fetch',\r\n        retryable: true\r\n      });\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Handles adding a new comment\r\n   */\r\n  const handleAddComment = async () => {\r\n    if (!newComment.trim() || !ticket) return;\r\n    \r\n    try {\r\n      setSubmittingComment(true);\r\n      \r\n      const commentData = {\r\n        content: newComment.trim(),\r\n        author: user?.id || user?._id,\r\n        isInternal: user?.role === 'technician' || user?.role === 'admin',\r\n        createdAt: new Date().toISOString()\r\n      };\r\n      \r\n      // Check if addComment method exists\r\n      if (ticketService.addComment && typeof ticketService.addComment === 'function') {\r\n        await ticketService.addComment(ticket._id, commentData);\r\n        \r\n        // Refresh comments\r\n        if (ticketService.getComments) {\r\n          try {\r\n            const commentsResponse = await ticketService.getComments(ticket._id);\r\n            if (commentsResponse && commentsResponse.success) {\r\n              setComments(commentsResponse.data?.comments || \r\n                         commentsResponse.comments || \r\n                         commentsResponse.data || \r\n                         []);\r\n            }\r\n          } catch (refreshError) {\r\n            console.warn('Could not refresh comments:', refreshError);\r\n          }\r\n        }\r\n        \r\n        // Add comment locally if refresh fails\r\n        setComments(prev => [commentData, ...prev]);\r\n        setNewComment('');\r\n      } else {\r\n        // Fallback: add comment locally\r\n        setComments(prev => [commentData, ...prev]);\r\n        setNewComment('');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error adding comment:', error);\r\n      setError({\r\n        message: 'Failed to add comment. Please try again.',\r\n        type: 'comment',\r\n        retryable: false\r\n      });\r\n    } finally {\r\n      setSubmittingComment(false);\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Handles status update\r\n   */\r\n  const handleStatusUpdate = async (newStatus) => {\r\n    if (!ticket || updatingStatus) return;\r\n    \r\n    try {\r\n      setUpdatingStatus(true);\r\n      \r\n      if (ticketService.updateTicket && typeof ticketService.updateTicket === 'function') {\r\n        await ticketService.updateTicket(ticket._id, { status: newStatus });\r\n        \r\n        // Update local state\r\n        setTicket(prev => ({\r\n          ...prev,\r\n          status: newStatus,\r\n          updatedAt: new Date().toISOString()\r\n        }));\r\n      } else {\r\n        // Fallback: update local state only\r\n        setTicket(prev => ({\r\n          ...prev,\r\n          status: newStatus,\r\n          updatedAt: new Date().toISOString()\r\n        }));\r\n      }\r\n    } catch (error) {\r\n      console.error('Error updating ticket status:', error);\r\n      setError({\r\n        message: 'Failed to update ticket status.',\r\n        type: 'status',\r\n        retryable: false\r\n      });\r\n    } finally {\r\n      setUpdatingStatus(false);\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Formats date for display\r\n   */\r\n  const formatDate = (dateString) => {\r\n    if (!dateString) return 'N/A';\r\n    \r\n    try {\r\n      const date = new Date(dateString);\r\n      const now = new Date();\r\n      const diffMs = now - date;\r\n      const diffHours = diffMs / (1000 * 60 * 60);\r\n      \r\n      if (diffHours < 1) {\r\n        return 'Just now';\r\n      } else if (diffHours < 24) {\r\n        return `${Math.floor(diffHours)}h ago`;\r\n      } else {\r\n        return date.toLocaleString('en-US', {\r\n          year: 'numeric',\r\n          month: 'short',\r\n          day: 'numeric',\r\n          hour: '2-digit',\r\n          minute: '2-digit'\r\n        });\r\n      }\r\n    } catch (error) {\r\n      return 'Invalid date';\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Gets status display text\r\n   */\r\n  const getStatusText = (status) => {\r\n    const statusMap = {\r\n      'open': 'Open',\r\n      'in-progress': 'In Progress',\r\n      'awaiting-user': 'Awaiting User',\r\n      'resolved': 'Resolved',\r\n      'closed': 'Closed'\r\n    };\r\n    return statusMap[status] || status;\r\n  };\r\n\r\n  /**\r\n   * Gets urgency display text\r\n   */\r\n  const getUrgencyText = (urgency) => {\r\n    const urgencyMap = {\r\n      'low': 'Low',\r\n      'medium': 'Medium',\r\n      'high': 'High',\r\n      'critical': 'Critical'\r\n    };\r\n    return urgencyMap[urgency] || urgency;\r\n  };\r\n\r\n  /**\r\n   * Handles retry action\r\n   */\r\n  const handleRetry = () => {\r\n    setError(null);\r\n    fetchTicketData();\r\n  };\r\n\r\n  // Loading state\r\n  if (loading) {\r\n    return (\r\n      <>\r\n        <Navbar />\r\n        <div className=\"loading-container\">\r\n          <LoadingSpinner \r\n            message=\"Loading ticket details...\" \r\n            fullPage={true}\r\n          />\r\n        </div>\r\n      </>\r\n    );\r\n  }\r\n\r\n  // Error state\r\n  if (error && !ticket) {\r\n    return (\r\n      <>\r\n        <Navbar />\r\n        <div className=\"error-container\">\r\n          <div className=\"error-content\">\r\n            <h2>Unable to Load Ticket</h2>\r\n            <p className=\"error-message\">{error.message}</p>\r\n            <div className=\"error-actions\">\r\n              {error.retryable && (\r\n                <button onClick={handleRetry} className=\"btn btn-primary\">\r\n                  Try Again\r\n                </button>\r\n              )}\r\n              <button onClick={() => navigate('/tickets')} className=\"btn btn-secondary\">\r\n                Back to Tickets\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </>\r\n    );\r\n  }\r\n\r\n  // No ticket found\r\n  if (!ticket) {\r\n    return (\r\n      <>\r\n        <Navbar />\r\n        <div className=\"not-found\">\r\n          <div className=\"not-found-content\">\r\n            <h2>Ticket Not Found</h2>\r\n            <p>The ticket you're looking for doesn't exist or has been deleted.</p>\r\n            <button onClick={() => navigate('/tickets')} className=\"btn btn-primary\">\r\n              View All Tickets\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <ErrorBoundary>\r\n      <>\r\n        <Navbar />\r\n        <div className=\"ticket-detail-page\">\r\n          {/* Header with ticket info */}\r\n          <div className=\"ticket-header\">\r\n            <div className=\"ticket-meta\">\r\n              <span className=\"ticket-id\">\r\n                Ticket #{ticket.ticketNumber || ticket._id?.substring(0, 8).toUpperCase()}\r\n              </span>\r\n              <span className={`status-badge status-${ticket.status}`}>\r\n                {getStatusText(ticket.status)}\r\n              </span>\r\n              <span className={`urgency-badge urgency-${ticket.urgency}`}>\r\n                {getUrgencyText(ticket.urgency)}\r\n              </span>\r\n            </div>\r\n            \r\n            <div className=\"ticket-actions\">\r\n              {(user?.role === 'technician' || user?.role === 'admin') && (\r\n                <select \r\n                  className=\"status-select\"\r\n                  value={ticket.status}\r\n                  onChange={(e) => handleStatusUpdate(e.target.value)}\r\n                  disabled={updatingStatus}\r\n                  aria-label=\"Update ticket status\"\r\n                >\r\n                  <option value=\"open\">Open</option>\r\n                  <option value=\"in-progress\">In Progress</option>\r\n                  <option value=\"awaiting-user\">Awaiting User</option>\r\n                  <option value=\"resolved\">Resolved</option>\r\n                  <option value=\"closed\">Closed</option>\r\n                </select>\r\n              )}\r\n              \r\n              <button onClick={() => navigate('/tickets')} className=\"btn btn-secondary\">\r\n                Back to List\r\n              </button>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Error Display */}\r\n          {error && (\r\n            <div className={`alert alert-${error.type}`}>\r\n              <div className=\"alert-content\">\r\n                <strong>Error:</strong> {error.message}\r\n              </div>\r\n              <div className=\"alert-actions\">\r\n                <button onClick={() => setError(null)} className=\"btn btn-sm btn-text\">\r\n                  Dismiss\r\n                </button>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Main content */}\r\n          <div className=\"ticket-content\">\r\n            <div className=\"ticket-main\">\r\n              <h1 className=\"ticket-title\">{ticket.title}</h1>\r\n              \r\n              <div className=\"ticket-description\">\r\n                <h3>Description</h3>\r\n                <div className=\"description-content\">\r\n                  {ticket.description}\r\n                </div>\r\n              </div>\r\n              \r\n              <div className=\"ticket-info-grid\">\r\n                <div className=\"info-item\">\r\n                  <span className=\"info-label\">Issue Type:</span>\r\n                  <span className=\"info-value\">\r\n                    {ticket.issueType?.charAt(0).toUpperCase() + ticket.issueType?.slice(1) || 'Not specified'}\r\n                  </span>\r\n                </div>\r\n                \r\n                <div className=\"info-item\">\r\n                  <span className=\"info-label\">Created:</span>\r\n                  <span className=\"info-value\">{formatDate(ticket.createdAt)}</span>\r\n                </div>\r\n                \r\n                <div className=\"info-item\">\r\n                  <span className=\"info-label\">Last Updated:</span>\r\n                  <span className=\"info-value\">{formatDate(ticket.updatedAt)}</span>\r\n                </div>\r\n                \r\n                <div className=\"info-item\">\r\n                  <span className=\"info-label\">Created By:</span>\r\n                  <span className=\"info-value\">\r\n                    {ticket.createdBy?.name || ticket.createdBy?.email || 'Unknown'}\r\n                  </span>\r\n                </div>\r\n                \r\n                {ticket.assignedTo && (\r\n                  <div className=\"info-item\">\r\n                    <span className=\"info-label\">Assigned To:</span>\r\n                    <span className=\"info-value\">\r\n                      {ticket.assignedTo?.name || ticket.assignedTo?.email || 'Unassigned'}\r\n                    </span>\r\n                  </div>\r\n                )}\r\n                \r\n                {ticket.category && (\r\n                  <div className=\"info-item\">\r\n                    <span className=\"info-label\">Category:</span>\r\n                    <span className=\"info-value\">{ticket.category}</span>\r\n                  </div>\r\n                )}\r\n                \r\n                {ticket.department && (\r\n                  <div className=\"info-item\">\r\n                    <span className=\"info-label\">Department:</span>\r\n                    <span className=\"info-value\">{ticket.department}</span>\r\n                  </div>\r\n                )}\r\n                \r\n                {ticket.location && (\r\n                  <div className=\"info-item\">\r\n                    <span className=\"info-label\">Location:</span>\r\n                    <span className=\"info-value\">{ticket.location}</span>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n            \r\n            {/* Comments section */}\r\n            <div className=\"comments-section\">\r\n              <h3>Activity & Comments</h3>\r\n              \r\n              <div className=\"comments-list\">\r\n                {comments.length === 0 ? (\r\n                  <div className=\"no-comments\">\r\n                    <p>No comments yet. Be the first to add one.</p>\r\n                  </div>\r\n                ) : (\r\n                  comments.map((comment, index) => (\r\n                    <div key={comment._id || index} className=\"comment-item\">\r\n                      <div className=\"comment-header\">\r\n                        <span className=\"comment-author\">\r\n                          {comment.author?.name || comment.author?.email || 'Unknown'}\r\n                        </span>\r\n                        <span className=\"comment-date\">\r\n                          {formatDate(comment.createdAt)}\r\n                        </span>\r\n                        {comment.isInternal && (\r\n                          <span className=\"internal-badge\">Internal Note</span>\r\n                        )}\r\n                      </div>\r\n                      <div className=\"comment-content\">\r\n                        {comment.content}\r\n                      </div>\r\n                    </div>\r\n                  ))\r\n                )}\r\n              </div>\r\n              \r\n              {/* Add comment form */}\r\n              <div className=\"add-comment\">\r\n                <h4>Add Comment</h4>\r\n                <textarea\r\n                  value={newComment}\r\n                  onChange={(e) => setNewComment(e.target.value)}\r\n                  placeholder=\"Type your comment here...\"\r\n                  rows=\"4\"\r\n                  maxLength=\"2000\"\r\n                  aria-label=\"Add comment\"\r\n                />\r\n                <div className=\"comment-actions\">\r\n                  {user?.role === 'technician' || user?.role === 'admin' ? (\r\n                    <div className=\"internal-note-option\">\r\n                      <input \r\n                        type=\"checkbox\" \r\n                        id=\"internal-note\"\r\n                        aria-label=\"Mark as internal note\"\r\n                      />\r\n                      <label htmlFor=\"internal-note\">Internal note (visible to staff only)</label>\r\n                    </div>\r\n                  ) : null}\r\n                  <button\r\n                    onClick={handleAddComment}\r\n                    disabled={!newComment.trim() || submittingComment}\r\n                    className=\"btn btn-primary\"\r\n                  >\r\n                    {submittingComment ? (\r\n                      <>\r\n                        <span className=\"comment-spinner\"></span>\r\n                        Posting...\r\n                      </>\r\n                    ) : (\r\n                      'Post Comment'\r\n                    )}\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </>\r\n    </ErrorBoundary>\r\n  );\r\n};\r\n\r\nexport default TicketDetail;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}