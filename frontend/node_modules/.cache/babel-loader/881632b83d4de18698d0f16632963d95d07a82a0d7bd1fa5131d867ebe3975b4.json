{"ast":null,"code":"import{useQuery,useMutation,useQueryClient}from'@tanstack/react-query';import userService from'../services/userService';import ticketService from'../services/ticketService';// Dashboard data\nexport const useDashboardData=()=>{return useQuery({queryKey:['adminDashboard'],queryFn:async()=>{console.log('ðŸ”„ Fetching dashboard data...');try{var _ticketsResponse$tick;const[userStats,systemStats,ticketsResponse]=await Promise.all([userService.getUserStats(),userService.getSystemStats(),ticketService.getTickets({limit:6,sortBy:'updatedAt',sortOrder:'desc'})]);console.log('âœ… Dashboard data fetched:',{userStats,systemStats,tickets:(_ticketsResponse$tick=ticketsResponse.tickets)===null||_ticketsResponse$tick===void 0?void 0:_ticketsResponse$tick.length});return{userStats,systemStats,recentTickets:ticketsResponse.tickets||[]};}catch(error){console.error('âŒ Dashboard data error:',error);throw error;}},refetchInterval:30000});};// Users management\nexport const useUsers=function(){let filters=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return useQuery({queryKey:['users',filters],queryFn:async()=>{console.log('ðŸ”„ Fetching users with filters:',filters);try{const data=await userService.getAllUsers(filters);console.log('âœ… Users fetched:',data);return data;}catch(error){console.error('âŒ Users fetch error:',error);throw error;}},retry:1});};export const useCreateUser=()=>{const queryClient=useQueryClient();return useMutation({mutationFn:async userData=>{console.log('ðŸ”„ Creating user:',userData);try{const result=await userService.createUser(userData);console.log('âœ… User created:',result);return result;}catch(error){console.error('âŒ User creation error:',error);throw error;}},onSuccess:()=>{queryClient.invalidateQueries(['adminDashboard']);queryClient.invalidateQueries(['users']);}});};export const useDeleteUser=()=>{const queryClient=useQueryClient();return useMutation({mutationFn:async id=>{console.log('ðŸ”„ Deleting user:',id);try{const result=await userService.deleteUser(id);console.log('âœ… User deleted:',result);return result;}catch(error){console.error('âŒ User deletion error:',error);throw error;}},onSuccess:()=>{queryClient.invalidateQueries(['adminDashboard']);queryClient.invalidateQueries(['users']);}});};export const useUpdateUser=()=>{const queryClient=useQueryClient();return useMutation({mutationFn:_ref=>{let{id,userData}=_ref;return userService.updateUser(id,userData);},onSuccess:()=>{queryClient.invalidateQueries(['adminDashboard']);queryClient.invalidateQueries(['users']);}});};// ==================== DEACTIVATION HOOKS ====================\nexport const useDeactivateUser=()=>{const queryClient=useQueryClient();return useMutation({mutationFn:async userId=>{console.log('ðŸ”„ Deactivating user:',userId);try{const result=await userService.deactivateUser(userId);console.log('âœ… User deactivated:',result);return result;}catch(error){console.error('âŒ User deactivation error:',error);throw error;}},onSuccess:()=>{queryClient.invalidateQueries(['adminDashboard']);queryClient.invalidateQueries(['users']);}});};export const useReactivateUser=()=>{const queryClient=useQueryClient();return useMutation({mutationFn:async userId=>{console.log('ðŸ”„ Reactivating user:',userId);try{const result=await userService.reactivateUser(userId);console.log('âœ… User reactivated:',result);return result;}catch(error){console.error('âŒ User reactivation error:',error);throw error;}},onSuccess:()=>{queryClient.invalidateQueries(['adminDashboard']);queryClient.invalidateQueries(['users']);}});};","map":{"version":3,"names":["useQuery","useMutation","useQueryClient","userService","ticketService","useDashboardData","queryKey","queryFn","console","log","_ticketsResponse$tick","userStats","systemStats","ticketsResponse","Promise","all","getUserStats","getSystemStats","getTickets","limit","sortBy","sortOrder","tickets","length","recentTickets","error","refetchInterval","useUsers","filters","arguments","undefined","data","getAllUsers","retry","useCreateUser","queryClient","mutationFn","userData","result","createUser","onSuccess","invalidateQueries","useDeleteUser","id","deleteUser","useUpdateUser","_ref","updateUser","useDeactivateUser","userId","deactivateUser","useReactivateUser","reactivateUser"],"sources":["C:/Users/KADZ-TECH/Documents/dev/it-support-system/frontend/src/hooks/useAdminData.js"],"sourcesContent":["import { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\r\nimport userService from '../services/userService';\r\nimport ticketService from '../services/ticketService';\r\n\r\n// Dashboard data\r\nexport const useDashboardData = () => {\r\n  return useQuery({\r\n    queryKey: ['adminDashboard'],\r\n    queryFn: async () => {\r\n      console.log('ðŸ”„ Fetching dashboard data...');\r\n      try {\r\n        const [userStats, systemStats, ticketsResponse] = await Promise.all([\r\n          userService.getUserStats(),\r\n          userService.getSystemStats(),\r\n          ticketService.getTickets({ limit: 6, sortBy: 'updatedAt', sortOrder: 'desc' })\r\n        ]);\r\n        \r\n        console.log('âœ… Dashboard data fetched:', { userStats, systemStats, tickets: ticketsResponse.tickets?.length });\r\n        \r\n        return {\r\n          userStats,\r\n          systemStats,\r\n          recentTickets: ticketsResponse.tickets || []\r\n        };\r\n      } catch (error) {\r\n        console.error('âŒ Dashboard data error:', error);\r\n        throw error;\r\n      }\r\n    },\r\n    refetchInterval: 30000,\r\n  });\r\n};\r\n\r\n// Users management\r\nexport const useUsers = (filters = {}) => {\r\n  return useQuery({\r\n    queryKey: ['users', filters],\r\n    queryFn: async () => {\r\n      console.log('ðŸ”„ Fetching users with filters:', filters);\r\n      try {\r\n        const data = await userService.getAllUsers(filters);\r\n        console.log('âœ… Users fetched:', data);\r\n        return data;\r\n      } catch (error) {\r\n        console.error('âŒ Users fetch error:', error);\r\n        throw error;\r\n      }\r\n    },\r\n    retry: 1,\r\n  });\r\n};\r\n\r\nexport const useCreateUser = () => {\r\n  const queryClient = useQueryClient();\r\n  \r\n  return useMutation({\r\n    mutationFn: async (userData) => {\r\n      console.log('ðŸ”„ Creating user:', userData);\r\n      try {\r\n        const result = await userService.createUser(userData);\r\n        console.log('âœ… User created:', result);\r\n        return result;\r\n      } catch (error) {\r\n        console.error('âŒ User creation error:', error);\r\n        throw error;\r\n      }\r\n    },\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries(['adminDashboard']);\r\n      queryClient.invalidateQueries(['users']);\r\n    },\r\n  });\r\n};\r\n\r\nexport const useDeleteUser = () => {\r\n  const queryClient = useQueryClient();\r\n  \r\n  return useMutation({\r\n    mutationFn: async (id) => {\r\n      console.log('ðŸ”„ Deleting user:', id);\r\n      try {\r\n        const result = await userService.deleteUser(id);\r\n        console.log('âœ… User deleted:', result);\r\n        return result;\r\n      } catch (error) {\r\n        console.error('âŒ User deletion error:', error);\r\n        throw error;\r\n      }\r\n    },\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries(['adminDashboard']);\r\n      queryClient.invalidateQueries(['users']);\r\n    },\r\n  });\r\n};\r\n\r\nexport const useUpdateUser = () => {\r\n  const queryClient = useQueryClient();\r\n  \r\n  return useMutation({\r\n    mutationFn: ({ id, userData }) => userService.updateUser(id, userData),\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries(['adminDashboard']);\r\n      queryClient.invalidateQueries(['users']);\r\n    },\r\n  });\r\n};\r\n\r\n// ==================== DEACTIVATION HOOKS ====================\r\n\r\nexport const useDeactivateUser = () => {\r\n  const queryClient = useQueryClient();\r\n  \r\n  return useMutation({\r\n    mutationFn: async (userId) => {\r\n      console.log('ðŸ”„ Deactivating user:', userId);\r\n      try {\r\n        const result = await userService.deactivateUser(userId);\r\n        console.log('âœ… User deactivated:', result);\r\n        return result;\r\n      } catch (error) {\r\n        console.error('âŒ User deactivation error:', error);\r\n        throw error;\r\n      }\r\n    },\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries(['adminDashboard']);\r\n      queryClient.invalidateQueries(['users']);\r\n    },\r\n  });\r\n};\r\n\r\nexport const useReactivateUser = () => {\r\n  const queryClient = useQueryClient();\r\n  \r\n  return useMutation({\r\n    mutationFn: async (userId) => {\r\n      console.log('ðŸ”„ Reactivating user:', userId);\r\n      try {\r\n        const result = await userService.reactivateUser(userId);\r\n        console.log('âœ… User reactivated:', result);\r\n        return result;\r\n      } catch (error) {\r\n        console.error('âŒ User reactivation error:', error);\r\n        throw error;\r\n      }\r\n    },\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries(['adminDashboard']);\r\n      queryClient.invalidateQueries(['users']);\r\n    },\r\n  });\r\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}