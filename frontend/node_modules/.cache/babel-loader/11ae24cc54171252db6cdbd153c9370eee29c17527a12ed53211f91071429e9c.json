{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\KADZ-TECH\\\\Documents\\\\dev\\\\it-support-system\\\\frontend\\\\src\\\\context\\\\AuthContext.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\n// frontend/src/context/AuthContext.js - UPDATED WITH logSecurityEvent EXPORT\nimport React, { createContext, useState, useContext, useEffect, useCallback, useRef, useMemo } from 'react';\nimport PropTypes from 'prop-types';\nimport { authService } from '../services/authService';\n\n/**\r\n * Enterprise Auth Context v5.3.0 - FIXED WITH SECURITY EVENT EXPORT\r\n */\n\n// Context\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const AuthContext = /*#__PURE__*/createContext();\n\n// Custom hook\nexport const useAuth = () => {\n  _s();\n  const context = useContext(AuthContext);\n  if (!context) {\n    throw new Error('useAuth must be used within AuthProvider');\n  }\n  return context;\n};\n\n// Error boundary for auth errors\n_s(useAuth, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\nclass AuthErrorBoundary extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      hasError: false,\n      error: null\n    };\n  }\n  static getDerivedStateFromError(error) {\n    return {\n      hasError: true,\n      error\n    };\n  }\n  componentDidCatch(error, errorInfo) {\n    console.error('Auth Error Boundary caught:', error, errorInfo);\n  }\n  render() {\n    if (this.state.hasError) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          padding: '40px',\n          textAlign: 'center',\n          backgroundColor: '#fef2f2',\n          borderRadius: '8px',\n          margin: '20px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          style: {\n            color: '#dc2626',\n            marginBottom: '16px'\n          },\n          children: \"Authentication Error\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 47,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            color: '#4b5563',\n            marginBottom: '24px'\n          },\n          children: \"Something went wrong with authentication. Please try refreshing the page.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => window.location.reload(),\n          style: {\n            padding: '10px 24px',\n            backgroundColor: '#3b82f6',\n            color: 'white',\n            border: 'none',\n            borderRadius: '6px',\n            cursor: 'pointer',\n            fontSize: '14px',\n            fontWeight: '500'\n          },\n          children: \"Refresh Page\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 40,\n        columnNumber: 9\n      }, this);\n    }\n    return this.props.children;\n  }\n}\n\n// Performance monitoring\nconst createPerformanceMonitor = () => {\n  const metrics = {\n    loginTime: null,\n    refreshTime: null,\n    sessionChecks: 0,\n    errors: [],\n    securityEvents: []\n  };\n  return {\n    startMeasurement(operation) {\n      const startTime = performance.now();\n      return () => {\n        const duration = performance.now() - startTime;\n        metrics[operation] = duration;\n        if (duration > 1000 && process.env.NODE_ENV === 'development') {\n          console.warn(`Slow auth operation: ${operation} took ${duration.toFixed(2)}ms`);\n        }\n      };\n    },\n    logError(error, operation) {\n      metrics.errors.push({\n        operation,\n        error: error.message,\n        timestamp: new Date().toISOString()\n      });\n    },\n    logSecurityEvent(eventType, details) {\n      const event = {\n        eventType,\n        details,\n        timestamp: new Date().toISOString()\n      };\n      metrics.securityEvents.push(event);\n      return event;\n    },\n    getMetrics() {\n      return {\n        ...metrics\n      };\n    }\n  };\n};\n\n// Main provider component - FIXED VERSION WITH logSecurityEvent\nexport const AuthProvider = ({\n  children\n}) => {\n  _s2();\n  // State management\n  const [state, setState] = useState({\n    user: null,\n    session: null,\n    loading: true,\n    error: null,\n    success: null,\n    sessionExpiresAt: null,\n    permissions: new Set()\n  });\n\n  // Refs for cleanup\n  const refreshTimerRef = useRef(null);\n  const sessionCheckRef = useRef(null);\n  const activityTimerRef = useRef(null);\n  const isMountedRef = useRef(true);\n  const performanceMonitor = useMemo(() => createPerformanceMonitor(), []);\n\n  // Store state in ref for stable access\n  const stateRef = useRef(state);\n  useEffect(() => {\n    stateRef.current = state;\n  }, [state]);\n\n  // Update state safely\n  const setAuthState = useCallback(updates => {\n    if (isMountedRef.current) {\n      setState(prev => ({\n        ...prev,\n        ...updates\n      }));\n    }\n  }, []);\n\n  // Clear all timers\n  const clearTimers = useCallback(() => {\n    if (refreshTimerRef.current) {\n      clearTimeout(refreshTimerRef.current);\n      refreshTimerRef.current = null;\n    }\n    if (sessionCheckRef.current) {\n      clearInterval(sessionCheckRef.current);\n      sessionCheckRef.current = null;\n    }\n    if (activityTimerRef.current) {\n      clearTimeout(activityTimerRef.current);\n      activityTimerRef.current = null;\n    }\n  }, []);\n\n  // Schedule token refresh\n  const scheduleTokenRefresh = useCallback(expiresAt => {\n    clearTimers();\n    if (!expiresAt) return;\n    const refreshTime = expiresAt - 5 * 60 * 1000 - Date.now();\n    if (refreshTime > 0) {\n      refreshTimerRef.current = setTimeout(async () => {\n        try {\n          const endMeasurement = performanceMonitor.startMeasurement('tokenRefresh');\n          await authService.refreshAccessToken();\n          endMeasurement();\n          const session = authService.getCurrentSession();\n          if (session) {\n            setAuthState({\n              session,\n              sessionExpiresAt: session.expiresAt\n            });\n            scheduleTokenRefresh(session.expiresAt);\n          }\n        } catch (error) {\n          performanceMonitor.logError(error, 'tokenRefresh');\n          console.error('Token refresh failed:', error);\n        }\n      }, Math.max(refreshTime, 0));\n    }\n  }, [clearTimers, performanceMonitor, setAuthState]);\n\n  // Security Event Logging Function - STABLE VERSION\n  const logSecurityEvent = useCallback((eventType, details) => {\n    // Get current values from ref (not state to avoid re-renders)\n    const currentUser = stateRef.current.user;\n    const currentSession = stateRef.current.session;\n\n    // Log to performance monitor\n    performanceMonitor.logSecurityEvent(eventType, details);\n\n    // Prepare log data\n    const logData = {\n      eventType,\n      details,\n      timestamp: new Date().toISOString(),\n      userId: currentUser === null || currentUser === void 0 ? void 0 : currentUser.id,\n      userRole: currentUser === null || currentUser === void 0 ? void 0 : currentUser.role,\n      sessionId: currentSession === null || currentSession === void 0 ? void 0 : currentSession.id,\n      source: 'auth_context',\n      userAgent: navigator.userAgent,\n      url: window.location.href,\n      screenResolution: `${window.screen.width}x${window.screen.height}`,\n      timezone: Intl.DateTimeFormat().resolvedOptions().timeZone\n    };\n\n    // Console log in development (optional)\n    if (process.env.NODE_ENV === 'development') {\n      const importantEvents = ['login_failed', 'registration_failed', 'security_violation'];\n      if (importantEvents.includes(eventType)) {\n        console.log(`ðŸ”’ Security Event: ${eventType}`, details);\n      }\n    }\n\n    // Send to backend in production (non-blocking)\n    if (process.env.NODE_ENV === 'production') {\n      setTimeout(() => {\n        try {\n          fetch('/api/logs/security', {\n            method: 'POST',\n            headers: {\n              'Content-Type': 'application/json',\n              'Authorization': currentSession !== null && currentSession !== void 0 && currentSession.accessToken ? `Bearer ${currentSession.accessToken}` : ''\n            },\n            body: JSON.stringify(logData)\n          }).catch(() => {\n            // Silently fail for logging errors\n          });\n        } catch (error) {\n          // Ignore logging errors\n        }\n      }, 0);\n    }\n\n    // Return log data for testing/debugging\n    return logData;\n  }, [performanceMonitor]);\n\n  // Initialize auth state\n  const initializeAuth = useCallback(async () => {\n    if (!isMountedRef.current) return;\n    try {\n      setAuthState({\n        loading: true,\n        error: null\n      });\n      const session = authService.getCurrentSession();\n      if (!session) {\n        setAuthState({\n          loading: false\n        });\n        return;\n      }\n      if (Date.now() > session.expiresAt) {\n        await logout('session_expired');\n        return;\n      }\n      const userResponse = await authService.getCurrentUser();\n      if (!userResponse.success) {\n        throw new Error('Failed to get user data');\n      }\n      const permissions = new Set(userResponse.data.permissions || []);\n      setAuthState({\n        user: userResponse.data,\n        session,\n        sessionExpiresAt: session.expiresAt,\n        permissions,\n        loading: false\n      });\n\n      // Log security event\n      logSecurityEvent('session_initialized', {\n        userId: userResponse.data.id,\n        role: userResponse.data.role,\n        sessionId: session.id,\n        sessionExpiresAt: new Date(session.expiresAt).toISOString()\n      });\n      scheduleTokenRefresh(session.expiresAt);\n\n      // Start session monitoring\n      startSessionMonitoring(session.expiresAt);\n    } catch (error) {\n      performanceMonitor.logError(error, 'initializeAuth');\n      console.error('Auth initialization error:', error);\n      logSecurityEvent('initialization_failed', {\n        error: error.message,\n        sessionExists: !!authService.getCurrentSession()\n      });\n      setAuthState({\n        error: 'Failed to initialize authentication',\n        loading: false\n      });\n    }\n  }, [setAuthState, scheduleTokenRefresh, performanceMonitor, logSecurityEvent]);\n\n  // Start session monitoring\n  const startSessionMonitoring = useCallback(expiresAt => {\n    clearTimers();\n    sessionCheckRef.current = setInterval(() => {\n      if (expiresAt && Date.now() > expiresAt) {\n        logout('session_expired');\n      }\n    }, 60 * 1000);\n    const trackActivity = () => {\n      if (activityTimerRef.current) {\n        clearTimeout(activityTimerRef.current);\n      }\n      activityTimerRef.current = setTimeout(() => {\n        logout('inactivity');\n      }, 30 * 60 * 1000);\n    };\n    ['mousemove', 'keydown', 'click', 'scroll'].forEach(event => {\n      window.addEventListener(event, trackActivity, {\n        passive: true\n      });\n    });\n    trackActivity();\n  }, [clearTimers]);\n\n  // Login\n  const login = useCallback(async (email, password, rememberMe = false) => {\n    try {\n      setAuthState({\n        loading: true,\n        error: null,\n        success: null\n      });\n      const endMeasurement = performanceMonitor.startMeasurement('login');\n      const response = await authService.login(email, password, rememberMe);\n      endMeasurement();\n      if (!response.success) {\n        throw new Error(response.message || 'Login failed');\n      }\n      const session = authService.getCurrentSession();\n      const permissions = new Set(response.data.user.permissions || []);\n      setAuthState({\n        user: response.data.user,\n        session,\n        sessionExpiresAt: session.expiresAt,\n        permissions,\n        loading: false,\n        success: 'Login successful'\n      });\n      logSecurityEvent('login_success', {\n        email: email,\n        rememberMe,\n        ip: 'client-side'\n      });\n      scheduleTokenRefresh(session.expiresAt);\n      startSessionMonitoring(session.expiresAt);\n      return response;\n    } catch (error) {\n      performanceMonitor.logError(error, 'login');\n      logSecurityEvent('login_failed', {\n        email: email,\n        error: error.message,\n        userAgent: navigator.userAgent\n      });\n      const errorMessage = error.message || 'Login failed. Please check your credentials.';\n      setAuthState({\n        error: errorMessage,\n        loading: false\n      });\n      throw error;\n    }\n  }, [setAuthState, scheduleTokenRefresh, startSessionMonitoring, performanceMonitor, logSecurityEvent]);\n\n  // Register\n  const register = useCallback(async userData => {\n    try {\n      setAuthState({\n        loading: true,\n        error: null,\n        success: null\n      });\n      const endMeasurement = performanceMonitor.startMeasurement('register');\n      const response = await authService.register(userData);\n      endMeasurement();\n      if (!response.success) {\n        throw new Error(response.message || 'Registration failed');\n      }\n      logSecurityEvent('registration_attempt', {\n        email: userData.email,\n        role: userData.role,\n        username: userData.username\n      });\n      if (response.requiresVerification) {\n        setAuthState({\n          loading: false,\n          success: response.message || 'Registration successful! Please verify your email.'\n        });\n        logSecurityEvent('registration_pending_verification', {\n          email: userData.email,\n          role: userData.role\n        });\n        return response;\n      }\n      const session = authService.getCurrentSession();\n      const permissions = new Set(response.data.user.permissions || []);\n      setAuthState({\n        user: response.data.user,\n        session,\n        sessionExpiresAt: session.expiresAt,\n        permissions,\n        loading: false,\n        success: response.message || 'Registration successful!'\n      });\n      logSecurityEvent('registration_success', {\n        email: userData.email,\n        role: userData.role,\n        username: userData.username\n      });\n      scheduleTokenRefresh(session.expiresAt);\n      startSessionMonitoring(session.expiresAt);\n      return response;\n    } catch (error) {\n      performanceMonitor.logError(error, 'register');\n      logSecurityEvent('registration_failed', {\n        email: userData.email,\n        role: userData.role,\n        error: error.message\n      });\n      let errorMessage = error.message || 'Registration failed. Please try again.';\n      if (error.isAPIError) {\n        switch (error.code) {\n          case 'EMAIL_EXISTS':\n            errorMessage = 'An account with this email already exists.';\n            break;\n          case 'USERNAME_EXISTS':\n            errorMessage = 'This username is already taken.';\n            break;\n          case 'VALIDATION_ERROR':\n            if (error.errors) {\n              errorMessage = Object.values(error.errors).join('. ');\n            }\n            break;\n        }\n      }\n      setAuthState({\n        error: errorMessage,\n        loading: false\n      });\n      throw error;\n    }\n  }, [setAuthState, scheduleTokenRefresh, startSessionMonitoring, performanceMonitor, logSecurityEvent]);\n\n  // Logout\n  const logout = useCallback(async (reason = 'user_action') => {\n    const currentUser = stateRef.current.user;\n    const currentSession = stateRef.current.session;\n    try {\n      logSecurityEvent('logout', {\n        reason: reason,\n        sessionDuration: currentSession ? (Date.now() - new Date(currentSession.createdAt).getTime()) / 1000 : null\n      });\n      await authService.logout();\n    } catch (error) {\n      console.warn('Logout error:', error);\n      logSecurityEvent('logout_error', {\n        error: error.message,\n        reason: reason\n      });\n    } finally {\n      clearTimers();\n      setAuthState({\n        user: null,\n        session: null,\n        sessionExpiresAt: null,\n        permissions: new Set(),\n        error: null,\n        success: null,\n        loading: false\n      });\n    }\n  }, [clearTimers, logSecurityEvent]);\n\n  // Check username availability\n  const checkUsername = useCallback(async username => {\n    try {\n      const response = await authService.checkUsername(username);\n      logSecurityEvent('username_check', {\n        username: username,\n        available: response.available\n      });\n      return response;\n    } catch (error) {\n      console.error('Check username error:', error);\n      logSecurityEvent('username_check_error', {\n        username: username,\n        error: error.message\n      });\n      return {\n        success: false,\n        available: false,\n        error: error.message\n      };\n    }\n  }, [logSecurityEvent]);\n\n  // Check email availability\n  const checkEmail = useCallback(async email => {\n    try {\n      const response = await authService.checkEmail(email);\n      logSecurityEvent('email_check', {\n        email: email,\n        available: response.available,\n        isUniversityEmail: email.includes('bugemauniv.ac.ug')\n      });\n      return response;\n    } catch (error) {\n      console.error('Check email error:', error);\n      logSecurityEvent('email_check_error', {\n        email: email,\n        error: error.message\n      });\n      return {\n        success: false,\n        available: false,\n        error: error.message\n      };\n    }\n  }, [logSecurityEvent]);\n\n  // Update profile\n  const updateProfile = useCallback(async updates => {\n    try {\n      var _state$user;\n      setAuthState({\n        loading: true,\n        error: null\n      });\n      const response = await authService.updateProfile(updates);\n      if (!response.success) {\n        throw new Error(response.message || 'Update failed');\n      }\n      logSecurityEvent('profile_updated', {\n        updatedFields: Object.keys(updates),\n        previousRole: (_state$user = state.user) === null || _state$user === void 0 ? void 0 : _state$user.role,\n        newRole: response.data.role\n      });\n      setAuthState({\n        user: response.data,\n        loading: false,\n        success: response.message || 'Profile updated successfully'\n      });\n      return response;\n    } catch (error) {\n      performanceMonitor.logError(error, 'updateProfile');\n      logSecurityEvent('profile_update_failed', {\n        error: error.message,\n        attemptedUpdates: Object.keys(updates)\n      });\n      setAuthState({\n        error: error.message || 'Failed to update profile',\n        loading: false\n      });\n      throw error;\n    }\n  }, [setAuthState, performanceMonitor, state.user, logSecurityEvent]);\n\n  // Change password\n  const changePassword = useCallback(async (currentPassword, newPassword) => {\n    try {\n      setAuthState({\n        loading: true,\n        error: null\n      });\n      const response = await authService.changePassword(currentPassword, newPassword);\n      if (!response.success) {\n        throw new Error(response.message || 'Password change failed');\n      }\n      logSecurityEvent('password_changed', {\n        passwordStrength: newPassword.length\n      });\n      setAuthState({\n        loading: false,\n        success: response.message || 'Password changed successfully'\n      });\n      return response;\n    } catch (error) {\n      performanceMonitor.logError(error, 'changePassword');\n      logSecurityEvent('password_change_failed', {\n        error: error.message\n      });\n      setAuthState({\n        error: error.message || 'Failed to change password',\n        loading: false\n      });\n      throw error;\n    }\n  }, [setAuthState, performanceMonitor, logSecurityEvent]);\n\n  // Forgot password\n  const forgotPassword = useCallback(async email => {\n    try {\n      setAuthState({\n        loading: true,\n        error: null\n      });\n      const response = await authService.forgotPassword(email);\n      logSecurityEvent('forgot_password_requested', {\n        email: email\n      });\n      setAuthState({\n        loading: false,\n        success: 'If an account exists, you will receive reset instructions.'\n      });\n      return response;\n    } catch (error) {\n      performanceMonitor.logError(error, 'forgotPassword');\n      setAuthState({\n        loading: false,\n        success: 'If an account exists, you will receive reset instructions.'\n      });\n      return {\n        success: true,\n        message: 'If an account exists, you will receive reset instructions.'\n      };\n    }\n  }, [setAuthState, performanceMonitor, logSecurityEvent]);\n\n  // Reset password\n  const resetPassword = useCallback(async (token, passwordData) => {\n    try {\n      setAuthState({\n        loading: true,\n        error: null\n      });\n      const response = await authService.resetPassword(token, passwordData);\n      if (!response.success) {\n        throw new Error(response.message || 'Password reset failed');\n      }\n      logSecurityEvent('password_reset', {\n        tokenUsed: token.substring(0, 8) + '...'\n      });\n      setAuthState({\n        loading: false,\n        success: response.message || 'Password reset successful'\n      });\n      return response;\n    } catch (error) {\n      performanceMonitor.logError(error, 'resetPassword');\n      logSecurityEvent('password_reset_failed', {\n        tokenUsed: token ? token.substring(0, 8) + '...' : 'no-token',\n        error: error.message\n      });\n      setAuthState({\n        error: error.message || 'Failed to reset password',\n        loading: false\n      });\n      throw error;\n    }\n  }, [setAuthState, performanceMonitor, logSecurityEvent]);\n\n  // Verify email\n  const verifyEmail = useCallback(async token => {\n    try {\n      var _response$data;\n      setAuthState({\n        loading: true,\n        error: null\n      });\n      const response = await authService.verifyEmail(token);\n      if (!response.success) {\n        throw new Error(response.message || 'Verification failed');\n      }\n      logSecurityEvent('email_verified', {\n        tokenUsed: token.substring(0, 8) + '...',\n        email: (_response$data = response.data) === null || _response$data === void 0 ? void 0 : _response$data.email\n      });\n      setAuthState({\n        loading: false,\n        success: response.message || 'Email verified successfully'\n      });\n      return response;\n    } catch (error) {\n      performanceMonitor.logError(error, 'verifyEmail');\n      logSecurityEvent('email_verification_failed', {\n        tokenUsed: token.substring(0, 8) + '...',\n        error: error.message\n      });\n      setAuthState({\n        error: error.message || 'Failed to verify email',\n        loading: false\n      });\n      throw error;\n    }\n  }, [setAuthState, performanceMonitor, logSecurityEvent]);\n\n  // Check permissions\n  const hasPermission = useCallback(permission => {\n    var _state$user2;\n    const hasPerm = state.permissions.has(permission) || ((_state$user2 = state.user) === null || _state$user2 === void 0 ? void 0 : _state$user2.role) === 'admin';\n    return hasPerm;\n  }, [state.permissions, state.user]);\n  const hasRole = useCallback(role => {\n    var _state$user3;\n    return ((_state$user3 = state.user) === null || _state$user3 === void 0 ? void 0 : _state$user3.role) === role;\n  }, [state.user]);\n  const hasAnyRole = useCallback(roles => {\n    var _state$user4;\n    return roles.includes((_state$user4 = state.user) === null || _state$user4 === void 0 ? void 0 : _state$user4.role);\n  }, [state.user]);\n\n  // Clear messages\n  const clearError = useCallback(() => {\n    setAuthState({\n      error: null\n    });\n  }, [setAuthState]);\n  const clearSuccess = useCallback(() => {\n    setAuthState({\n      success: null\n    });\n  }, [setAuthState]);\n\n  // Initialize on mount - FIXED\n  useEffect(() => {\n    isMountedRef.current = true;\n    initializeAuth();\n    return () => {\n      isMountedRef.current = false;\n      clearTimers();\n\n      // Remove event listeners\n      if (activityTimerRef.current) {\n        clearTimeout(activityTimerRef.current);\n        activityTimerRef.current = null;\n      }\n    };\n  }, [initializeAuth, clearTimers]);\n\n  // Context value - INCLUDES logSecurityEvent\n  const contextValue = useMemo(() => ({\n    // State\n    user: state.user,\n    session: state.session,\n    loading: state.loading,\n    error: state.error,\n    success: state.success,\n    sessionExpiresAt: state.sessionExpiresAt,\n    // Authentication methods\n    login,\n    register,\n    logout,\n    // Validation methods\n    checkUsername,\n    checkEmail,\n    // User management\n    updateProfile,\n    changePassword,\n    forgotPassword,\n    resetPassword,\n    verifyEmail,\n    // Permission checks\n    hasPermission,\n    hasRole,\n    hasAnyRole,\n    isAuthenticated: !!state.user && !!state.session,\n    // Security logging - EXPORTED\n    logSecurityEvent,\n    // Utility methods\n    clearError,\n    clearSuccess\n  }), [state, login, register, logout, checkUsername, checkEmail, updateProfile, changePassword, forgotPassword, resetPassword, verifyEmail, hasPermission, hasRole, hasAnyRole, logSecurityEvent, clearError, clearSuccess]);\n  return /*#__PURE__*/_jsxDEV(AuthErrorBoundary, {\n    children: /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n      value: contextValue,\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 874,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 873,\n    columnNumber: 5\n  }, this);\n};\n\n// PropTypes\n_s2(AuthProvider, \"6vdqC6o3W681P8vuKoYftvDW7ys=\");\n_c = AuthProvider;\nAuthProvider.propTypes = {\n  children: PropTypes.node.isRequired\n};\nexport default AuthContext;\nvar _c;\n$RefreshReg$(_c, \"AuthProvider\");","map":{"version":3,"names":["React","createContext","useState","useContext","useEffect","useCallback","useRef","useMemo","PropTypes","authService","jsxDEV","_jsxDEV","AuthContext","useAuth","_s","context","Error","AuthErrorBoundary","Component","constructor","props","state","hasError","error","getDerivedStateFromError","componentDidCatch","errorInfo","console","render","style","padding","textAlign","backgroundColor","borderRadius","margin","children","color","marginBottom","fileName","_jsxFileName","lineNumber","columnNumber","onClick","window","location","reload","border","cursor","fontSize","fontWeight","createPerformanceMonitor","metrics","loginTime","refreshTime","sessionChecks","errors","securityEvents","startMeasurement","operation","startTime","performance","now","duration","process","env","NODE_ENV","warn","toFixed","logError","push","message","timestamp","Date","toISOString","logSecurityEvent","eventType","details","event","getMetrics","AuthProvider","_s2","setState","user","session","loading","success","sessionExpiresAt","permissions","Set","refreshTimerRef","sessionCheckRef","activityTimerRef","isMountedRef","performanceMonitor","stateRef","current","setAuthState","updates","prev","clearTimers","clearTimeout","clearInterval","scheduleTokenRefresh","expiresAt","setTimeout","endMeasurement","refreshAccessToken","getCurrentSession","Math","max","currentUser","currentSession","logData","userId","id","userRole","role","sessionId","source","userAgent","navigator","url","href","screenResolution","screen","width","height","timezone","Intl","DateTimeFormat","resolvedOptions","timeZone","importantEvents","includes","log","fetch","method","headers","accessToken","body","JSON","stringify","catch","initializeAuth","logout","userResponse","getCurrentUser","data","startSessionMonitoring","sessionExists","setInterval","trackActivity","forEach","addEventListener","passive","login","email","password","rememberMe","response","ip","errorMessage","register","userData","username","requiresVerification","isAPIError","code","Object","values","join","reason","sessionDuration","createdAt","getTime","checkUsername","available","checkEmail","isUniversityEmail","updateProfile","_state$user","updatedFields","keys","previousRole","newRole","attemptedUpdates","changePassword","currentPassword","newPassword","passwordStrength","length","forgotPassword","resetPassword","token","passwordData","tokenUsed","substring","verifyEmail","_response$data","hasPermission","permission","_state$user2","hasPerm","has","hasRole","_state$user3","hasAnyRole","roles","_state$user4","clearError","clearSuccess","contextValue","isAuthenticated","Provider","value","_c","propTypes","node","isRequired","$RefreshReg$"],"sources":["C:/Users/KADZ-TECH/Documents/dev/it-support-system/frontend/src/context/AuthContext.js"],"sourcesContent":["// frontend/src/context/AuthContext.js - UPDATED WITH logSecurityEvent EXPORT\r\nimport React, { createContext, useState, useContext, useEffect, useCallback, useRef, useMemo } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { authService } from '../services/authService';\r\n\r\n/**\r\n * Enterprise Auth Context v5.3.0 - FIXED WITH SECURITY EVENT EXPORT\r\n */\r\n\r\n// Context\r\nexport const AuthContext = createContext();\r\n\r\n// Custom hook\r\nexport const useAuth = () => {\r\n  const context = useContext(AuthContext);\r\n  if (!context) {\r\n    throw new Error('useAuth must be used within AuthProvider');\r\n  }\r\n  return context;\r\n};\r\n\r\n// Error boundary for auth errors\r\nclass AuthErrorBoundary extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = { hasError: false, error: null };\r\n  }\r\n\r\n  static getDerivedStateFromError(error) {\r\n    return { hasError: true, error };\r\n  }\r\n\r\n  componentDidCatch(error, errorInfo) {\r\n    console.error('Auth Error Boundary caught:', error, errorInfo);\r\n  }\r\n\r\n  render() {\r\n    if (this.state.hasError) {\r\n      return (\r\n        <div style={{\r\n          padding: '40px',\r\n          textAlign: 'center',\r\n          backgroundColor: '#fef2f2',\r\n          borderRadius: '8px',\r\n          margin: '20px'\r\n        }}>\r\n          <h3 style={{ color: '#dc2626', marginBottom: '16px' }}>\r\n            Authentication Error\r\n          </h3>\r\n          <p style={{ color: '#4b5563', marginBottom: '24px' }}>\r\n            Something went wrong with authentication. Please try refreshing the page.\r\n          </p>\r\n          <button\r\n            onClick={() => window.location.reload()}\r\n            style={{\r\n              padding: '10px 24px',\r\n              backgroundColor: '#3b82f6',\r\n              color: 'white',\r\n              border: 'none',\r\n              borderRadius: '6px',\r\n              cursor: 'pointer',\r\n              fontSize: '14px',\r\n              fontWeight: '500'\r\n            }}\r\n          >\r\n            Refresh Page\r\n          </button>\r\n        </div>\r\n      );\r\n    }\r\n\r\n    return this.props.children;\r\n  }\r\n}\r\n\r\n// Performance monitoring\r\nconst createPerformanceMonitor = () => {\r\n  const metrics = {\r\n    loginTime: null,\r\n    refreshTime: null,\r\n    sessionChecks: 0,\r\n    errors: [],\r\n    securityEvents: []\r\n  };\r\n\r\n  return {\r\n    startMeasurement(operation) {\r\n      const startTime = performance.now();\r\n      return () => {\r\n        const duration = performance.now() - startTime;\r\n        metrics[operation] = duration;\r\n        \r\n        if (duration > 1000 && process.env.NODE_ENV === 'development') {\r\n          console.warn(`Slow auth operation: ${operation} took ${duration.toFixed(2)}ms`);\r\n        }\r\n      };\r\n    },\r\n\r\n    logError(error, operation) {\r\n      metrics.errors.push({\r\n        operation,\r\n        error: error.message,\r\n        timestamp: new Date().toISOString()\r\n      });\r\n    },\r\n\r\n    logSecurityEvent(eventType, details) {\r\n      const event = {\r\n        eventType,\r\n        details,\r\n        timestamp: new Date().toISOString()\r\n      };\r\n      \r\n      metrics.securityEvents.push(event);\r\n      return event;\r\n    },\r\n\r\n    getMetrics() {\r\n      return { ...metrics };\r\n    }\r\n  };\r\n};\r\n\r\n// Main provider component - FIXED VERSION WITH logSecurityEvent\r\nexport const AuthProvider = ({ children }) => {\r\n  // State management\r\n  const [state, setState] = useState({\r\n    user: null,\r\n    session: null,\r\n    loading: true,\r\n    error: null,\r\n    success: null,\r\n    sessionExpiresAt: null,\r\n    permissions: new Set()\r\n  });\r\n\r\n  // Refs for cleanup\r\n  const refreshTimerRef = useRef(null);\r\n  const sessionCheckRef = useRef(null);\r\n  const activityTimerRef = useRef(null);\r\n  const isMountedRef = useRef(true);\r\n  const performanceMonitor = useMemo(() => createPerformanceMonitor(), []);\r\n  \r\n  // Store state in ref for stable access\r\n  const stateRef = useRef(state);\r\n  useEffect(() => {\r\n    stateRef.current = state;\r\n  }, [state]);\r\n\r\n  // Update state safely\r\n  const setAuthState = useCallback((updates) => {\r\n    if (isMountedRef.current) {\r\n      setState(prev => ({ ...prev, ...updates }));\r\n    }\r\n  }, []);\r\n\r\n  // Clear all timers\r\n  const clearTimers = useCallback(() => {\r\n    if (refreshTimerRef.current) {\r\n      clearTimeout(refreshTimerRef.current);\r\n      refreshTimerRef.current = null;\r\n    }\r\n    \r\n    if (sessionCheckRef.current) {\r\n      clearInterval(sessionCheckRef.current);\r\n      sessionCheckRef.current = null;\r\n    }\r\n    \r\n    if (activityTimerRef.current) {\r\n      clearTimeout(activityTimerRef.current);\r\n      activityTimerRef.current = null;\r\n    }\r\n  }, []);\r\n\r\n  // Schedule token refresh\r\n  const scheduleTokenRefresh = useCallback((expiresAt) => {\r\n    clearTimers();\r\n    \r\n    if (!expiresAt) return;\r\n\r\n    const refreshTime = expiresAt - (5 * 60 * 1000) - Date.now();\r\n    \r\n    if (refreshTime > 0) {\r\n      refreshTimerRef.current = setTimeout(async () => {\r\n        try {\r\n          const endMeasurement = performanceMonitor.startMeasurement('tokenRefresh');\r\n          await authService.refreshAccessToken();\r\n          endMeasurement();\r\n          \r\n          const session = authService.getCurrentSession();\r\n          if (session) {\r\n            setAuthState({\r\n              session,\r\n              sessionExpiresAt: session.expiresAt\r\n            });\r\n            scheduleTokenRefresh(session.expiresAt);\r\n          }\r\n        } catch (error) {\r\n          performanceMonitor.logError(error, 'tokenRefresh');\r\n          console.error('Token refresh failed:', error);\r\n        }\r\n      }, Math.max(refreshTime, 0));\r\n    }\r\n  }, [clearTimers, performanceMonitor, setAuthState]);\r\n\r\n  // Security Event Logging Function - STABLE VERSION\r\n  const logSecurityEvent = useCallback((eventType, details) => {\r\n    // Get current values from ref (not state to avoid re-renders)\r\n    const currentUser = stateRef.current.user;\r\n    const currentSession = stateRef.current.session;\r\n    \r\n    // Log to performance monitor\r\n    performanceMonitor.logSecurityEvent(eventType, details);\r\n    \r\n    // Prepare log data\r\n    const logData = {\r\n      eventType,\r\n      details,\r\n      timestamp: new Date().toISOString(),\r\n      userId: currentUser?.id,\r\n      userRole: currentUser?.role,\r\n      sessionId: currentSession?.id,\r\n      source: 'auth_context',\r\n      userAgent: navigator.userAgent,\r\n      url: window.location.href,\r\n      screenResolution: `${window.screen.width}x${window.screen.height}`,\r\n      timezone: Intl.DateTimeFormat().resolvedOptions().timeZone\r\n    };\r\n    \r\n    // Console log in development (optional)\r\n    if (process.env.NODE_ENV === 'development') {\r\n      const importantEvents = ['login_failed', 'registration_failed', 'security_violation'];\r\n      if (importantEvents.includes(eventType)) {\r\n        console.log(`ðŸ”’ Security Event: ${eventType}`, details);\r\n      }\r\n    }\r\n    \r\n    // Send to backend in production (non-blocking)\r\n    if (process.env.NODE_ENV === 'production') {\r\n      setTimeout(() => {\r\n        try {\r\n          fetch('/api/logs/security', {\r\n            method: 'POST',\r\n            headers: { \r\n              'Content-Type': 'application/json',\r\n              'Authorization': currentSession?.accessToken ? `Bearer ${currentSession.accessToken}` : ''\r\n            },\r\n            body: JSON.stringify(logData)\r\n          }).catch(() => {\r\n            // Silently fail for logging errors\r\n          });\r\n        } catch (error) {\r\n          // Ignore logging errors\r\n        }\r\n      }, 0);\r\n    }\r\n    \r\n    // Return log data for testing/debugging\r\n    return logData;\r\n  }, [performanceMonitor]);\r\n\r\n  // Initialize auth state\r\n  const initializeAuth = useCallback(async () => {\r\n    if (!isMountedRef.current) return;\r\n    \r\n    try {\r\n      setAuthState({ loading: true, error: null });\r\n\r\n      const session = authService.getCurrentSession();\r\n      \r\n      if (!session) {\r\n        setAuthState({ loading: false });\r\n        return;\r\n      }\r\n\r\n      if (Date.now() > session.expiresAt) {\r\n        await logout('session_expired');\r\n        return;\r\n      }\r\n\r\n      const userResponse = await authService.getCurrentUser();\r\n      \r\n      if (!userResponse.success) {\r\n        throw new Error('Failed to get user data');\r\n      }\r\n\r\n      const permissions = new Set(userResponse.data.permissions || []);\r\n\r\n      setAuthState({\r\n        user: userResponse.data,\r\n        session,\r\n        sessionExpiresAt: session.expiresAt,\r\n        permissions,\r\n        loading: false\r\n      });\r\n\r\n      // Log security event\r\n      logSecurityEvent('session_initialized', {\r\n        userId: userResponse.data.id,\r\n        role: userResponse.data.role,\r\n        sessionId: session.id,\r\n        sessionExpiresAt: new Date(session.expiresAt).toISOString()\r\n      });\r\n\r\n      scheduleTokenRefresh(session.expiresAt);\r\n      \r\n      // Start session monitoring\r\n      startSessionMonitoring(session.expiresAt);\r\n\r\n    } catch (error) {\r\n      performanceMonitor.logError(error, 'initializeAuth');\r\n      console.error('Auth initialization error:', error);\r\n      \r\n      logSecurityEvent('initialization_failed', {\r\n        error: error.message,\r\n        sessionExists: !!authService.getCurrentSession()\r\n      });\r\n      \r\n      setAuthState({\r\n        error: 'Failed to initialize authentication',\r\n        loading: false\r\n      });\r\n    }\r\n  }, [setAuthState, scheduleTokenRefresh, performanceMonitor, logSecurityEvent]);\r\n\r\n  // Start session monitoring\r\n  const startSessionMonitoring = useCallback((expiresAt) => {\r\n    clearTimers();\r\n    \r\n    sessionCheckRef.current = setInterval(() => {\r\n      if (expiresAt && Date.now() > expiresAt) {\r\n        logout('session_expired');\r\n      }\r\n    }, 60 * 1000);\r\n\r\n    const trackActivity = () => {\r\n      if (activityTimerRef.current) {\r\n        clearTimeout(activityTimerRef.current);\r\n      }\r\n      \r\n      activityTimerRef.current = setTimeout(() => {\r\n        logout('inactivity');\r\n      }, 30 * 60 * 1000);\r\n    };\r\n\r\n    ['mousemove', 'keydown', 'click', 'scroll'].forEach(event => {\r\n      window.addEventListener(event, trackActivity, { passive: true });\r\n    });\r\n\r\n    trackActivity();\r\n  }, [clearTimers]);\r\n\r\n  // Login\r\n  const login = useCallback(async (email, password, rememberMe = false) => {\r\n    try {\r\n      setAuthState({ loading: true, error: null, success: null });\r\n      \r\n      const endMeasurement = performanceMonitor.startMeasurement('login');\r\n      const response = await authService.login(email, password, rememberMe);\r\n      endMeasurement();\r\n\r\n      if (!response.success) {\r\n        throw new Error(response.message || 'Login failed');\r\n      }\r\n\r\n      const session = authService.getCurrentSession();\r\n      const permissions = new Set(response.data.user.permissions || []);\r\n\r\n      setAuthState({\r\n        user: response.data.user,\r\n        session,\r\n        sessionExpiresAt: session.expiresAt,\r\n        permissions,\r\n        loading: false,\r\n        success: 'Login successful'\r\n      });\r\n\r\n      logSecurityEvent('login_success', {\r\n        email: email,\r\n        rememberMe,\r\n        ip: 'client-side'\r\n      });\r\n\r\n      scheduleTokenRefresh(session.expiresAt);\r\n      startSessionMonitoring(session.expiresAt);\r\n\r\n      return response;\r\n\r\n    } catch (error) {\r\n      performanceMonitor.logError(error, 'login');\r\n      \r\n      logSecurityEvent('login_failed', {\r\n        email: email,\r\n        error: error.message,\r\n        userAgent: navigator.userAgent\r\n      });\r\n      \r\n      const errorMessage = error.message || 'Login failed. Please check your credentials.';\r\n      \r\n      setAuthState({\r\n        error: errorMessage,\r\n        loading: false\r\n      });\r\n\r\n      throw error;\r\n    }\r\n  }, [setAuthState, scheduleTokenRefresh, startSessionMonitoring, performanceMonitor, logSecurityEvent]);\r\n\r\n  // Register\r\n  const register = useCallback(async (userData) => {\r\n    try {\r\n      setAuthState({ loading: true, error: null, success: null });\r\n      \r\n      const endMeasurement = performanceMonitor.startMeasurement('register');\r\n      const response = await authService.register(userData);\r\n      endMeasurement();\r\n\r\n      if (!response.success) {\r\n        throw new Error(response.message || 'Registration failed');\r\n      }\r\n\r\n      logSecurityEvent('registration_attempt', {\r\n        email: userData.email,\r\n        role: userData.role,\r\n        username: userData.username\r\n      });\r\n\r\n      if (response.requiresVerification) {\r\n        setAuthState({\r\n          loading: false,\r\n          success: response.message || 'Registration successful! Please verify your email.'\r\n        });\r\n        \r\n        logSecurityEvent('registration_pending_verification', {\r\n          email: userData.email,\r\n          role: userData.role\r\n        });\r\n        \r\n        return response;\r\n      }\r\n\r\n      const session = authService.getCurrentSession();\r\n      const permissions = new Set(response.data.user.permissions || []);\r\n\r\n      setAuthState({\r\n        user: response.data.user,\r\n        session,\r\n        sessionExpiresAt: session.expiresAt,\r\n        permissions,\r\n        loading: false,\r\n        success: response.message || 'Registration successful!'\r\n      });\r\n\r\n      logSecurityEvent('registration_success', {\r\n        email: userData.email,\r\n        role: userData.role,\r\n        username: userData.username\r\n      });\r\n\r\n      scheduleTokenRefresh(session.expiresAt);\r\n      startSessionMonitoring(session.expiresAt);\r\n\r\n      return response;\r\n\r\n    } catch (error) {\r\n      performanceMonitor.logError(error, 'register');\r\n      \r\n      logSecurityEvent('registration_failed', {\r\n        email: userData.email,\r\n        role: userData.role,\r\n        error: error.message\r\n      });\r\n      \r\n      let errorMessage = error.message || 'Registration failed. Please try again.';\r\n      \r\n      if (error.isAPIError) {\r\n        switch (error.code) {\r\n          case 'EMAIL_EXISTS':\r\n            errorMessage = 'An account with this email already exists.';\r\n            break;\r\n          case 'USERNAME_EXISTS':\r\n            errorMessage = 'This username is already taken.';\r\n            break;\r\n          case 'VALIDATION_ERROR':\r\n            if (error.errors) {\r\n              errorMessage = Object.values(error.errors).join('. ');\r\n            }\r\n            break;\r\n        }\r\n      }\r\n\r\n      setAuthState({\r\n        error: errorMessage,\r\n        loading: false\r\n      });\r\n\r\n      throw error;\r\n    }\r\n  }, [setAuthState, scheduleTokenRefresh, startSessionMonitoring, performanceMonitor, logSecurityEvent]);\r\n\r\n  // Logout\r\n  const logout = useCallback(async (reason = 'user_action') => {\r\n    const currentUser = stateRef.current.user;\r\n    const currentSession = stateRef.current.session;\r\n    \r\n    try {\r\n      logSecurityEvent('logout', {\r\n        reason: reason,\r\n        sessionDuration: currentSession ? \r\n          (Date.now() - new Date(currentSession.createdAt).getTime()) / 1000 : null\r\n      });\r\n      \r\n      await authService.logout();\r\n    } catch (error) {\r\n      console.warn('Logout error:', error);\r\n      logSecurityEvent('logout_error', {\r\n        error: error.message,\r\n        reason: reason\r\n      });\r\n    } finally {\r\n      clearTimers();\r\n      \r\n      setAuthState({\r\n        user: null,\r\n        session: null,\r\n        sessionExpiresAt: null,\r\n        permissions: new Set(),\r\n        error: null,\r\n        success: null,\r\n        loading: false\r\n      });\r\n    }\r\n  }, [clearTimers, logSecurityEvent]);\r\n\r\n  // Check username availability\r\n  const checkUsername = useCallback(async (username) => {\r\n    try {\r\n      const response = await authService.checkUsername(username);\r\n      \r\n      logSecurityEvent('username_check', {\r\n        username: username,\r\n        available: response.available\r\n      });\r\n      \r\n      return response;\r\n    } catch (error) {\r\n      console.error('Check username error:', error);\r\n      \r\n      logSecurityEvent('username_check_error', {\r\n        username: username,\r\n        error: error.message\r\n      });\r\n      \r\n      return { success: false, available: false, error: error.message };\r\n    }\r\n  }, [logSecurityEvent]);\r\n\r\n  // Check email availability\r\n  const checkEmail = useCallback(async (email) => {\r\n    try {\r\n      const response = await authService.checkEmail(email);\r\n      \r\n      logSecurityEvent('email_check', {\r\n        email: email,\r\n        available: response.available,\r\n        isUniversityEmail: email.includes('bugemauniv.ac.ug')\r\n      });\r\n      \r\n      return response;\r\n    } catch (error) {\r\n      console.error('Check email error:', error);\r\n      \r\n      logSecurityEvent('email_check_error', {\r\n        email: email,\r\n        error: error.message\r\n      });\r\n      \r\n      return { success: false, available: false, error: error.message };\r\n    }\r\n  }, [logSecurityEvent]);\r\n\r\n  // Update profile\r\n  const updateProfile = useCallback(async (updates) => {\r\n    try {\r\n      setAuthState({ loading: true, error: null });\r\n      \r\n      const response = await authService.updateProfile(updates);\r\n      \r\n      if (!response.success) {\r\n        throw new Error(response.message || 'Update failed');\r\n      }\r\n\r\n      logSecurityEvent('profile_updated', {\r\n        updatedFields: Object.keys(updates),\r\n        previousRole: state.user?.role,\r\n        newRole: response.data.role\r\n      });\r\n\r\n      setAuthState({\r\n        user: response.data,\r\n        loading: false,\r\n        success: response.message || 'Profile updated successfully'\r\n      });\r\n\r\n      return response;\r\n\r\n    } catch (error) {\r\n      performanceMonitor.logError(error, 'updateProfile');\r\n      \r\n      logSecurityEvent('profile_update_failed', {\r\n        error: error.message,\r\n        attemptedUpdates: Object.keys(updates)\r\n      });\r\n      \r\n      setAuthState({\r\n        error: error.message || 'Failed to update profile',\r\n        loading: false\r\n      });\r\n\r\n      throw error;\r\n    }\r\n  }, [setAuthState, performanceMonitor, state.user, logSecurityEvent]);\r\n\r\n  // Change password\r\n  const changePassword = useCallback(async (currentPassword, newPassword) => {\r\n    try {\r\n      setAuthState({ loading: true, error: null });\r\n      \r\n      const response = await authService.changePassword(currentPassword, newPassword);\r\n      \r\n      if (!response.success) {\r\n        throw new Error(response.message || 'Password change failed');\r\n      }\r\n\r\n      logSecurityEvent('password_changed', {\r\n        passwordStrength: newPassword.length\r\n      });\r\n\r\n      setAuthState({\r\n        loading: false,\r\n        success: response.message || 'Password changed successfully'\r\n      });\r\n\r\n      return response;\r\n\r\n    } catch (error) {\r\n      performanceMonitor.logError(error, 'changePassword');\r\n      \r\n      logSecurityEvent('password_change_failed', {\r\n        error: error.message\r\n      });\r\n      \r\n      setAuthState({\r\n        error: error.message || 'Failed to change password',\r\n        loading: false\r\n      });\r\n\r\n      throw error;\r\n    }\r\n  }, [setAuthState, performanceMonitor, logSecurityEvent]);\r\n\r\n  // Forgot password\r\n  const forgotPassword = useCallback(async (email) => {\r\n    try {\r\n      setAuthState({ loading: true, error: null });\r\n      \r\n      const response = await authService.forgotPassword(email);\r\n      \r\n      logSecurityEvent('forgot_password_requested', {\r\n        email: email\r\n      });\r\n\r\n      setAuthState({\r\n        loading: false,\r\n        success: 'If an account exists, you will receive reset instructions.'\r\n      });\r\n\r\n      return response;\r\n\r\n    } catch (error) {\r\n      performanceMonitor.logError(error, 'forgotPassword');\r\n      \r\n      setAuthState({\r\n        loading: false,\r\n        success: 'If an account exists, you will receive reset instructions.'\r\n      });\r\n\r\n      return {\r\n        success: true,\r\n        message: 'If an account exists, you will receive reset instructions.'\r\n      };\r\n    }\r\n  }, [setAuthState, performanceMonitor, logSecurityEvent]);\r\n\r\n  // Reset password\r\n  const resetPassword = useCallback(async (token, passwordData) => {\r\n    try {\r\n      setAuthState({ loading: true, error: null });\r\n      \r\n      const response = await authService.resetPassword(token, passwordData);\r\n      \r\n      if (!response.success) {\r\n        throw new Error(response.message || 'Password reset failed');\r\n      }\r\n\r\n      logSecurityEvent('password_reset', {\r\n        tokenUsed: token.substring(0, 8) + '...'\r\n      });\r\n\r\n      setAuthState({\r\n        loading: false,\r\n        success: response.message || 'Password reset successful'\r\n      });\r\n\r\n      return response;\r\n\r\n    } catch (error) {\r\n      performanceMonitor.logError(error, 'resetPassword');\r\n      \r\n      logSecurityEvent('password_reset_failed', {\r\n        tokenUsed: token ? token.substring(0, 8) + '...' : 'no-token',\r\n        error: error.message\r\n      });\r\n      \r\n      setAuthState({\r\n        error: error.message || 'Failed to reset password',\r\n        loading: false\r\n      });\r\n\r\n      throw error;\r\n    }\r\n  }, [setAuthState, performanceMonitor, logSecurityEvent]);\r\n\r\n  // Verify email\r\n  const verifyEmail = useCallback(async (token) => {\r\n    try {\r\n      setAuthState({ loading: true, error: null });\r\n      \r\n      const response = await authService.verifyEmail(token);\r\n      \r\n      if (!response.success) {\r\n        throw new Error(response.message || 'Verification failed');\r\n      }\r\n\r\n      logSecurityEvent('email_verified', {\r\n        tokenUsed: token.substring(0, 8) + '...',\r\n        email: response.data?.email\r\n      });\r\n\r\n      setAuthState({\r\n        loading: false,\r\n        success: response.message || 'Email verified successfully'\r\n      });\r\n\r\n      return response;\r\n\r\n    } catch (error) {\r\n      performanceMonitor.logError(error, 'verifyEmail');\r\n      \r\n      logSecurityEvent('email_verification_failed', {\r\n        tokenUsed: token.substring(0, 8) + '...',\r\n        error: error.message\r\n      });\r\n      \r\n      setAuthState({\r\n        error: error.message || 'Failed to verify email',\r\n        loading: false\r\n      });\r\n\r\n      throw error;\r\n    }\r\n  }, [setAuthState, performanceMonitor, logSecurityEvent]);\r\n\r\n  // Check permissions\r\n  const hasPermission = useCallback((permission) => {\r\n    const hasPerm = state.permissions.has(permission) || state.user?.role === 'admin';\r\n    return hasPerm;\r\n  }, [state.permissions, state.user]);\r\n\r\n  const hasRole = useCallback((role) => {\r\n    return state.user?.role === role;\r\n  }, [state.user]);\r\n\r\n  const hasAnyRole = useCallback((roles) => {\r\n    return roles.includes(state.user?.role);\r\n  }, [state.user]);\r\n\r\n  // Clear messages\r\n  const clearError = useCallback(() => {\r\n    setAuthState({ error: null });\r\n  }, [setAuthState]);\r\n\r\n  const clearSuccess = useCallback(() => {\r\n    setAuthState({ success: null });\r\n  }, [setAuthState]);\r\n\r\n  // Initialize on mount - FIXED\r\n  useEffect(() => {\r\n    isMountedRef.current = true;\r\n    initializeAuth();\r\n\r\n    return () => {\r\n      isMountedRef.current = false;\r\n      clearTimers();\r\n      \r\n      // Remove event listeners\r\n      if (activityTimerRef.current) {\r\n        clearTimeout(activityTimerRef.current);\r\n        activityTimerRef.current = null;\r\n      }\r\n    };\r\n  }, [initializeAuth, clearTimers]);\r\n\r\n  // Context value - INCLUDES logSecurityEvent\r\n  const contextValue = useMemo(() => ({\r\n    // State\r\n    user: state.user,\r\n    session: state.session,\r\n    loading: state.loading,\r\n    error: state.error,\r\n    success: state.success,\r\n    sessionExpiresAt: state.sessionExpiresAt,\r\n    \r\n    // Authentication methods\r\n    login,\r\n    register,\r\n    logout,\r\n    \r\n    // Validation methods\r\n    checkUsername,\r\n    checkEmail,\r\n    \r\n    // User management\r\n    updateProfile,\r\n    changePassword,\r\n    forgotPassword,\r\n    resetPassword,\r\n    verifyEmail,\r\n    \r\n    // Permission checks\r\n    hasPermission,\r\n    hasRole,\r\n    hasAnyRole,\r\n    isAuthenticated: !!state.user && !!state.session,\r\n    \r\n    // Security logging - EXPORTED\r\n    logSecurityEvent,\r\n    \r\n    // Utility methods\r\n    clearError,\r\n    clearSuccess\r\n  }), [\r\n    state,\r\n    login,\r\n    register,\r\n    logout,\r\n    checkUsername,\r\n    checkEmail,\r\n    updateProfile,\r\n    changePassword,\r\n    forgotPassword,\r\n    resetPassword,\r\n    verifyEmail,\r\n    hasPermission,\r\n    hasRole,\r\n    hasAnyRole,\r\n    logSecurityEvent,\r\n    clearError,\r\n    clearSuccess\r\n  ]);\r\n\r\n  return (\r\n    <AuthErrorBoundary>\r\n      <AuthContext.Provider value={contextValue}>\r\n        {children}\r\n      </AuthContext.Provider>\r\n    </AuthErrorBoundary>\r\n  );\r\n};\r\n\r\n// PropTypes\r\nAuthProvider.propTypes = {\r\n  children: PropTypes.node.isRequired\r\n};\r\n\r\nexport default AuthContext;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}